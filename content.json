{"meta":{"title":"Zhou_Moon","subtitle":"<ä¸‰äººè¡Œæ¯”æœ‰æˆ‘å¸ˆ>","description":"å‘¨æµ·å†›çš„åšå®¢","author":"ZhouMoon","url":"http://zhoumoon.github.io","root":"/"},"pages":[{"title":"Tags","date":"2020-05-05T07:07:51.000Z","updated":"2020-05-05T07:14:36.573Z","comments":false,"path":"tags/index.html","permalink":"http://zhoumoon.github.io/tags/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2021-02-08T08:03:32.336Z","updated":"2019-08-01T11:17:12.000Z","comments":false,"path":"repository/index.html","permalink":"http://zhoumoon.github.io/repository/index.html","excerpt":"","text":""},{"title":"å…³äºğŸ’¥","date":"2021-02-08T08:28:59.446Z","updated":"2021-02-08T08:28:59.446Z","comments":false,"path":"about/index.html","permalink":"http://zhoumoon.github.io/about/index.html","excerpt":"","text":"ç‰ˆæœ¬: 1.0.1ç‰ˆæƒæ‰€æœ‰: Moonâ€¦.."},{"title":"åˆ†ç±»","date":"2021-02-08T08:05:54.339Z","updated":"2019-08-01T11:17:12.000Z","comments":false,"path":"categories/index.html","permalink":"http://zhoumoon.github.io/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"Log4j é…ç½®ç¥¥è§£","slug":"Log4jé…ç½®è¯¦è§£","date":"2020-03-10T12:12:01.000Z","updated":"2021-02-08T08:11:26.271Z","comments":false,"path":"2020/03/10/Log4jé…ç½®è¯¦è§£/","link":"","permalink":"http://zhoumoon.github.io/2020/03/10/Log4jé…ç½®è¯¦è§£/","excerpt":"","text":"è½¬è½½ï¼šhttp://www.360doc.com/content/17/0824/16/46744981_681796916.shtml Log4Jçš„é…ç½®æ–‡ä»¶(Configuration File)å°±æ˜¯ç”¨æ¥è®¾ç½®è®°å½•å™¨çš„çº§åˆ«ã€å­˜æ”¾å™¨å’Œå¸ƒå±€çš„ï¼Œå®ƒå¯æ¥key=valueæ ¼å¼çš„è®¾ç½®æˆ–xmlæ ¼å¼çš„è®¾ç½®ä¿¡æ¯ã€‚é€šè¿‡é…ç½®ï¼Œå¯ä»¥åˆ›å»ºå‡ºLog4Jçš„è¿è¡Œç¯å¢ƒã€‚ é…ç½®æ–‡ä»¶Log4Jé…ç½®æ–‡ä»¶çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š 1234567891011121314 #é…ç½®æ ¹Loggerlog4j.rootLogger = [ level ] , appenderName1 , appenderName2 , â€¦#é…ç½®æ—¥å¿—ä¿¡æ¯è¾“å‡ºç›®çš„åœ°Appenderlog4j.appender.appenderName = fully.qualified.name.of.appender.class log4j.appender.appenderName.option1 = value1 â€¦ log4j.appender.appenderName.optionN = valueN #é…ç½®æ—¥å¿—ä¿¡æ¯çš„æ ¼å¼ï¼ˆå¸ƒå±€ï¼‰log4j.appender.appenderName.layout = fully.qualified.name.of.layout.class log4j.appender.appenderName.layout.option1 = value1 â€¦ log4j.appender.appenderName.layout.optionN = valueN å…¶ä¸­ [level] æ˜¯æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œå…±æœ‰5çº§ï¼š 12345FATAL 0 ERROR 3 WARN 4 INFO 6 DEBUG 7 Appender ä¸ºæ—¥å¿—è¾“å‡ºç›®çš„åœ°ï¼ŒLog4jæä¾›çš„appenderæœ‰ä»¥ä¸‹å‡ ç§ï¼š 12345org.apache.log4j.ConsoleAppenderï¼ˆæ§åˆ¶å°ï¼‰ï¼Œorg.apache.log4j.FileAppenderï¼ˆæ–‡ä»¶ï¼‰ï¼Œorg.apache.log4j.DailyRollingFileAppenderï¼ˆæ¯å¤©äº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼‰ï¼Œorg.apache.log4j.RollingFileAppenderï¼ˆæ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼‰ï¼Œorg.apache.log4j.WriterAppenderï¼ˆå°†æ—¥å¿—ä¿¡æ¯ä»¥æµæ ¼å¼å‘é€åˆ°ä»»æ„æŒ‡å®šçš„åœ°æ–¹ï¼‰ Layoutï¼šæ—¥å¿—è¾“å‡ºæ ¼å¼ï¼ŒLog4jæä¾›çš„layoutæœ‰ä»¥ä¸‹å‡ ç§ï¼š 1234org.apache.log4j.HTMLLayoutï¼ˆä»¥HTMLè¡¨æ ¼å½¢å¼å¸ƒå±€ï¼‰ï¼Œorg.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼‰ï¼Œorg.apache.log4j.SimpleLayoutï¼ˆåŒ…å«æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«å’Œä¿¡æ¯å­—ç¬¦ä¸²ï¼‰ï¼Œorg.apache.log4j.TTCCLayoutï¼ˆåŒ…å«æ—¥å¿—äº§ç”Ÿçš„æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ç­‰ä¿¡æ¯ï¼‰ æ‰“å°å‚æ•°: Log4Jé‡‡ç”¨ç±»ä¼¼Cè¯­è¨€ä¸­çš„printfå‡½æ•°çš„æ‰“å°æ ¼å¼æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯ï¼Œå¦‚ä¸‹: 12345678%m è¾“å‡ºä»£ç ä¸­æŒ‡å®šçš„æ¶ˆæ¯ %p è¾“å‡ºä¼˜å…ˆçº§ï¼Œå³DEBUGï¼ŒINFOï¼ŒWARNï¼ŒERRORï¼ŒFATAL %r è¾“å‡ºè‡ªåº”ç”¨å¯åŠ¨åˆ°è¾“å‡ºè¯¥logä¿¡æ¯è€—è´¹çš„æ¯«ç§’æ•° %c è¾“å‡ºæ‰€å±çš„ç±»ç›®ï¼Œé€šå¸¸å°±æ˜¯æ‰€åœ¨ç±»çš„å…¨å %t è¾“å‡ºäº§ç”Ÿè¯¥æ—¥å¿—äº‹ä»¶çš„çº¿ç¨‹å %n è¾“å‡ºä¸€ä¸ªå›è½¦æ¢è¡Œç¬¦ï¼ŒWindowså¹³å°ä¸ºâ€œ\\r\\nâ€ï¼ŒUnixå¹³å°ä¸ºâ€œ\\nâ€ %d è¾“å‡ºæ—¥å¿—æ—¶é—´ç‚¹çš„æ—¥æœŸæˆ–æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼ä¸ºISO8601ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶åæŒ‡å®šæ ¼å¼ï¼Œæ¯”å¦‚ï¼š%d&#123;yyy MMM dd HH:mm:ss , SSS&#125;ï¼Œè¾“å‡ºç±»ä¼¼ï¼š2002å¹´10æœˆ18æ—¥ 22 ï¼š 10 ï¼š 28 ï¼Œ 921 %l è¾“å‡ºæ—¥å¿—äº‹ä»¶çš„å‘ç”Ÿä½ç½®ï¼ŒåŒ…æ‹¬ç±»ç›®åã€å‘ç”Ÿçš„çº¿ç¨‹ï¼Œä»¥åŠåœ¨ä»£ç ä¸­çš„è¡Œæ•°ã€‚ä¸¾ä¾‹ï¼šTestlog4.main(TestLog4.java: 10 ) 2.åœ¨ä»£ç ä¸­åˆå§‹åŒ–Logger:1ï¼‰åœ¨ç¨‹åºä¸­è°ƒç”¨BasicConfigurator.configure()æ–¹æ³•ï¼šç»™æ ¹è®°å½•å™¨å¢åŠ ä¸€ä¸ªConsoleAppenderï¼Œè¾“å‡ºæ ¼å¼é€šè¿‡PatternLayoutè®¾ä¸ºâ€%-4r [%t] %-5p %c %x - %m%nâ€ï¼Œè¿˜æœ‰æ ¹è®°å½•å™¨çš„é»˜è®¤çº§åˆ«æ˜¯Level.DEBUG.2ï¼‰é…ç½®æ”¾åœ¨æ–‡ä»¶é‡Œï¼Œé€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ é€’æ–‡ä»¶åå­—ï¼Œé€šè¿‡PropertyConfigurator.configure(args[x])è§£æå¹¶é…ç½®ï¼›3ï¼‰é…ç½®æ”¾åœ¨æ–‡ä»¶é‡Œï¼Œé€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’æ–‡ä»¶åç­‰ä¿¡æ¯ï¼Œåˆ©ç”¨log4jé»˜è®¤çš„åˆå§‹åŒ–è¿‡ç¨‹è§£æå¹¶é…ç½®ï¼›4ï¼‰é…ç½®æ”¾åœ¨æ–‡ä»¶é‡Œï¼Œé€šè¿‡åº”ç”¨æœåŠ¡å™¨é…ç½®ä¼ é€’æ–‡ä»¶åç­‰ä¿¡æ¯ï¼Œåˆ©ç”¨ä¸€ä¸ªç‰¹æ®Šçš„servletæ¥å®Œæˆé…ç½®ã€‚ 3.ä¸ºä¸åŒçš„ Appender è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼šå½“è°ƒè¯•ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬å¾€å¾€æ³¨æ„çš„åªæ˜¯å¼‚å¸¸çº§åˆ«çš„æ—¥å¿—è¾“å‡ºï¼Œä½†æ˜¯é€šå¸¸æ‰€æœ‰çº§åˆ«çš„è¾“å‡ºéƒ½æ˜¯æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„ï¼Œå¦‚æœæ—¥å¿—è¾“å‡ºçš„çº§åˆ«æ˜¯BUGï¼ï¼Ÿé‚£å°±æ…¢æ…¢å»æ‰¾å§ã€‚è¿™æ—¶æˆ‘ä»¬ä¹Ÿè®¸ä¼šæƒ³è¦æ˜¯èƒ½æŠŠå¼‚å¸¸ä¿¡æ¯å•ç‹¬è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œè¯¥å¤šå¥½å•Šã€‚å½“ç„¶å¯ä»¥ï¼ŒLog4jå·²ç»æä¾›äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®ä¸­ä¿®æ”¹Appenderçš„Threshold å°±èƒ½å®ç°,æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 12345678910111213141516171819202122232425### set log levels ###log4j.rootLogger = debug , stdout , D , E### è¾“å‡ºåˆ°æ§åˆ¶å° ###log4j.appender.stdout = org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.Target = System.outlog4j.appender.stdout.layout = org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern = %d&#123;ABSOLUTE&#125; %5p %c&#123; 1 &#125;:%L - %m%n### è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ ###log4j.appender.D = org.apache.log4j.DailyRollingFileAppenderlog4j.appender.D.File = logs/log.loglog4j.appender.D.Append = truelog4j.appender.D.Threshold = DEBUG ## è¾“å‡ºDEBUGçº§åˆ«ä»¥ä¸Šçš„æ—¥å¿—log4j.appender.D.layout = org.apache.log4j.PatternLayoutlog4j.appender.D.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125; [ %t:%r ] - [ %p ] %m%n### ä¿å­˜å¼‚å¸¸ä¿¡æ¯åˆ°å•ç‹¬æ–‡ä»¶ ###log4j.appender.D = org.apache.log4j.DailyRollingFileAppenderlog4j.appender.D.File = logs/error.log ## å¼‚å¸¸æ—¥å¿—æ–‡ä»¶ålog4j.appender.D.Append = truelog4j.appender.D.Threshold = ERROR ## åªè¾“å‡ºERRORçº§åˆ«ä»¥ä¸Šçš„æ—¥å¿—!!!log4j.appender.D.layout = org.apache.log4j.PatternLayoutlog4j.appender.D.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125; [ %t:%r ] - [ %p ] %m%n``` public class TestLog4j { public static void main(String[] args) { PropertyConfigurator.configure( â€œ D:/Code/conf/log4j.properties â€œ ); Logger logger = Logger.getLogger(TestLog4j. class ); logger.debug( â€œ debug â€œ ); logger.error( â€œ error â€œ ); } 12345678è¿è¡Œä¸€ä¸‹ï¼Œçœ‹çœ‹å¼‚å¸¸ä¿¡æ¯æ˜¯ä¸æ˜¯ä¿å­˜åœ¨äº†ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶error.logä¸­ã€‚\\=====================================================================èµ„æ–™ï¼š1. log4j.propertiesæ–‡ä»¶ä¾‹å­ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œä¹Ÿå°±æ˜¯log4jçš„é…ç½®æ–‡ä»¶: Set root logger level to DEBUG and its only appender to A1#log4jä¸­æœ‰äº”çº§logger #FATAL 0 #ERROR 3 #WARN 4 #INFO 6 #DEBUG 7 #é…ç½®æ ¹Loggerï¼Œå…¶è¯­æ³•ä¸ºï¼š #log4j.rootLogger = [ level ] , appenderName, appenderName, â€¦log4j.rootLogger=INFO, A1 ,R #è¿™ä¸€å¥è®¾ç½®ä»¥ä¸ºç€æ‰€æœ‰çš„logéƒ½è¾“å‡º #å¦‚æœä¸ºlog4j.rootLogger=WARN, åˆ™æ„å‘³ç€åªæœ‰WARN,ERROR,FATAL #è¢«è¾“å‡ºï¼ŒDEBUG,INFOå°†è¢«å±è”½æ‰. A1 is set to be a ConsoleAppender.#log4jä¸­Appenderæœ‰å‡ å±‚å¦‚æ§åˆ¶å°ã€æ–‡ä»¶ã€GUIç»„ä»¶ã€ç”šè‡³æ˜¯å¥—æ¥å£æœåŠ¡å™¨ã€NTçš„äº‹ä»¶è®°å½•å™¨ã€UNIX Syslogå®ˆæŠ¤è¿›ç¨‹ç­‰ #ConsoleAppenderè¾“å‡ºåˆ°æ§åˆ¶å°log4j.appender.A1=org.apache.log4j.ConsoleAppender A1 ä½¿ç”¨çš„è¾“å‡ºå¸ƒå±€ï¼Œå…¶ä¸­log4jæä¾›4ç§å¸ƒå±€. org.apache.log4j.HTMLLayoutï¼ˆä»¥HTMLè¡¨æ ¼å½¢å¼å¸ƒå±€ï¼‰#org.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼‰ï¼Œ #org.apache.log4j.SimpleLayoutï¼ˆåŒ…å«æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«å’Œä¿¡æ¯å­—ç¬¦ä¸²ï¼‰ï¼Œ #org.apache.log4j.TTCCLayoutï¼ˆåŒ…å«æ—¥å¿—äº§ç”Ÿçš„æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ç­‰ä¿¡æ¯ï¼‰ log4j.appender.A1.layout=org.apache.log4j.PatternLayout #çµæ´»å®šä¹‰è¾“å‡ºæ ¼å¼ å…·ä½“æŸ¥çœ‹log4j javadoc org.apache.log4j.PatternLayout #d æ—¶é—´ â€¦.log4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss} [%c]-[%p] %m%n #R è¾“å‡ºåˆ°æ–‡ä»¶ RollingFileAppenderçš„æ‰©å±•ï¼Œå¯ä»¥æä¾›ä¸€ç§æ—¥å¿—çš„å¤‡ä»½åŠŸèƒ½ã€‚log4j.appender.R=org.apache.log4j.RollingFileAppender #æ—¥å¿—æ–‡ä»¶çš„åç§°log4j.appender.R.File=log4j.log #æ—¥å¿—æ–‡ä»¶çš„å¤§å°log4j.appender.R.MaxFileSize=100KB ä¿å­˜ä¸€ä¸ªå¤‡ä»½æ–‡ä»¶log4j.appender.R.MaxBackupIndex=1 log4j.appender.R.layout=org.apache.log4j.TTCCLayout #log4j.appender.R.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss} [%c]-[%p] %m%n 122.ä¸‹é¢æˆ‘ç»™å‡ºä¸€ä¸ªåœ¨weblogicä¸‹ä½¿ç”¨log4jçš„é…ç½®è¿‡ç¨‹ï¼Œé¦–å…ˆç»™å‡ºè¿™ä¸ªé…ç½®æ–‡ä»¶çš„å®Œæ•´ä¿¡æ¯ã€‚ #log4j.rootLogger=INFO,A1,R //è¿™ä¸€å¥æŒ‡å®šäº†æ—¥å¿—è¾“å‡ºçš„çº§åˆ«ä¸ºinfo,A1å’ŒRåˆ†åˆ«ä»£è¡¨æ—¥å¿—è¾“å‡ºåˆ°ä»€ä¹ˆåœ°æ–¹ã€‚log4j.category.hybl_wshabcm=debug,A1,R //è¿™ä¸€å¥æŒ‡å®šäº†æ—¥å¿—å…·ä½“è¾“å‡ºå“ªä¸ªåŒ…çš„ä¿¡æ¯ï¼Œä»¥åŠè¾“å‡ºä½ç½®log4j.appender.A1=org.apache.log4j.ConsoleAppender //è¿™é‡ŒæŒ‡å®šäº†æ—¥å¿—è¾“å‡ºçš„ç¬¬ä¸€ä¸ªä½ç½®A1æ˜¯æ§åˆ¶å°ConsoleAppender/**å…¶ä¸­ï¼ŒLog4jæä¾›çš„appenderæœ‰ä»¥ä¸‹å‡ ç§ï¼š*org.apache.log4j.ConsoleAppenderï¼ˆæ§åˆ¶å°ï¼‰ï¼Œ*org.apache.log4j.FileAppenderï¼ˆæ–‡ä»¶ï¼‰ï¼Œ*org.apache.log4j.DailyRollingFileAppenderï¼ˆæ¯å¤©äº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼‰ï¼Œ*org.apache.log4j.RollingFileAppenderï¼ˆæ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼‰ï¼Œ*org.apache.log4j.WriterAppenderï¼ˆå°†æ—¥å¿—ä¿¡æ¯ä»¥æµæ ¼å¼å‘é€åˆ°ä»»æ„æŒ‡å®šçš„åœ°æ–¹ï¼‰**/log4j.appender.A1.layout=org.apache.log4j.PatternLayout //æŒ‡å®šA1çš„å¸ƒå±€æ¨¡å¼ /**å…¶ä¸­ï¼ŒLog4jæä¾›çš„layoutæœ‰ä»¥ä¸‹å‡ ç§ï¼šÃ—org.apache.log4j.HTMLLayoutï¼ˆä»¥HTMLè¡¨æ ¼å½¢å¼å¸ƒå±€ï¼‰ï¼Œ*org.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼‰ï¼Œ*org.apache.log4j.SimpleLayoutï¼ˆåŒ…å«æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«å’Œä¿¡æ¯å­—ç¬¦ä¸²ï¼‰ï¼Œ*org.apache.log4j.TTCCLayoutï¼ˆåŒ…å«æ—¥å¿—äº§ç”Ÿçš„æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ç­‰ä¿¡æ¯ï¼‰*/log4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%c]-[%p] %m%n //æŒ‡å®šæ—¥å¿—çš„è¾“å‡ºæ ¼å¼ log4j.appender.R=org.apache.log4j.RollingFileAppender //æŒ‡å®šä»¥æ–‡ä»¶çš„æ–¹å¼è¾“å‡ºæ—¥å¿—log4j.appender.R.File=c:/sys.html //æ–‡ä»¶ä½ç½®log4j.appender.R.MaxFileSize=500KB //æ–‡ä»¶æœ€å¤§å°ºå¯¸log4j.appender.R.MaxBackupIndex=1 //å¤‡ä»½æ•°log4j.appender.R.layout=org.apache.log4j.HTMLLayout //æ–‡ä»¶çš„æ ¼å¼ä¸ºHtmlæ ¼å¼ #log4j.appender.R.layout=org.apache.log4j.PatternLayoutlog4j.appender.R.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c] [%p] - %m%n 1234567\\============================================================ **é”™è¯¯æ—¥å¿—å‘é€email**1. æ‰“å¼€log4j.propertiesæ–‡ä»¶2. rootLoggeråŠ ä¸Šä¸€ä¸ªAppender, å³MAIL, å¦‚log4j.rootLogger=ERROR,A1,MAIL3. é…ç½®Appenderä¿¡æ¯,åœ¨æ–‡ä»¶çš„æœ«å°¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ† Configuration for receiving e-mails when ERROR messages occur.#è‡ªå®šä¹‰çš„Appenderlog4j.appender.MAIL=org.apache.log4j.net.SMTPAppender #æ—¥å¿—çš„é”™è¯¯çº§åˆ«log4j.appender.MAIL.Threshold=ERROR #ç¼“å­˜æ–‡ä»¶å¤§å°ï¼Œæ—¥å¿—è¾¾åˆ°512Kæ—¶å‘é€Emaillog4j.appender.MAIL.BufferSize=512 #å‘ä»¶äººlog4j.appender.MAIL.From=test@163.com #å‘é€é‚®ä»¶çš„æœåŠ¡å™¨log4j.appender.MAIL.SMTPHost=smtp.163.com #é‚®ä»¶çš„æ ‡é¢˜log4j.appender.MAIL.Subject=Log4J Message #æ—¥å¿—é‚®ä»¶çš„æ¥æ”¶è€…log4j.appender.MAIL.To=test@163.com #æ—¥å¿—PatternLayoutlog4j.appender.MAIL.layout=org.apache.log4j.PatternLayout #æ—¥å¿—çš„æ ¼å¼log4j.appender.MAIL.layout.ConversionPattern=[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n 12345678910ä»¥ä¸Šæ–‡ä»¶çš†æµ‹è¯•é€šè¿‡ï¼Œå¦‚ä¸é€šè¿‡è¯·æŸ¥çœ‹è‡ªå·±çš„emailå‘é€ç¯å¢ƒ.\\==============================================================================================æŸ¥çœ‹äº†SMTPAppender.javaçš„æºä»£ç ï¼Œæ‰å‘ç°Log4Jç¼ºçœæä¾›çš„SMTPAppenderå¹¶ä¸æ”¯æŒSMTPçš„è®¤è¯åŠŸèƒ½ã€‚éš¾é“ç°åœ¨åŒ¿åçš„SMTPé‚®ä»¶æœåŠ¡å™¨å¾ˆå¤šå—ï¼Ÿæˆ‘æ‰‹å¤´çš„æ˜¯Log4Jçš„ 1.2.8ç‰ˆæœ¬ï¼Œå»logging.apache.orgçœ‹ï¼Œå‘ç°å·²ç»æœ‰æ–°çš„ç‰ˆæœ¬äº†ï¼š 1.2.11ï¼Œå‘µå‘µï¼Œçªƒå–œã€‚è¿™æ ·çš„ç®€å•ã€åŸºæœ¬çš„éœ€æ±‚Log4Jå¼€å‘ç»„åº”è¯¥å·²ç»æ·»åŠ ä¸Šäº†å§ã€‚ä¸‹è½½ã€æŸ¥çœ‹ï¼Œå†æ¬¡å¤±æœ›ä¹‹æï¼çœ‹æ¥åªæœ‰è‡ªå·±åŠ¨æ‰‹æ·»åŠ äº†ã€‚æœ¬æ¥åº”è¯¥é‡æ–°å®šä¹‰ä¸€ä¸ªåå­—ï¼Œç®—åšä¸€ä¸ªè‡ªå®šä¹‰Appenderå§ï¼Œä½†ä¸ºäº†ä½¿æˆ‘å¾ˆå¤šåº”ç”¨ä¸­çš„log4j.propertiesä¸ç”¨ä¿®æ”¹è¿‡å¤šï¼Œå°±ç›´æ¥åœ¨åŸæ¥çš„SMTPAppender.javaä¸Šåšäº†ä¿®æ”¹ã€‚å¦å¤–ä¸€ä¸ªæ›´é‡è¦çš„åŸå› æ˜¯ï¼š æˆ‘è®¤ä¸ºï¼šè¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ã€å¿…é¡»çš„SMTPAppenderåº”è¯¥å…·æœ‰çš„åŠŸèƒ½ã€‚ 1234ä¸»è¦åœ¨SMTPAppender.javaä¸­æ·»åŠ äº†å¦‚ä¸‹ä»£ç ï¼ša. æ·»åŠ å®ä¾‹å˜é‡ private String smtpUsername; private String smtpPassword; 12b. å°† activateOptions() æ–¹æ³•ä¸­çš„ Session session = Session.getInstance(props, null); 12ä¿®æ”¹ä¸ºï¼š if(smtpPassword != null &amp;&amp; smtpUsername != null) { // Setup mail server authentication props.put(â€œmail.smtp.authâ€, â€œtrueâ€); // props.put(â€œmail.transport.protocolâ€, â€œsmtpâ€); authenticator = new Authenticator() { protected PasswordAuthentication getPasswordAuthentication() { return new PasswordAuthentication(smtpUsername, smtpPassword); } }; } // Get session Session session = Session.getDefaultInstance(props,authenticator);12c. æ·»åŠ Setæ–¹æ³• public void setSMTPPassword(String smtpPassword) { this.smtpPassword = smtpPassword; } public void setSMTPUsername(String smtpUsername) { this.smtpUsername = smtpUsername; } 12ç¼–è¯‘ï¼Œå¹¶é‡æ–°æ‰“åŒ…log4j-1.2.8.jarã€‚åœ¨åº”ç”¨ä¸­æ›¿æ¢åŸlog4j-1.2.8.jaråŒ…ï¼Œå¹¶ä¿®æ”¹log4j.propertiesæ–‡ä»¶ï¼Œåœ¨SMTPAppenderçš„é…ç½®ä¸­æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œï¼š log4j.appender.MAIL.SMTPUsername=log4j.appender.MAIL.SMTPPassword= 1234567891011121314151617181920212223242526272829303132OKï¼Œç°åœ¨è¿™ä¸ªSMTPAppenderå°±å¯ä»¥ä½¿ç”¨éœ€è¦ç”¨æˆ·åã€å¯†ç éªŒè¯çš„SMTPæœåŠ¡å™¨ï¼ˆç°åœ¨ç»å¤§å¤šæ•°SMTPæœåŠ¡å™¨ï¼‰è¿›è¡ŒEmailæŠ¥è­¦å‘é€äº†ã€‚* * *log4jè¯¦è§£ æ ¹æ®ç½‘ç»œèµ„æ–™æ•´ç†&gt; &gt; &gt; &gt; 1. æ¦‚è¿°&lt;&lt;&lt;&lt; &gt; &gt; &gt; &gt; 1.1. èƒŒæ™¯ &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ æ—¥å¿—è®°å½•æ€»çš„æ¥è¯´åŸºäºä¸‰ä¸ªç›®çš„ï¼šç›‘è§†ä»£ç ä¸­å˜é‡çš„å˜åŒ–æƒ…å†µï¼Œå‘¨æœŸæ€§çš„è®°å½•åˆ°æ–‡ä»¶ä¸­ä¾›å…¶ä»–åº”ç”¨è¿›è¡Œç»Ÿè®¡åˆ†æå·¥ä½œï¼›è·Ÿè¸ªä»£ç è¿è¡Œæ—¶è½¨è¿¹ï¼Œä½œä¸ºæ—¥åå®¡è®¡çš„ä¾æ®ï¼›æ‹…å½“é›†æˆå¼€å‘ç¯å¢ƒä¸­çš„è°ƒè¯•å™¨çš„ä½œç”¨ï¼Œå‘æ–‡ä»¶æˆ–æ§åˆ¶å°æ‰“å°ä»£ç çš„è°ƒè¯•ä¿¡æ¯ã€‚ &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; æœ€æ™®é€šçš„åšæ³•å°±æ˜¯åœ¨ä»£ç ä¸­åµŒå…¥è®¸å¤šçš„æ‰“å°è¯­å¥ï¼Œè¿™äº›æ‰“å°è¯­å¥å¯ä»¥è¾“å‡ºåˆ°æ§åˆ¶å°æˆ–æ–‡ä»¶ä¸­ï¼Œæ¯”è¾ƒå¥½çš„åšæ³•å°±æ˜¯æ„é€ ä¸€ä¸ªæ—¥å¿—æ“ä½œç±»æ¥å°è£…æ­¤ç±»æ“ä½œï¼Œè€Œä¸æ˜¯è®©ä¸€ç³»åˆ—çš„æ‰“å°è¯­å¥å……æ–¥äº†ä»£ç çš„ä¸»ä½“ã€‚ &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 1.2. Log4jç®€ä»‹ &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; åœ¨å¼ºè°ƒå¯é‡ç”¨ç»„ä»¶å¼€å‘çš„ä»Šå¤©ï¼Œé™¤äº†è‡ªå·±ä»å¤´åˆ°å°¾å¼€å‘ä¸€ä¸ªå¯é‡ç”¨çš„æ—¥å¿—æ“ä½œç±»å¤–ï¼ŒApacheä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¼ºæœ‰åŠ›çš„æ—¥å¿—æ“ä½œåŒ…-Log4jã€‚ &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Log4jæ˜¯Apacheçš„ä¸€ä¸ªå¼€æ”¾æºä»£ç é¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯æ§åˆ¶å°ã€æ–‡ä»¶ã€GUIç»„ä»¶ã€ç”šè‡³æ˜¯å¥—æ¥å£æœåŠ¡ å™¨ã€NTçš„äº‹ä»¶è®°å½•å™¨ã€UNIX Syslogå®ˆæŠ¤è¿›ç¨‹ç­‰ï¼›æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼›é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æœ€ä»¤äººæ„Ÿå…´è¶£çš„å°± æ˜¯ï¼Œè¿™äº›å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚ &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; æ­¤å¤–ï¼Œé€šè¿‡Log4jå…¶ä»–è¯­è¨€æ¥å£ï¼Œæ‚¨å¯ä»¥åœ¨Cã€C+ +ã€.Netã€PL/SQLç¨‹åºä¸­ä½¿ç”¨Log4jï¼Œå…¶è¯­æ³•å’Œç”¨æ³•ä¸åœ¨Javaç¨‹åºä¸­ä¸€æ ·ï¼Œä½¿å¾—å¤šè¯­è¨€åˆ†å¸ƒå¼ç³»ç»Ÿå¾—åˆ°ä¸€ä¸ªç»Ÿä¸€ä¸€è‡´çš„æ—¥å¿—ç»„ä»¶æ¨¡å—ã€‚è€Œä¸”ï¼Œé€š è¿‡ä½¿ç”¨å„ç§ç¬¬ä¸‰æ–¹æ‰©å±•ï¼Œæ‚¨å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†Log4jé›†æˆåˆ°J2EEã€JINIç”šè‡³æ˜¯SNMPåº”ç”¨ä¸­ã€‚ &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; æœ¬æ–‡ä»‹ç»çš„Log4jç‰ˆæœ¬æ˜¯ 1.2.3ã€‚ä½œè€…è¯•å›¾é€šè¿‡ä¸€ä¸ªç®€å•çš„å®¢æˆ·/æœåŠ¡å™¨Javaç¨‹åºä¾‹å­å¯¹æ¯”ä½¿ç”¨ä¸ä¸ä½¿ç”¨Log4j 1.2.3çš„å·®åˆ«ï¼Œå¹¶è¯¦ç»†è®²è§£äº†åœ¨å®è·µä¸­æœ€å¸¸ä½¿ç”¨Log4jçš„æ–¹æ³•å’Œæ­¥éª¤ã€‚åœ¨å¼ºè°ƒå¯é‡ç”¨ç»„ä»¶å¼€å‘çš„ä»Šå¤©ï¼Œç›¸ä¿¡Log4jå°†ä¼šç»™å¹¿å¤§çš„è®¾è®¡å¼€å‘äººå‘˜å¸¦æ¥æ–¹ ä¾¿ã€‚åŠ å…¥åˆ°Log4jçš„é˜Ÿä¼æ¥å§ï¼ &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2. ä¸€ä¸ªç®€å•çš„ä¾‹å­ &lt;&lt;&lt;&lt; æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨Javaå®ç°çš„å®¢æˆ·/æœåŠ¡å™¨ç½‘ç»œç¨‹åºã€‚åˆšå¼€å§‹æˆ‘ä»¬ä¸ä½¿ç”¨Log4jï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸€ç³»åˆ—çš„æ‰“å°è¯­å¥ï¼Œç„¶åæˆ‘ä»¬å°†ä½¿ç”¨Log4jæ¥å®ç°å®ƒçš„æ—¥å¿—åŠŸèƒ½ã€‚è¿™æ ·ï¼Œå¤§å®¶å°±å¯ä»¥æ¸…æ¥šåœ°æ¯”è¾ƒå‡ºå‰åä¸¤ä¸ªä»£ç çš„å·®åˆ«ã€‚ 2.1. ä¸ä½¿ç”¨Log4j 2.1.1. å®¢æˆ·ç¨‹åº package log4j ; import java.io.* ; import java.net.* ; /** * * Client Without Log4j * Description: a sample with log4j * @version 1.0 */ public class ClientWithoutLog4j { /** * * @param args */ public static void main ( String args [] ) { String welcome = null; String response = null; BufferedReader reader = null; PrintWriter writer = null; InputStream in = null; OutputStream out = null; Socket client = null; try { client = new Socket ( â€œlocalhostâ€, 8001 ) ; System.out.println ( â€œinfo: Client socket: â€œ + client ) ; in = client.getInputStream () ; out = client.getOutputStream () ; } catch ( IOException e ) { System.out.println ( â€œerror: IOException : â€œ + e ) ; System.exit ( 0 ) ; } try{ reader = new BufferedReader( new InputStreamReader ( in ) ) ; writer = new PrintWriter ( new OutputStreamWriter ( out ), true ) ; welcome = reader.readLine () ; System.out.println ( â€œdebug: Server says: â€˜â€œ + welcome + â€œâ€˜â€œ ) ; System.out.println ( â€œdebug: HELLOâ€ ) ; writer.println ( â€œHELLOâ€ ) ; response = reader.readLine () ; System.out.println ( â€œdebug: Server responds: â€˜â€œ + response + â€œâ€˜â€œ) ; System.out.println ( â€œdebug: HELPâ€ ) ; writer.println ( â€œHELPâ€ ) ; response = reader.readLine () ; System.out.println ( â€œdebug: Server responds: â€˜â€œ + response + â€œâ€˜â€œ ) ; System.out.println ( â€œdebug: QUITâ€ ) ; writer.println ( â€œQUITâ€ ) ; } catch ( IOException e ) { System.out.println ( â€œwarn: IOException in client.in.readln()â€ ) ; System.out.println ( e ) ; } try{ Thread.sleep ( 2000 ) ; } catch ( Exception ignored ) {} } } 123 2.1.2. æœåŠ¡å™¨ç¨‹åº package log4j ; import java.util.* ; import java.io.* ; import java.net.* ; /** * * Server Without Log4j * Description: a sample with log4j * @version 1.0 */ public class ServerWithoutLog4j { final static int SERVER_PORT = 8001 ; // this serverâ€™s port /** * * @param args */ public static void main ( String args [] ) { String clientRequest = null; BufferedReader reader = null; PrintWriter writer = null; ServerSocket server = null; Socket socket = null; InputStream in = null; OutputStream out = null; try { server = new ServerSocket ( SERVER_PORT ) ; System.out.println ( â€œinfo: ServerSocket before accept: â€œ + server ) ; System.out.println ( â€œinfo: Java server without log4j, on-line!â€ ) ; // wait for clientâ€™s connection socket = server.accept () ; System.out.println ( â€œinfo: ServerSocket after accept: â€œ + server ) ; in = socket.getInputStream () ; out = socket.getOutputStream () ; } catch ( IOException e ) { System.out.println( â€œerror: Server constructor IOException: â€œ + e ) ; System.exit ( 0 ) ; } reader = new BufferedReader ( new InputStreamReader ( in ) ) ; writer = new PrintWriter ( new OutputStreamWriter ( out ) , true ) ; // send welcome string to client writer.println ( â€œJava server without log4j, â€œ + new Date () ) ; while ( true ) { try { // read from client clientRequest = reader.readLine () ; System.out.println ( â€œdebug: Client says: â€œ + clientRequest ) ; if ( clientRequest.startsWith ( â€œHELPâ€ ) ) { System.out.println ( â€œdebug: OK!â€ ) ; writer.println ( â€œVocabulary: HELP QUITâ€ ) ; } else { if ( clientRequest.startsWith ( â€œQUITâ€ ) ) { System.out.println ( â€œdebug: OK!â€ ) ; System.exit ( 0 ) ; } else{ System.out.println ( â€œwarn: Command â€˜â€œ + clientRequest + â€œâ€˜ not understood.â€ ) ; writer.println ( â€œCommand â€˜â€œ + clientRequest + â€œâ€˜ not understood.â€ ) ; } } } catch ( IOException e ) { System.out.println ( â€œerror: IOException in Server â€œ + e ) ; System.exit ( 0 ) ; } } } } 12345 2.2. è¿ç§»åˆ°Log4j 2.2.1. å®¢æˆ·ç¨‹åº package log4j ; import java.io.* ; import java.net.* ; // add for log4j: import some package import org.apache.log4j.PropertyConfigurator ; import org.apache.log4j.Logger ; import org.apache.log4j.Level ; /** * * Client With Log4j * Description: a sample with log4j * @version 1.0 */ public class ClientWithLog4j { /* add for log4j: class Logger is the central class in the log4j package. we can do most logging operations by Logger except configuration. getLogger(â€¦): retrieve a logger by name, if not then create for it. / static Logger logger = Logger.getLogger ( ClientWithLog4j.class.getName () ) ; /* * * @param args : configuration file name */ public static void main ( String args [] ) { String welcome = null ; String response = null ; BufferedReader reader = null ; PrintWriter writer = null ; InputStream in = null ; OutputStream out = null ; Socket client = null ; /* add for log4j: class BasicConfigurator can quickly configure the package. print the information to console. */ PropertyConfigurator.configure ( â€œClientWithLog4j.propertiesâ€ ) ; // add for log4j: set the level // logger.setLevel ( ( Level ) Level.DEBUG ) ; try{ client = new Socket( â€œlocalhostâ€ , 8001 ) ; // add for log4j: log a message with the info level logger.info ( â€œClient socket: â€œ + client ) ; in = client.getInputStream () ; out = client.getOutputStream () ; } catch ( IOException e ) { // add for log4j: log a message with the error level logger.error ( â€œIOException : â€œ + e ) ; System.exit ( 0 ) ; } try{ reader = new BufferedReader ( new InputStreamReader ( in ) ) ; writer = new PrintWriter ( new OutputStreamWriter ( out ), true ) ; welcome = reader.readLine () ; // add for log4j: log a message with the debug level logger.debug ( â€œServer says: â€˜â€œ + welcome + â€œâ€˜â€œ ) ; // add for log4j: log a message with the debug level logger.debug ( â€œHELLOâ€ ) ; writer.println ( â€œHELLOâ€ ) ; response = reader.readLine () ; // add for log4j: log a message with the debug level logger.debug ( â€œServer responds: â€˜â€œ + response + â€œâ€˜â€œ ) ; // add for log4j: log a message with the debug level logger.debug ( â€œHELPâ€ ) ; writer.println ( â€œHELPâ€ ) ; response = reader.readLine () ; // add for log4j: log a message with the debug level logger.debug ( â€œServer responds: â€˜â€œ + response + â€œâ€˜â€œ) ; // add for log4j: log a message with the debug level logger.debug ( â€œQUITâ€ ) ; writer.println ( â€œQUITâ€ ) ; } catch ( IOException e ) { // add for log4j: log a message with the warn level logger.warn ( â€œIOException in client.in.readln()â€ ) ; System.out.println ( e ) ; } try { Thread.sleep ( 2000 ) ; } catch ( Exception ignored ) {} } } 123 2.2.2. æœåŠ¡å™¨ç¨‹åº package log4j; import java.util.* ; import java.io.* ; import java.net.* ; // add for log4j: import some package import org.apache.log4j.PropertyConfigurator ; import org.apache.log4j.Logger ; import org.apache.log4j.Level ; /** * * Server With Log4j * Description: a sample with log4j * @version 1.0 */ public class ServerWithLog4j { final static int SERVER_PORT = 8001 ; // this serverâ€™s port /* add for log4j: class Logger is the central class in the log4j package. we can do most logging operations by Logger except configuration. getLogger(â€¦): retrieve a logger by name, if not then create for it. / static Logger logger = Logger.getLogger ( ServerWithLog4j.class.getName () ) ; /* * * @param args */ public static void main ( String args[]) { String clientRequest = null ; BufferedReader reader = null ; PrintWriter writer = null ; ServerSocket server = null ; Socket socket = null ; InputStream in = null ; OutputStream out = null ; /* add for log4j: class BasicConfigurator can quickly configure the package. print the information to console. */ PropertyConfigurator.configure ( â€œServerWithLog4j.propertiesâ€ ) ; // add for log4j: set the level // logger.setLevel ( ( Level ) Level.DEBUG ) ; try{ server = new ServerSocket ( SERVER_PORT ) ; // add for log4j: log a message with the info level logger.info ( â€œServerSocket before accept: â€œ + server ) ; // add for log4j: log a message with the info level logger.info ( â€œJava server with log4j, on-line!â€ ) ; // wait for clientâ€™s connection socket = server.accept() ; // add for log4j: log a message with the info level logger.info ( â€œServerSocket after accept: â€œ + server ) ; in = socket.getInputStream() ; out = socket.getOutputStream() ; } catch ( IOException e ) { // add for log4j: log a message with the error level logger.error ( â€œServer constructor IOException: â€œ + e ) ; System.exit ( 0 ) ; } reader = new BufferedReader ( new InputStreamReader ( in ) ) ; writer = new PrintWriter ( new OutputStreamWriter ( out ), true ) ; // send welcome string to client writer.println ( â€œJava server with log4j, â€œ + new Date () ) ; while ( true ) { try { // read from client clientRequest = reader.readLine () ; // add for log4j: log a message with the debug level logger.debug ( â€œClient says: â€œ + clientRequest ) ; if ( clientRequest.startsWith ( â€œHELPâ€ ) ) { // add for log4j: log a message with the debug level logger.debug ( â€œOK!â€ ) ; writer.println ( â€œVocabulary: HELP QUITâ€ ) ; } else { if ( clientRequest.startsWith ( â€œQUITâ€ ) ) { // add for log4j: log a message with the debug level logger.debug ( â€œOK!â€ ) ; System.exit ( 0 ) ; } else { // add for log4j: log a message with the warn level logger.warn ( â€œCommand â€˜â€œ + clientRequest + â€œâ€˜ not understood.â€ ) ; writer.println ( â€œCommand â€˜â€œ + clientRequest + â€œâ€˜ not understood.â€ ) ; } } } catch ( IOException e ) { // add for log4j: log a message with the error level logger.error( â€œIOException in Server â€œ + e ) ; System.exit ( 0 ) ; } } } } 12345 2.2.3. é…ç½®æ–‡ä»¶ 2.2.3.1. å®¢æˆ·ç¨‹åºé…ç½®æ–‡ä»¶ log4j.rootLogger=INFO, A1 log4j.appender.A1=org.apache.log4j.ConsoleAppender log4j.appender.A1.layout=org.apache.log4j.PatternLayout log4j.appender.A1.layout.ConversionPattern=%-4r %-5p [%t] %37c %3x - %m%n 123 2.2.3.2. æœåŠ¡å™¨ç¨‹åºé…ç½®æ–‡ä»¶ log4j.rootLogger=INFO, A1 log4j.appender.A1=org.apache.log4j.ConsoleAppender log4j.appender.A1.layout=org.apache.log4j.PatternLayout log4j.appender.A1.layout.ConversionPattern=%-4r %-5p [%t] %37c %3x - %m%n 1234567 2.3. æ¯”è¾ƒ æ¯”è¾ƒè¿™ä¸¤ä¸ªåº”ç”¨å¯ä»¥çœ‹å‡ºï¼Œé‡‡ç”¨Log4jè¿›è¡Œæ—¥å¿—æ“ä½œçš„æ•´ä¸ªè¿‡ç¨‹ç›¸å½“ç®€å•æ˜äº†ï¼Œä¸ç›´æ¥ä½¿ç”¨System.out.printlnè¯­å¥è¿›è¡Œæ—¥å¿—ä¿¡æ¯è¾“å‡ºçš„ æ–¹å¼ç›¸æ¯”ï¼ŒåŸºæœ¬ä¸Šæ²¡æœ‰å¢åŠ ä»£ç é‡ï¼ŒåŒæ—¶èƒ½å¤Ÿæ¸…æ¥šåœ°ç†è§£æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„é‡è¦ç¨‹åº¦ã€‚é€šè¿‡æ§åˆ¶é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çµæ´»åœ°ä¿®æ”¹æ—¥å¿—ä¿¡æ¯çš„æ ¼å¼ï¼Œè¾“å‡ºç›®çš„åœ°ç­‰ç­‰ æ–¹é¢ï¼Œè€Œå•çº¯ä¾é System.out.printlnè¯­å¥ï¼Œæ˜¾ç„¶éœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚&gt; &gt; &gt; &gt; 3 . Log4jæ—¥å¿—ç®¡ç†ç³»ç»Ÿç®€å•ä½¿ç”¨è¯´æ˜ &lt;&lt;&lt;&lt; é€šå¸¸ï¼Œæˆ‘ä»¬éƒ½æä¾›ä¸€ä¸ªåä¸º log4j.propertiesçš„æ–‡ä»¶ï¼Œåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨åˆ°Log4Jæ—¶ï¼ŒLog4Jä¼šåœ¨ç±»è·¯å¾„ï¼ˆ../web-inf/class/å½“ç„¶ä¹Ÿå¯ä»¥æ”¾åˆ°å…¶å®ƒä»»ä½•ç›®å½•ï¼Œåªè¦è¯¥ç›®å½•è¢«åŒ…å«åˆ°ç±»è·¯å¾„ä¸­å³å¯ï¼‰ä¸­å®šä½è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶è¯»å…¥è¿™ä¸ªæ–‡ä»¶å®Œæˆçš„é…ç½®ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶å‘Š è¯‰Log4Jä»¥ä»€ä¹ˆæ ·çš„æ ¼å¼ã€æŠŠä»€ä¹ˆæ ·çš„ä¿¡æ¯ã€è¾“å‡ºåˆ°ä»€ä¹ˆåœ°æ–¹ã€‚ 123456789101112 Log4jæœ‰ä¸‰ä¸ªä¸»è¦çš„ç»„ä»¶ï¼šLoggers(è®°å½•å™¨)ï¼ŒAppenders(è¾“å‡ºæº)å’ŒLayouts(å¸ƒå±€)ï¼Œè¿™é‡Œå¯ç®€å•ç†è§£ä¸ºæ—¥å¿—ç±»åˆ«ï¼Œæ—¥å¿—è¦è¾“å‡ºçš„åœ°æ–¹å’Œæ—¥å¿—ä»¥ä½•ç§å½¢å¼è¾“å‡ºã€‚ç»¼åˆä½¿ç”¨è¿™ä¸‰ä¸ªç»„ä»¶å¯ä»¥è½»æ¾çš„è®°å½•ä¿¡æ¯çš„ç±»å‹å’Œçº§åˆ«ï¼Œå¹¶å¯ä»¥åœ¨è¿è¡Œæ—¶æ§åˆ¶æ—¥å¿—è¾“å‡ºçš„æ ·å¼å’Œä½ç½®ã€‚ä¸‹é¢å¯¹ä¸‰ä¸ªç»„ä»¶åˆ†åˆ«è¿›è¡Œè¯´æ˜ï¼š 1ã€ Loggers Loggersç»„ä»¶åœ¨æ­¤ç³»ç»Ÿä¸­è¢«åˆ†ä¸ºäº”ä¸ªçº§åˆ«ï¼šDEBUGã€INFOã€WARNã€ERRORå’ŒFATALã€‚è¿™äº”ä¸ªçº§åˆ«æ˜¯æœ‰é¡ºåºçš„ï¼ŒDEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATALï¼Œåˆ†åˆ«ç”¨æ¥æŒ‡å®šè¿™æ¡æ—¥å¿—ä¿¡æ¯çš„é‡è¦ç¨‹åº¦,æ˜ç™½è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œè¿™é‡ŒLog4jæœ‰ä¸€ä¸ªè§„åˆ™ï¼šå‡è®¾Loggersçº§åˆ«ä¸ºPï¼Œå¦‚æœåœ¨Loggersä¸­å‘ç”Ÿäº†ä¸€ä¸ªçº§åˆ«Qæ¯”Pé«˜ï¼Œåˆ™å¯ä»¥å¯åŠ¨ï¼Œå¦åˆ™å±è”½æ‰ã€‚ å‡è®¾ä½ å®šä¹‰çš„çº§åˆ«æ˜¯infoï¼Œé‚£ä¹ˆerrorå’Œwarnçš„æ—¥å¿—å¯ä»¥æ˜¾ç¤ºè€Œæ¯”ä»–ä½çš„debugä¿¡æ¯å°±ä¸æ˜¾ç¤ºäº†ã€‚ Javaç¨‹åºä¸¾ä¾‹æ¥è¯´ï¼š //å»ºç«‹Loggerçš„ä¸€ä¸ªå®ä¾‹ï¼Œå‘½åä¸ºâ€œcom.fooâ€ Logger logger = Logger.getLogger(â€œcom.fooâ€); //â€com.fooâ€æ˜¯å®ä¾‹è¿›è¡Œå‘½åï¼Œä¹Ÿå¯ä»¥ä»»æ„ //è®¾ç½®loggerçš„çº§åˆ«ã€‚é€šå¸¸ä¸åœ¨ç¨‹åºä¸­è®¾ç½®loggerçš„çº§åˆ«ã€‚ä¸€èˆ¬åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ã€‚ logger.setLevel(Level.INFO); Logger barlogger = Logger.getLogger(â€œcom.foo.Barâ€); //ä¸‹é¢è¿™ä¸ªè¯·æ±‚å¯ç”¨ï¼Œå› ä¸ºWARN &gt;= INFO logger.warn(â€œLow fuel level.â€); //ä¸‹é¢è¿™ä¸ªè¯·æ±‚ä¸å¯ç”¨ï¼Œå› ä¸ºDEBUG &lt; INFO logger.debug(â€œStarting search for nearest gas station.â€); //å‘½åä¸ºâ€œcom.foo.barâ€çš„å®ä¾‹barloggerä¼šç»§æ‰¿å®ä¾‹â€œcom.fooâ€çš„çº§åˆ«ã€‚å› æ­¤ï¼Œä¸‹é¢è¿™ä¸ªè¯·æ±‚å¯ç”¨ï¼Œå› ä¸ºINFO &gt;= INFO barlogger.info(â€œLocated nearest gas station.â€); //ä¸‹é¢è¿™ä¸ªè¯·æ±‚ä¸å¯ç”¨ï¼Œå› ä¸ºDEBUG &lt; INFO barlogger.debug(â€œExiting gas station searchâ€); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137 è¿™é‡Œâ€œæ˜¯å¦å¯ç”¨â€çš„æ„æ€æ˜¯èƒ½å¦è¾“å‡ºLoggerä¿¡æ¯ã€‚ åœ¨å¯¹Loggerå®ä¾‹è¿›è¡Œå‘½åæ—¶ï¼Œæ²¡æœ‰é™åˆ¶ï¼Œå¯ä»¥å–ä»»æ„è‡ªå·±æ„Ÿå…´è¶£çš„åå­—ã€‚ä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®ä»¥ç±»çš„æ‰€åœ¨ä½ç½®æ¥å‘½åLoggerå®ä¾‹ï¼Œè¿™æ˜¯ç›®å‰æ¥è®²æ¯”è¾ƒæœ‰æ•ˆçš„Loggerå‘½åæ–¹å¼ã€‚è¿™æ ·å¯ä»¥ä½¿å¾—æ¯ä¸ªç±»å»ºç«‹è‡ªå·±çš„æ—¥å¿—ä¿¡æ¯ï¼Œä¾¿äºç®¡ç†ã€‚æ¯”å¦‚ï¼š static Logger logger = Logger.getLogger(ClientWithLog4j.class.getName()); 2ã€Appenders ç¦ç”¨ä¸ä½¿ç”¨æ—¥å¿—è¯·æ±‚åªæ˜¯Log4jå…¶ä¸­çš„ä¸€ä¸ªå°å°çš„åœ°æ–¹ï¼ŒLog4jæ—¥å¿—ç³»ç»Ÿå…è®¸æŠŠæ—¥å¿—è¾“å‡ºåˆ°ä¸åŒçš„åœ°æ–¹ï¼Œå¦‚æ§åˆ¶å°ï¼ˆConsoleï¼‰ã€æ–‡ä»¶ï¼ˆFilesï¼‰ã€æ ¹æ®å¤©æ•°æˆ–è€…æ–‡ä»¶å¤§å°äº§ç”Ÿæ–°çš„æ–‡ä»¶ã€ä»¥æµçš„å½¢å¼å‘é€åˆ°å…¶å®ƒåœ°æ–¹ç­‰ç­‰ã€‚ å…¶è¯­æ³•è¡¨ç¤ºä¸ºï¼š org.apache.log4j.ConsoleAppenderï¼ˆæ§åˆ¶å°ï¼‰ org.apache.log4j.FileAppenderï¼ˆæ–‡ä»¶ï¼‰ org.apache.log4j.DailyRollingFileAppenderï¼ˆæ¯å¤©äº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼‰ org.apache.log4j.RollingFileAppenderï¼ˆæ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼‰ org.apache.log4j.WriterAppenderï¼ˆå°†æ—¥å¿—ä¿¡æ¯ä»¥æµæ ¼å¼å‘é€åˆ°ä»»æ„æŒ‡å®šçš„åœ°æ–¹ï¼‰ é…ç½®æ—¶ä½¿ç”¨æ–¹å¼ä¸ºï¼š log4j.appender.appenderName = fully.qualified.name.of.appender.class log4j.appender.appenderName.option1 = value1 â€¦ log4j.appender.appenderName.option = valueN è¿™æ ·å°±ä¸ºæ—¥å¿—çš„è¾“å‡ºæä¾›äº†ç›¸å½“å¤§çš„ä¾¿åˆ©ã€‚ 3ã€Layouts æœ‰æ—¶ç”¨æˆ·å¸Œæœ›æ ¹æ®è‡ªå·±çš„å–œå¥½æ ¼å¼åŒ–è‡ªå·±çš„æ—¥å¿—è¾“å‡ºã€‚Log4jå¯ä»¥åœ¨Appendersçš„åé¢é™„åŠ Layoutsæ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚Layoutsæä¾›äº† å››ç§æ—¥å¿—è¾“å‡ºæ ·å¼ï¼Œå¦‚æ ¹æ®HTMLæ ·å¼ã€è‡ªç”±æŒ‡å®šæ ·å¼ã€åŒ…å«æ—¥å¿—çº§åˆ«ä¸ä¿¡æ¯çš„æ ·å¼å’ŒåŒ…å«æ—¥å¿—æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ä¿¡æ¯çš„æ ·å¼ç­‰ç­‰ã€‚ å…¶è¯­æ³•è¡¨ç¤ºä¸ºï¼š org.apache.log4j.HTMLLayoutï¼ˆä»¥HTMLè¡¨æ ¼å½¢å¼å¸ƒå±€ï¼‰ï¼Œ org.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼‰ï¼Œ org.apache.log4j.SimpleLayoutï¼ˆåŒ…å«æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«å’Œä¿¡æ¯å­—ç¬¦ä¸²ï¼‰ï¼Œ org.apache.log4j.TTCCLayoutï¼ˆåŒ…å«æ—¥å¿—äº§ç”Ÿçš„æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ç­‰ä¿¡æ¯ï¼‰ é…ç½®æ—¶ä½¿ç”¨æ–¹å¼ä¸ºï¼š log4j.appender.appenderName.layout =fully.qualified.name.of.layout.class log4j.appender.appenderName.layout.option1 = value1 â€¦ log4j.appender.appenderName.layout.option = valueN&gt; &gt; &gt; &gt; 4 . Log4jçš„é…ç½® &lt;&lt;&lt;&lt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ä»¥ä¸Šæ˜¯ä»åŸç†æ–¹é¢è¯´æ˜Log4jçš„ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨å…·ä½“Javaç¼–ç¨‹ä½¿ç”¨Log4jå¯ä»¥å‚ç…§ä»¥ä¸‹ç¤ºä¾‹ï¼š &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 1ã€ å»ºç«‹Loggerå®ä¾‹ï¼š &gt; &gt; &gt; &gt; è¯­æ³•è¡¨ç¤ºï¼špublic static Logger getLogger( String name) &gt; &gt; &gt; &gt; å®é™…ä½¿ç”¨ï¼šstatic Logger logger = Logger.getLogger(ServerWithLog4j.class.getName ()) ; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2ã€ è¯»å–é…ç½®æ–‡ä»¶ï¼š &gt; &gt; &gt; &gt; è·å¾—äº†Loggerçš„å®ä¾‹ä¹‹åï¼Œæ¥ä¸‹æ¥å°†é…ç½®Log4jä½¿ç”¨ç¯å¢ƒï¼š &gt; &gt; &gt; &gt; è¯­æ³•è¡¨ç¤ºï¼š &gt; &gt; &gt; &gt; BasicConfigurator.configure()ï¼šè‡ªåŠ¨å¿«é€Ÿåœ°ä½¿ç”¨ç¼ºçœLog4jç¯å¢ƒã€‚ &gt; &gt; &gt; &gt; PropertyConfigurator.configure(String configFilename)ï¼šè¯»å–ä½¿ç”¨Javaçš„ç‰¹æ€§æ–‡ä»¶ç¼–å†™çš„é…ç½®æ–‡ä»¶ã€‚ &gt; &gt; &gt; &gt; DOMConfigurator.configure(String filename)ï¼šè¯»å–XMLå½¢å¼çš„é…ç½®æ–‡ä»¶ã€‚ &gt; &gt; &gt; &gt; å®é™…ä½¿ç”¨ï¼š &gt; &gt; &gt; &gt; PropertyConfigurator.configure(â€œServerWithLog4j.propertiesâ€); &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 3ã€ æ’å…¥æ—¥å¿—ä¿¡æ¯ &gt; &gt; &gt; &gt; å®Œæˆäº†ä»¥ä¸Šè¿ä¸ªæ­¥éª¤ä»¥åï¼Œä¸‹é¢å°±å¯ä»¥æŒ‰æ—¥å¿—çš„ä¸åŒçº§åˆ«æ’å…¥åˆ°ä½ è¦è®°å½•æ—¥å¿—çš„ä»»ä½•åœ°æ–¹äº†ã€‚ &gt; &gt; &gt; &gt; è¯­æ³•è¡¨ç¤ºï¼š &gt; &gt; &gt; &gt; Logger.debug(Object message);//è°ƒè¯•ä¿¡æ¯ &gt; &gt; &gt; &gt; Logger.info(Object message);//ä¸€èˆ¬ä¿¡æ¯ &gt; &gt; &gt; &gt; Logger.warn(Object message);//è­¦å‘Šä¿¡æ¯ &gt; &gt; &gt; &gt; Logger.error(Object message);//é”™è¯¯ä¿¡æ¯ &gt; &gt; &gt; &gt; Logger.fatal(Object message);//è‡´å‘½é”™è¯¯ä¿¡æ¯ å®é™…ä½¿ç”¨ï¼šlogger.info(â€œServerSocket before accept: â€ + server); &gt;&gt;&gt;&gt; 5. é…ç½®è¿‡ç¨‹ &lt;&lt;&lt;&lt; åœ¨å®é™…ç¼–ç¨‹æ—¶ï¼Œè¦ä½¿Log4jçœŸæ­£åœ¨ç³»ç»Ÿä¸­è¿è¡Œäº‹å…ˆè¿˜è¦å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œå®šä¹‰ã€‚å®šä¹‰æ­¥éª¤å°±æ˜¯å¯¹Loggerã€AppenderåŠLayoutçš„åˆ†åˆ«ä½¿ç”¨ã€‚ Log4jæ”¯æŒä¸¤ç§é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œä¸€ç§æ˜¯XMLæ ¼å¼çš„æ–‡ä»¶ï¼Œä¸€ç§æ˜¯java propertiesï¼ˆkey=valueï¼‰ã€Javaç‰¹æ€§æ–‡ä»¶ï¼ˆé”®=å€¼ï¼‰ã€‘ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä½¿ç”¨Javaç‰¹æ€§æ–‡ä»¶åšä¸ºé…ç½®æ–‡ä»¶çš„æ–¹æ³• å…·ä½“å¦‚ä¸‹ï¼š 1ã€é…ç½®æ ¹Loggerï¼Œå…¶è¯­æ³•ä¸ºï¼š log4j.rootLogger = \\[ level \\] , appenderName1, appenderName2, â€¦ level : æ˜¯æ—¥å¿—è®°å½•çš„ä¼˜å…ˆçº§ï¼Œåˆ†ä¸ºOFFã€FATALã€ERRORã€WARNã€INFOã€DEBUGã€ALLæˆ–è€…æ‚¨å®šä¹‰çš„çº§åˆ«ã€‚Log4jå»ºè®®åªä½¿ç”¨å››ä¸ªçº§åˆ«ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ERRORã€WARNã€INFOã€DEBUGã€‚é€šè¿‡åœ¨è¿™é‡Œå®šä¹‰çš„çº§åˆ«ï¼Œæ‚¨å¯ä»¥æ§åˆ¶åˆ°åº”ç”¨ç¨‹åºä¸­ç›¸åº”çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯çš„å¼€å…³ã€‚æ¯”å¦‚åœ¨è¿™é‡Œå®š ä¹‰äº†INFOçº§åˆ«ï¼Œåˆ™åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰DEBUGçº§åˆ«çš„æ—¥å¿—ä¿¡æ¯å°†ä¸è¢«æ‰“å°å‡ºæ¥ã€‚ appenderName:å°±æ˜¯æŒ‡å®šæ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°å“ªä¸ªåœ°æ–¹ã€‚æ‚¨å¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ªè¾“å‡ºç›®çš„åœ°ã€‚ ä¾‹å¦‚ï¼šlog4j.rootLoggerï¼info,A1,B2,C3 2ã€é…ç½®æ—¥å¿—ä¿¡æ¯è¾“å‡ºç›®çš„åœ°ï¼Œå…¶è¯­æ³•ä¸ºï¼š log4j.appender.appenderName = fully.qualified.name.of.appender.class // â€œfully.qualified.name.of.appender.classâ€ å¯ä»¥æŒ‡å®šä¸‹é¢äº”ä¸ªç›®çš„åœ°ä¸­çš„ä¸€ä¸ªï¼š 1.org.apache.log4j.ConsoleAppenderï¼ˆæ§åˆ¶å°ï¼‰ 2.org.apache.log4j.FileAppenderï¼ˆæ–‡ä»¶ï¼‰ 3.org.apache.log4j.DailyRollingFileAppenderï¼ˆæ¯å¤©äº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼‰ 4.org.apache.log4j.RollingFileAppenderï¼ˆæ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼‰ 5.org.apache.log4j.WriterAppenderï¼ˆå°†æ—¥å¿—ä¿¡æ¯ä»¥æµæ ¼å¼å‘é€åˆ°ä»»æ„æŒ‡å®šçš„åœ°æ–¹ï¼‰ 1.ConsoleAppenderé€‰é¡¹ Threshold=WARN:æŒ‡å®šæ—¥å¿—æ¶ˆæ¯çš„è¾“å‡ºæœ€ä½å±‚æ¬¡ã€‚ ImmediateFlush=true:é»˜è®¤å€¼æ˜¯true,æ„è°“ç€æ‰€æœ‰çš„æ¶ˆæ¯éƒ½ä¼šè¢«ç«‹å³è¾“å‡ºã€‚ Target=System.errï¼šé»˜è®¤æƒ…å†µä¸‹æ˜¯ï¼šSystem.out,æŒ‡å®šè¾“å‡ºæ§åˆ¶å° 2.FileAppender é€‰é¡¹ Threshold=WARN:æŒ‡å®šæ—¥å¿—æ¶ˆæ¯çš„è¾“å‡ºæœ€ä½å±‚æ¬¡ã€‚ ImmediateFlush=true:é»˜è®¤å€¼æ˜¯true,æ„è°“ç€æ‰€æœ‰çš„æ¶ˆæ¯éƒ½ä¼šè¢«ç«‹å³è¾“å‡ºã€‚ File=mylog.txt:æŒ‡å®šæ¶ˆæ¯è¾“å‡ºåˆ°mylog.txtæ–‡ä»¶ã€‚ Append=false:é»˜è®¤å€¼æ˜¯true,å³å°†æ¶ˆæ¯å¢åŠ åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼ŒfalseæŒ‡å°†æ¶ˆæ¯è¦†ç›–æŒ‡å®šçš„æ–‡ä»¶å†…å®¹ã€‚ 3.DailyRollingFileAppender é€‰é¡¹ Threshold=WARN:æŒ‡å®šæ—¥å¿—æ¶ˆæ¯çš„è¾“å‡ºæœ€ä½å±‚æ¬¡ã€‚ ImmediateFlush=true:é»˜è®¤å€¼æ˜¯true,æ„è°“ç€æ‰€æœ‰çš„æ¶ˆæ¯éƒ½ä¼šè¢«ç«‹å³è¾“å‡ºã€‚ File=mylog.txt:æŒ‡å®šæ¶ˆæ¯è¾“å‡ºåˆ°mylog.txtæ–‡ä»¶ã€‚ Append=false:é»˜è®¤å€¼æ˜¯true,å³å°†æ¶ˆæ¯å¢åŠ åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼ŒfalseæŒ‡å°†æ¶ˆæ¯è¦†ç›–æŒ‡å®šçš„æ–‡ä»¶å†…å®¹ã€‚ DatePattern=â€™.â€™yyyy-ww:æ¯å‘¨æ»šåŠ¨ä¸€æ¬¡æ–‡ä»¶ï¼Œå³æ¯å‘¨äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šæŒ‰æœˆã€å‘¨ã€å¤©ã€æ—¶å’Œåˆ†ã€‚å³å¯¹åº”çš„æ ¼å¼å¦‚ä¸‹ï¼š 1)â€™.â€™yyyy-MM: æ¯æœˆ 2)â€™.â€™yyyy-ww: æ¯å‘¨ 3)â€™.â€™yyyy-MM-dd: æ¯å¤© 4)â€™.â€™yyyy-MM-dd-a: æ¯å¤©ä¸¤æ¬¡ 5)â€™.â€™yyyy-MM-dd-HH: æ¯å°æ—¶ 6)â€™.â€™yyyy-MM-dd-HH-mm: æ¯åˆ†é’Ÿ 4.RollingFileAppender é€‰é¡¹ Threshold=WARN:æŒ‡å®šæ—¥å¿—æ¶ˆæ¯çš„è¾“å‡ºæœ€ä½å±‚æ¬¡ã€‚ ImmediateFlush=true:é»˜è®¤å€¼æ˜¯true,æ„è°“ç€æ‰€æœ‰çš„æ¶ˆæ¯éƒ½ä¼šè¢«ç«‹å³è¾“å‡ºã€‚ File=mylog.txt:æŒ‡å®šæ¶ˆæ¯è¾“å‡ºåˆ°mylog.txtæ–‡ä»¶ã€‚ Append=false:é»˜è®¤å€¼æ˜¯true,å³å°†æ¶ˆæ¯å¢åŠ åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼ŒfalseæŒ‡å°†æ¶ˆæ¯è¦†ç›–æŒ‡å®šçš„æ–‡ä»¶å†…å®¹ã€‚ MaxFileSize=100KB: åç¼€å¯ä»¥æ˜¯KB, MB æˆ–è€…æ˜¯ GB. åœ¨æ—¥å¿—æ–‡ä»¶åˆ°è¾¾è¯¥å¤§å°æ—¶ï¼Œå°†ä¼šè‡ªåŠ¨æ»šåŠ¨ï¼Œå³å°†åŸæ¥çš„å†…å®¹ç§»åˆ°mylog.log.1æ–‡ä»¶ã€‚ MaxBackupIndex=2:æŒ‡å®šå¯ä»¥äº§ç”Ÿçš„æ»šåŠ¨æ–‡ä»¶çš„æœ€å¤§æ•°ã€‚å®é™…åº”ç”¨ï¼š log4j.appender.A1=org.apache.log4j.ConsoleAppender //è¿™é‡ŒæŒ‡å®šäº†æ—¥å¿—è¾“å‡ºçš„ç¬¬ä¸€ä¸ªä½ç½®A1æ˜¯æ§åˆ¶å°ConsoleAppender 3ã€é…ç½®æ—¥å¿—ä¿¡æ¯çš„æ ¼å¼ï¼Œå…¶è¯­æ³•ä¸ºï¼š A. log4j.appender.appenderName.layout = fully.qualified.name.of.layout.class â€œfully.qualified.name.of.layout.classâ€ å¯ä»¥æŒ‡å®šä¸‹é¢4ä¸ªæ ¼å¼ä¸­çš„ä¸€ä¸ªï¼š 1.org.apache.log4j.HTMLLayoutï¼ˆä»¥HTMLè¡¨æ ¼å½¢å¼å¸ƒå±€ï¼‰ï¼Œ 2.org.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼‰ï¼Œ 3.org.apache.log4j.SimpleLayoutï¼ˆåŒ…å«æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«å’Œä¿¡æ¯å­—ç¬¦ä¸²ï¼‰ï¼Œ 4.org.apache.log4j.TTCCLayoutï¼ˆåŒ…å«æ—¥å¿—äº§ç”Ÿçš„æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ç­‰ä¿¡æ¯ï¼‰ 1.HTMLLayout é€‰é¡¹ LocationInfo=true:é»˜è®¤å€¼æ˜¯false,è¾“å‡ºjavaæ–‡ä»¶åç§°å’Œè¡Œå· Title=my app file: é»˜è®¤å€¼æ˜¯ Log4J Log Messages. 2.PatternLayout é€‰é¡¹ ConversionPattern=%m%n :æŒ‡å®šæ€æ ·æ ¼å¼åŒ–æŒ‡å®šçš„æ¶ˆæ¯ã€‚ 3.XMLLayout é€‰é¡¹ LocationInfo=true:é»˜è®¤å€¼æ˜¯false,è¾“å‡ºjavaæ–‡ä»¶å’Œè¡Œå· å®é™…åº”ç”¨ï¼š log4j.appender.A1.layout=org.apache.log4j.PatternLayout B. log4j.appender.A1.layout.ConversionPattern=%-4r %-5p %d{yyyy-MM-dd HH:mm:ssS} %c %m%n è¿™é‡Œéœ€è¦è¯´æ˜çš„å°±æ˜¯æ—¥å¿—ä¿¡æ¯æ ¼å¼ä¸­å‡ ä¸ªç¬¦å·æ‰€ä»£è¡¨çš„å«ä¹‰ï¼š 123456789101112131415161718192021222324252627282930313233 ï¼Xå·: Xä¿¡æ¯è¾“å‡ºæ—¶å·¦å¯¹é½ï¼› %p: è¾“å‡ºæ—¥å¿—ä¿¡æ¯ä¼˜å…ˆçº§ï¼Œå³DEBUGï¼ŒINFOï¼ŒWARNï¼ŒERRORï¼ŒFATAL, %d: è¾“å‡ºæ—¥å¿—æ—¶é—´ç‚¹çš„æ—¥æœŸæˆ–æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼ä¸ºISO8601ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶åæŒ‡å®šæ ¼å¼ï¼Œæ¯”å¦‚ï¼š%d&#123;yyy MMM dd HH:mm:ss,SSS&#125;ï¼Œè¾“å‡ºç±»ä¼¼ï¼š2002å¹´10æœˆ18æ—¥ 22ï¼š10ï¼š28ï¼Œ921 %r: è¾“å‡ºè‡ªåº”ç”¨å¯åŠ¨åˆ°è¾“å‡ºè¯¥logä¿¡æ¯è€—è´¹çš„æ¯«ç§’æ•° %c: è¾“å‡ºæ—¥å¿—ä¿¡æ¯æ‰€å±çš„ç±»ç›®ï¼Œé€šå¸¸å°±æ˜¯æ‰€åœ¨ç±»çš„å…¨å %t: è¾“å‡ºäº§ç”Ÿè¯¥æ—¥å¿—äº‹ä»¶çš„çº¿ç¨‹å %l: è¾“å‡ºæ—¥å¿—äº‹ä»¶çš„å‘ç”Ÿä½ç½®ï¼Œç›¸å½“äº%C.%M(%F:%L)çš„ç»„åˆ,åŒ…æ‹¬ç±»ç›®åã€å‘ç”Ÿçš„çº¿ç¨‹ï¼Œä»¥åŠåœ¨ä»£ç ä¸­çš„è¡Œæ•°ã€‚ä¸¾ä¾‹ï¼šTestlog4.main(TestLog4.java:10) %x: è¾“å‡ºå’Œå½“å‰çº¿ç¨‹ç›¸å…³è”çš„NDC(åµŒå¥—è¯Šæ–­ç¯å¢ƒ),å°¤å…¶ç”¨åˆ°åƒjava servletsè¿™æ ·çš„å¤šå®¢æˆ·å¤šçº¿ç¨‹çš„åº”ç”¨ä¸­ã€‚ %%: è¾“å‡ºä¸€ä¸ªâ€%â€å­—ç¬¦ %F: è¾“å‡ºæ—¥å¿—æ¶ˆæ¯äº§ç”Ÿæ—¶æ‰€åœ¨çš„æ–‡ä»¶åç§° %L: è¾“å‡ºä»£ç ä¸­çš„è¡Œå· %m: è¾“å‡ºä»£ç ä¸­æŒ‡å®šçš„æ¶ˆæ¯,äº§ç”Ÿçš„æ—¥å¿—å…·ä½“ä¿¡æ¯ %n: è¾“å‡ºä¸€ä¸ªå›è½¦æ¢è¡Œç¬¦ï¼ŒWindowså¹³å°ä¸ºâ€\\\\r\\\\nâ€ï¼ŒUnixå¹³å°ä¸ºâ€\\\\nâ€è¾“å‡ºæ—¥å¿—ä¿¡æ¯æ¢è¡Œ å¯ä»¥åœ¨%ä¸æ¨¡å¼å­—ç¬¦ä¹‹é—´åŠ ä¸Šä¿®é¥°ç¬¦æ¥æ§åˆ¶å…¶æœ€å°å®½åº¦ã€æœ€å¤§å®½åº¦ã€å’Œæ–‡æœ¬çš„å¯¹é½æ–¹å¼ã€‚å¦‚ï¼š 1)%20cï¼šæŒ‡å®šè¾“å‡ºcategoryçš„åç§°ï¼Œæœ€å°çš„å®½åº¦æ˜¯20ï¼Œå¦‚æœcategoryçš„åç§°å°äº20çš„è¯ï¼Œé»˜è®¤çš„æƒ…å†µä¸‹å³å¯¹é½ã€‚ 2)%-20c:æŒ‡å®šè¾“å‡ºcategoryçš„åç§°ï¼Œæœ€å°çš„å®½åº¦æ˜¯20ï¼Œå¦‚æœcategoryçš„åç§°å°äº20çš„è¯ï¼Œâ€-â€œå·æŒ‡å®šå·¦å¯¹é½ã€‚ 3)%.30c:æŒ‡å®šè¾“å‡ºcategoryçš„åç§°ï¼Œæœ€å¤§çš„å®½åº¦æ˜¯30ï¼Œå¦‚æœcategoryçš„åç§°å¤§äº30çš„è¯ï¼Œå°±ä¼šå°†å·¦è¾¹å¤šå‡ºçš„å­—ç¬¦æˆªæ‰ï¼Œä½†å°äº30çš„è¯ä¹Ÿä¸ä¼šæœ‰ç©ºæ ¼ã€‚ 4)%20.30c:å¦‚æœcategoryçš„åç§°å°äº20å°±è¡¥ç©ºæ ¼ï¼Œå¹¶ä¸”å³å¯¹é½ï¼Œå¦‚æœå…¶åç§°é•¿äº30å­—ç¬¦ï¼Œå°±ä»å·¦è¾¹äº¤è¿œé”€å‡ºçš„å­—ç¬¦æˆªæ‰ã€‚ è¿™é‡Œä¸Šé¢ä¸‰ä¸ªæ­¥éª¤æ˜¯å¯¹å‰é¢Log4jç»„ä»¶è¯´æ˜çš„ä¸€ä¸ªç®€åŒ–ï¼›ä¸‹é¢ç»™å‡ºä¸€ä¸ªå…·ä½“é…ç½®ä¾‹å­ï¼Œåœ¨ç¨‹åºä¸­å¯ä»¥å‚ç…§æ‰§è¡Œï¼š log4j.rootLogger=INFO,A1ï¼ŒB2 log4j.appender.A1=org.apache.log4j.ConsoleAppender log4j.appender.A1.layout=org.apache.log4j.PatternLayout log4j.appender.A1.layout.ConversionPattern=%-4r %-5p %d&#123;yyyy-MM-dd HH:mm:ssS&#125; %c %m%n æ ¹æ®ä¸Šé¢çš„æ—¥å¿—æ ¼å¼ï¼ŒæŸä¸€ä¸ªç¨‹åºçš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š 0 INFO 2003-06-13 13:23:46968 ClientWithLog4j Client socket: Socket\\[addr=localhost/127.0.0.1,port=8002,localport=2014\\] 16 DEBUG 2003-06-13 13:23:46984 ClientWithLog4j Server says: â€˜Java server with log4j, Fri Jun 13 13:23:46 CST 2003â€™ 16 DEBUG 2003-06-13 13:23:46984 ClientWithLog4j GOOD 16 DEBUG 2003-06-13 13:23:46984 ClientWithLog4j Server responds: â€˜Command â€˜HELLOâ€™ not understood.â€™ 16 DEBUG 2003-06-13 13:23:46984 ClientWithLog4j HELP 16 DEBUG 2003-06-13 13:23:46984 ClientWithLog4j Server responds: â€˜Vocabulary: HELP QUITâ€™ 16 DEBUG 2003-06-13 13:23:46984 ClientWithLog4j QUIT å½“è¾“å‡ºä¿¡æ¯äºå›æ»šæ–‡ä»¶æ—¶ log4j.appender.ROLLING_FILE=org.apache.log4j.RollingFileAppender //æŒ‡å®šä»¥æ–‡ä»¶çš„æ–¹å¼è¾“å‡ºæ—¥å¿— log4j.appender.ROLLING_FILE.Threshold=ERROR log4j.appender.ROLLING_FILE.File=rolling.log //æ–‡ä»¶ä½ç½®,ä¹Ÿå¯ä»¥ç”¨å˜é‡${java.home}ã€rolling.log log4j.appender.ROLLING_FILE.Append=true log4j.appender.ROLLING_FILE.MaxFileSize=10KB //æ–‡ä»¶æœ€å¤§å°ºå¯¸ log4j.appender.ROLLING_FILE.MaxBackupIndex=1 //å¤‡ä»½æ•° log4j.appender.ROLLING_FILE.layout=org.apache.log4j.PatternLayout log4j.appender.ROLLING_FILE.layout.ConversionPattern=[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—&gt; &gt; &gt; &gt; 1. Log4jæ¯”è¾ƒå…¨é¢çš„é…ç½® &lt;&lt;&lt;&lt;LOG4Jçš„é…ç½®ä¹‹ç®€å•ä½¿å®ƒéåŠäºè¶Šæ¥è¶Šå¤šçš„åº”ç”¨ä¸­äº†ï¼šLog4Jé…ç½®æ–‡ä»¶å®ç°äº†è¾“å‡ºåˆ°æ§åˆ¶å°ã€æ–‡ä»¶ã€å›æ»šæ–‡ä»¶ã€å‘é€æ—¥å¿—é‚®ä»¶ã€è¾“å‡ºåˆ°æ•°æ®åº“æ—¥å¿—è¡¨ã€è‡ªå®šä¹‰æ ‡ç­¾ç­‰å…¨å¥—åŠŸèƒ½ã€‚æ‹©å…¶ä¸€äºŒä½¿ç”¨å°±å¤Ÿç”¨äº†ï¼Œlog4j.rootLogger=DEBUG,CONSOLE,A1,im log4j.addivity.org.apache=true\\# åº”ç”¨äºæ§åˆ¶å°log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender log4j.appender.Threshold=DEBUG log4j.appender.CONSOLE.Target=System.out log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout log4j.appender.CONSOLE.layout.ConversionPattern=\\[framework\\] %d - %c -%-4r \\[%t\\] %-5p %c %x - %m%n #log4j.appender.CONSOLE.layout.ConversionPattern=\\[start\\]%d&#123;DATE&#125;\\[DATE\\]%n%p\\[PRIORITY\\]%n%x\\[NDC\\]%n%t\\[THREAD\\] n%c\\[CATEGORY\\]%n%m\\[MESSAGE\\]%n%n#åº”ç”¨äºæ–‡ä»¶log4j.appender.FILE=org.apache.log4j.FileAppender log4j.appender.FILE.File=file.log log4j.appender.FILE.Append=false log4j.appender.FILE.layout=org.apache.log4j.PatternLayout log4j.appender.FILE.layout.ConversionPattern=\\[framework\\] %d - %c -%-4r \\[%t\\] %-5p %c %x - %m%n \\# Use this layout for LogFactor 5 analysis\\# åº”ç”¨äºæ–‡ä»¶å›æ»šlog4j.appender.ROLLING\\_FILE=org.apache.log4j.RollingFileAppender log4j.appender.ROLLING\\_FILE.Threshold=ERROR log4j.appender.ROLLING\\_FILE.File=rolling.log //æ–‡ä»¶ä½ç½®,ä¹Ÿå¯ä»¥ç”¨å˜é‡$&#123;java.home&#125;ã€rolling.log log4j.appender.ROLLING\\_FILE.Append=true //true:æ·»åŠ  false:è¦†ç›– log4j.appender.ROLLING\\_FILE.MaxFileSize=10KB //æ–‡ä»¶æœ€å¤§å°ºå¯¸ log4j.appender.ROLLING\\_FILE.MaxBackupIndex=1 //å¤‡ä»½æ•° log4j.appender.ROLLING\\_FILE.layout=org.apache.log4j.PatternLayout log4j.appender.ROLLING\\_FILE.layout.ConversionPattern=\\[framework\\] %d - %c -%-4r \\[%t\\] %-5p %c %x - %m%n#åº”ç”¨äºsocket log4j.appender.SOCKET=org.apache.log4j.RollingFileAppender log4j.appender.SOCKET.RemoteHost=localhost log4j.appender.SOCKET.Port=5001 log4j.appender.SOCKET.LocationInfo=true \\# Set up for Log Facter 5 log4j.appender.SOCKET.layout=org.apache.log4j.PatternLayout log4j.appender.SOCET.layout.ConversionPattern=\\[start\\]%d&#123;DATE&#125;\\[DATE\\]%n%p\\[PRIORITY\\]%n%x\\[NDC\\]%n%t\\[THREAD\\]%n%c\\[CATEGORY\\]%n%m\\[MESSAGE\\]%n%n\\# Log Factor 5 Appender log4j.appender.LF5\\_APPENDER=org.apache.log4j.lf5.LF5Appender log4j.appender.LF5\\_APPENDER.MaxNumberOfRecords=2000\\# å‘é€æ—¥å¿—ç»™é‚®ä»¶log4j.appender.MAIL=org.apache.log4j.net.SMTPAppender log4j.appender.MAIL.Threshold=FATAL log4j.appender.MAIL.BufferSize=10 log4j.appender.MAIL.From=web@www.wuset.com log4j.appender.MAIL.SMTPHost=www.wusetu.com log4j.appender.MAIL.Subject=Log4J Message log4j.appender.MAIL.To=web@www.wusetu.com log4j.appender.MAIL.layout=org.apache.log4j.PatternLayout log4j.appender.MAIL.layout.ConversionPattern=\\[framework\\] %d - %c -%-4r \\[%t\\] %-5p %c %x - %m%n\\# ç”¨äºæ•°æ®åº“ log4j.appender.DATABASE=org.apache.log4j.jdbc.JDBCAppender log4j.appender.DATABASE.URL=jdbc:mysql://localhost:3306/test log4j.appender.DATABASE.driver=com.mysql.jdbc.Driver log4j.appender.DATABASE.user=root log4j.appender.DATABASE.password= log4j.appender.DATABASE.sql=INSERT INTO LOG4J (Message) VALUES (â€˜\\[framework\\] %d - %c -%-4r \\[%t\\] %-5p %c %x - %m%nâ€™) log4j.appender.DATABASE.layout=org.apache.log4j.PatternLayout log4j.appender.DATABASE.layout.ConversionPattern=\\[framework\\] %d - %c -%-4r \\[%t\\] %-5p %c %x - %m%nlog4j.appender.A1=org.apache.log4j.DailyRollingFileAppender log4j.appender.A1.File=SampleMessages.log4j log4j.appender.A1.DatePattern=yyyyMMdd-HHâ€™.log4jâ€™ log4j.appender.A1.layout=org.apache.log4j.xml.XMLLayout#è‡ªå®šä¹‰Appenderlog4j.appender.im = net.cybercorlin.util.logger.appender.IMAppenderlog4j.appender.im.host = mail.cybercorlin.net log4j.appender.im.username = username log4j.appender.im.password = password log4j.appender.im.recipient = corlin@cybercorlin.netlog4j.appender.im.layout=org.apache.log4j.PatternLayout log4j.appender.im.layout.ConversionPattern =\\[framework\\] %d - %c -%-4r \\[%t\\] %-5p %c %x - %m%n","categories":[],"tags":[{"name":"Java","slug":"Java","permalink":"http://zhoumoon.github.io/tags/Java/"}]},{"title":"ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’ï¼Ÿ","slug":"ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’ï¼Ÿ","date":"2019-09-11T11:23:12.000Z","updated":"2021-02-08T08:14:20.157Z","comments":false,"path":"2019/09/11/ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’ï¼Ÿ/","link":"","permalink":"http://zhoumoon.github.io/2019/09/11/ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’ï¼Ÿ/","excerpt":"","text":"é¦–å…ˆå›é¡¾ä¸€ä¸‹åœ¨ç¨‹åºè®¾è®¡è¯­è¨€ä¸­æœ‰å…³å°†å‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼ˆæˆ–å‡½æ•°ï¼‰çš„ä¸€äº›ä¸“ä¸šæœ¯è¯­ã€‚æŒ‰å€¼è°ƒç”¨(call by value)è¡¨ç¤ºæ–¹æ³•æ¥æ”¶çš„æ˜¯è°ƒç”¨è€…æä¾›çš„å€¼ï¼Œè€ŒæŒ‰å¼•ç”¨è°ƒç”¨ï¼ˆcall by reference)è¡¨ç¤ºæ–¹æ³•æ¥æ”¶çš„æ˜¯è°ƒç”¨è€…æä¾›çš„å˜é‡åœ°å€ã€‚ä¸€ä¸ªæ–¹æ³•å¯ä»¥ä¿®æ”¹ä¼ é€’å¼•ç”¨æ‰€å¯¹åº”çš„å˜é‡å€¼ï¼Œè€Œä¸èƒ½ä¿®æ”¹ä¼ é€’å€¼è°ƒç”¨æ‰€å¯¹åº”çš„å˜é‡å€¼ã€‚ å®ƒç”¨æ¥æè¿°å„ç§ç¨‹åºè®¾è®¡è¯­è¨€ï¼ˆä¸åªæ˜¯Java)ä¸­æ–¹æ³•å‚æ•°ä¼ é€’æ–¹å¼ã€‚ Javaç¨‹åºè®¾è®¡è¯­è¨€æ€»æ˜¯é‡‡ç”¨æŒ‰å€¼è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯æ‰€æœ‰å‚æ•°å€¼çš„ä¸€ä¸ªæ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¼ é€’ç»™å®ƒçš„ä»»ä½•å‚æ•°å˜é‡çš„å†…å®¹ã€‚ ä¸‹é¢é€šè¿‡ 3 ä¸ªä¾‹å­æ¥ç»™å¤§å®¶è¯´æ˜ example 1123456789101112131415161718public static void main(String[] args) &#123; int num1 = 10; int num2 = 20; swap(num1, num2); System.out.println(\"num1 = \" + num1); System.out.println(\"num2 = \" + num2);&#125;public static void swap(int a, int b) &#123; int temp = a; a = b; b = temp; System.out.println(\"a = \" + a); System.out.println(\"b = \" + b);&#125; ç»“æœï¼š 1234a = 20b = 10num1 = 10num2 = 20 è§£æï¼š åœ¨swapæ–¹æ³•ä¸­ï¼Œaã€bçš„å€¼è¿›è¡Œäº¤æ¢ï¼Œå¹¶ä¸ä¼šå½±å“åˆ° num1ã€num2ã€‚å› ä¸ºï¼Œaã€bä¸­çš„å€¼ï¼Œåªæ˜¯ä» num1ã€num2 çš„å¤åˆ¶è¿‡æ¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œaã€bç›¸å½“äºnum1ã€num2 çš„å‰¯æœ¬ï¼Œå‰¯æœ¬çš„å†…å®¹æ— è®ºæ€ä¹ˆä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°åŸä»¶æœ¬èº«ã€‚ é€šè¿‡ä¸Šé¢ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼Œè€Œå¯¹è±¡å¼•ç”¨ä½œä¸ºå‚æ•°å°±ä¸ä¸€æ ·ï¼Œè¯·çœ‹ example2. example 21234567891011public static void main(String[] args) &#123; int[] arr = &#123; 1, 2, 3, 4, 5 &#125;; System.out.println(arr[0]); change(arr); System.out.println(arr[0]);&#125;public static void change(int[] array) &#123; // å°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å˜ä¸º0 array[0] = 0;&#125; ç»“æœï¼š 1210 è§£æï¼š array è¢«åˆå§‹åŒ– arr çš„æ‹·è´ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ array å’Œ arr æŒ‡å‘çš„æ—¶åŒä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚ å› æ­¤ï¼Œå¤–éƒ¨å¯¹å¼•ç”¨å¯¹è±¡çš„æ”¹å˜ä¼šåæ˜ åˆ°æ‰€å¯¹åº”çš„å¯¹è±¡ä¸Šã€‚ é€šè¿‡ example2 æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œå®ç°ä¸€ä¸ªæ”¹å˜å¯¹è±¡å‚æ•°çŠ¶æ€çš„æ–¹æ³•å¹¶ä¸æ˜¯ä¸€ä»¶éš¾äº‹ã€‚ç†ç”±å¾ˆç®€å•ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯å¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œå¯¹è±¡å¼•ç”¨åŠå…¶ä»–çš„æ‹·è´åŒæ—¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚ å¾ˆå¤šç¨‹åºè®¾è®¡è¯­è¨€ï¼ˆç‰¹åˆ«æ˜¯ï¼ŒC++å’ŒPascal)æä¾›äº†ä¸¤ç§å‚æ•°ä¼ é€’çš„æ–¹å¼ï¼šå€¼è°ƒç”¨å’Œå¼•ç”¨è°ƒç”¨ã€‚æœ‰äº›ç¨‹åºå‘˜ï¼ˆç”šè‡³æœ¬ä¹¦çš„ä½œè€…ï¼‰è®¤ä¸ºJavaç¨‹åºè®¾è®¡è¯­è¨€å¯¹å¯¹è±¡é‡‡ç”¨çš„æ˜¯å¼•ç”¨è°ƒç”¨ï¼Œå®é™…ä¸Šï¼Œè¿™ç§ç†è§£æ˜¯ä¸å¯¹çš„ã€‚ç”±äºè¿™ç§è¯¯è§£å…·æœ‰ä¸€å®šçš„æ™®éæ€§ï¼Œæ‰€ä»¥ä¸‹é¢ç»™å‡ºä¸€ä¸ªåä¾‹æ¥è¯¦ç»†åœ°é˜è¿°ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚ example 312345678910111213141516171819public class Test &#123; public static void main(String[] args) &#123; // TODO Auto-generated method stub Student s1 = new Student(\"å°å¼ \"); Student s2 = new Student(\"å°æ\"); Test.swap(s1, s2); System.out.println(\"s1:\" + s1.getName()); System.out.println(\"s2:\" + s2.getName()); &#125; public static void swap(Student x, Student y) &#123; Student temp = x; x = y; y = temp; System.out.println(\"x:\" + x.getName()); System.out.println(\"y:\" + y.getName()); &#125;&#125; ç»“æœï¼š 1234x:å°æy:å°å¼ s1:å°å¼ s2:å°æ è§£æï¼š äº¤æ¢ä¹‹å‰ï¼š äº¤æ¢ä¹‹åï¼š é€šè¿‡ä¸Šé¢ä¸¤å¼ å›¾å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºï¼š æ–¹æ³•å¹¶æ²¡æœ‰æ”¹å˜å­˜å‚¨åœ¨å˜é‡ s1 å’Œ s2 ä¸­çš„å¯¹è±¡å¼•ç”¨ã€‚swapæ–¹æ³•çš„å‚æ•°xå’Œyè¢«åˆå§‹åŒ–ä¸ºä¸¤ä¸ªå¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œè¿™ä¸ªæ–¹æ³•äº¤æ¢çš„æ˜¯è¿™ä¸¤ä¸ªæ‹·è´ æ€»ç»“Javaç¨‹åºè®¾è®¡è¯­è¨€å¯¹å¯¹è±¡é‡‡ç”¨çš„ä¸æ˜¯å¼•ç”¨è°ƒç”¨ï¼Œå®é™…ä¸Šï¼Œå¯¹è±¡å¼•ç”¨æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚ ä¸‹é¢å†æ€»ç»“ä¸€ä¸‹Javaä¸­æ–¹æ³•å‚æ•°çš„ä½¿ç”¨æƒ…å†µï¼š ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼ˆå³æ•°å€¼å‹æˆ–å¸ƒå°”å‹ï¼‰ã€‚ ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡å‚æ•°çš„çŠ¶æ€ã€‚ ä¸€ä¸ªæ–¹æ³•ä¸èƒ½è®©å¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ å‚è€ƒï¼šã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·â… ã€‹åŸºç¡€çŸ¥è¯†ç¬¬åç‰ˆç¬¬å››ç« 4.5å°èŠ‚ äºŒ ==ä¸equals(é‡è¦)== : å®ƒçš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯ä¸æ˜¯ç›¸ç­‰ã€‚å³ï¼Œåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚(åŸºæœ¬æ•°æ®ç±»å‹==æ¯”è¾ƒçš„æ˜¯å€¼ï¼Œå¼•ç”¨æ•°æ®ç±»å‹==æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€) equals() : å®ƒçš„ä½œç”¨ä¹Ÿæ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚ä½†å®ƒä¸€èˆ¬æœ‰ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š æƒ…å†µ1ï¼šç±»æ²¡æœ‰è¦†ç›–equals()æ–¹æ³•ã€‚åˆ™é€šè¿‡equals()æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ==â€æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚ æƒ…å†µ2ï¼šç±»è¦†ç›–äº†equals()æ–¹æ³•ã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬éƒ½è¦†ç›–equals()æ–¹æ³•æ¥ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸ç­‰ï¼›è‹¥å®ƒä»¬çš„å†…å®¹ç›¸ç­‰ï¼Œåˆ™è¿”å›true(å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 1234567891011121314151617public class test1 &#123; public static void main(String[] args) &#123; String a = new String(\"ab\"); // a ä¸ºä¸€ä¸ªå¼•ç”¨ String b = new String(\"ab\"); // bä¸ºå¦ä¸€ä¸ªå¼•ç”¨,å¯¹è±¡çš„å†…å®¹ä¸€æ · String aa = \"ab\"; // æ”¾åœ¨å¸¸é‡æ± ä¸­ String bb = \"ab\"; // ä»å¸¸é‡æ± ä¸­æŸ¥æ‰¾ if (aa == bb) // true System.out.println(\"aa==bb\"); if (a == b) // falseï¼ŒéåŒä¸€å¯¹è±¡ System.out.println(\"a==b\"); if (a.equals(b)) // true System.out.println(\"aEQb\"); if (42 == 42.0) &#123; // true System.out.println(\"true\"); &#125; &#125;&#125; è¯´æ˜ï¼š Stringä¸­çš„equalsæ–¹æ³•æ˜¯è¢«é‡å†™è¿‡çš„ï¼Œå› ä¸ºobjectçš„equalsæ–¹æ³•æ˜¯æ¯”è¾ƒçš„å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œè€ŒStringçš„equalsæ–¹æ³•æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å€¼ã€‚ å½“åˆ›å»ºStringç±»å‹çš„å¯¹è±¡æ—¶ï¼Œè™šæ‹Ÿæœºä¼šåœ¨å¸¸é‡æ± ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰å·²ç»å­˜åœ¨çš„å€¼å’Œè¦åˆ›å»ºçš„å€¼ç›¸åŒçš„å¯¹è±¡ï¼Œå¦‚æœæœ‰å°±æŠŠå®ƒèµ‹ç»™å½“å‰å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰å°±åœ¨å¸¸é‡æ± ä¸­é‡æ–°åˆ›å»ºä¸€ä¸ªStringå¯¹è±¡ã€‚ ä¸‰ hashCodeä¸equalsï¼ˆé‡è¦ï¼‰é¢è¯•å®˜å¯èƒ½ä¼šé—®ä½ ï¼šâ€œä½ é‡å†™è¿‡ hashcode å’Œ equals ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡å†™equalsæ—¶å¿…é¡»é‡å†™hashCodeæ–¹æ³•ï¼Ÿâ€ hashCodeï¼ˆï¼‰ä»‹ç»hashCode() çš„ä½œç”¨æ˜¯è·å–å“ˆå¸Œç ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®é™…ä¸Šæ˜¯è¿”å›ä¸€ä¸ªintæ•´æ•°ã€‚è¿™ä¸ªå“ˆå¸Œç çš„ä½œç”¨æ˜¯ç¡®å®šè¯¥å¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„ç´¢å¼•ä½ç½®ã€‚hashCode() å®šä¹‰åœ¨JDKçš„Object.javaä¸­ï¼Œè¿™å°±æ„å‘³ç€Javaä¸­çš„ä»»ä½•ç±»éƒ½åŒ…å«æœ‰hashCode() å‡½æ•°ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼š Object çš„ hashcode æ–¹æ³•æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ç”¨ c è¯­è¨€æˆ– c++ å®ç°çš„ï¼Œè¯¥æ–¹æ³•é€šå¸¸ç”¨æ¥å°†å¯¹è±¡çš„ å†…å­˜åœ°å€ è½¬æ¢ä¸ºæ•´æ•°ä¹‹åè¿”å›ã€‚ 1234567891011121314151617/** * Returns a hash code value for the object. This method is * supported for the benefit of hash tables such as those provided by * &#123;@link java.util.HashMap&#125;. * &lt;p&gt; * As much as is reasonably practical, the hashCode method defined by * class &#123;@code Object&#125; does return distinct integers for distinct * objects. (This is typically implemented by converting the internal * address of the object into an integer, but this implementation * technique is not required by the * Java&amp;trade; programming language.) * * @return a hash code value for this object. * @see java.lang.Object#equals(java.lang.Object) * @see java.lang.System#identityHashCode */public native int hashCode(); æ•£åˆ—è¡¨å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹(key-value)ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šèƒ½æ ¹æ®â€œé”®â€å¿«é€Ÿçš„æ£€ç´¢å‡ºå¯¹åº”çš„â€œå€¼â€ã€‚è¿™å…¶ä¸­å°±åˆ©ç”¨åˆ°äº†æ•£åˆ—ç ï¼ï¼ˆå¯ä»¥å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€è¦çš„å¯¹è±¡ï¼‰ ä¸ºä»€ä¹ˆè¦æœ‰hashCodeæˆ‘ä»¬ä»¥â€œHashSetå¦‚ä½•æ£€æŸ¥é‡å¤â€ä¸ºä¾‹å­æ¥è¯´æ˜ä¸ºä»€ä¹ˆè¦æœ‰hashCodeï¼š å½“ä½ æŠŠå¯¹è±¡åŠ å…¥HashSetæ—¶ï¼ŒHashSetä¼šå…ˆè®¡ç®—å¯¹è±¡çš„hashcodeå€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸å…¶ä»–å·²ç»åŠ å…¥çš„å¯¹è±¡çš„hashcodeå€¼ä½œæ¯”è¾ƒï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒHashSetä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒhashcodeå€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨equalsï¼ˆï¼‰æ–¹æ³•æ¥æ£€æŸ¥hashcodeç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼ŒHashSetå°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚ï¼ˆæ‘˜è‡ªæˆ‘çš„Javaå¯è’™ä¹¦ã€ŠHead fist javaã€‹ç¬¬äºŒç‰ˆï¼‰ã€‚è¿™æ ·æˆ‘ä»¬å°±å¤§å¤§å‡å°‘äº†equalsçš„æ¬¡æ•°ï¼Œç›¸åº”å°±å¤§å¤§æé«˜äº†æ‰§è¡Œé€Ÿåº¦ã€‚ hashCodeï¼ˆï¼‰ä¸equalsï¼ˆï¼‰çš„ç›¸å…³è§„å®š å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™hashcodeä¸€å®šä¹Ÿæ˜¯ç›¸åŒçš„ ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰,å¯¹ä¸¤ä¸ªå¯¹è±¡åˆ†åˆ«è°ƒç”¨equalsæ–¹æ³•éƒ½è¿”å›true ä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„hashcodeå€¼ï¼Œå®ƒä»¬ä¹Ÿä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„ å› æ­¤ï¼Œequalsæ–¹æ³•è¢«è¦†ç›–è¿‡ï¼Œåˆ™hashCodeæ–¹æ³•ä¹Ÿå¿…é¡»è¢«è¦†ç›– hashCode()çš„é»˜è®¤è¡Œä¸ºæ˜¯å¯¹å †ä¸Šçš„å¯¹è±¡äº§ç”Ÿç‹¬ç‰¹å€¼ã€‚å¦‚æœæ²¡æœ‰é‡å†™hashCode()ï¼Œåˆ™è¯¥classçš„ä¸¤ä¸ªå¯¹è±¡æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šç›¸ç­‰ï¼ˆå³ä½¿è¿™ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒçš„æ•°æ®ï¼‰ ä¸ºä»€ä¹ˆä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„hashcodeå€¼ï¼Œå®ƒä»¬ä¹Ÿä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„ï¼Ÿåœ¨è¿™é‡Œè§£é‡Šä¸€ä½å°ä¼™ä¼´çš„é—®é¢˜ã€‚ä»¥ä¸‹å†…å®¹æ‘˜è‡ªã€ŠHead Fisrt Javaã€‹ã€‚ å› ä¸ºhashCode() æ‰€ä½¿ç”¨çš„æ‚å‡‘ç®—æ³•ä¹Ÿè®¸åˆšå¥½ä¼šè®©å¤šä¸ªå¯¹è±¡ä¼ å›ç›¸åŒçš„æ‚å‡‘å€¼ã€‚è¶Šç³Ÿç³•çš„æ‚å‡‘ç®—æ³•è¶Šå®¹æ˜“ç¢°æ’ï¼Œä½†è¿™ä¹Ÿä¸æ•°æ®å€¼åŸŸåˆ†å¸ƒçš„ç‰¹æ€§æœ‰å…³ï¼ˆæ‰€è°“ç¢°æ’ä¹Ÿå°±æ˜¯æŒ‡çš„æ˜¯ä¸åŒçš„å¯¹è±¡å¾—åˆ°ç›¸åŒçš„ hashCodeï¼‰ã€‚ æˆ‘ä»¬åˆšåˆšä¹Ÿæåˆ°äº† HashSet,å¦‚æœ HashSet åœ¨å¯¹æ¯”çš„æ—¶å€™ï¼ŒåŒæ ·çš„ hashcode æœ‰å¤šä¸ªå¯¹è±¡ï¼Œå®ƒä¼šä½¿ç”¨ equals() æ¥åˆ¤æ–­æ˜¯å¦çœŸçš„ç›¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ hashcode åªæ˜¯ç”¨æ¥ç¼©å°æŸ¥æ‰¾æˆæœ¬ã€‚ å‚è€ƒï¼š https://blog.csdn.net/zhzhao999/article/details/53449504 https://www.cnblogs.com/skywang12345/p/3324958.html https://www.cnblogs.com/Eason-S/p/5524837.html","categories":[],"tags":[{"name":"Java","slug":"Java","permalink":"http://zhoumoon.github.io/tags/Java/"}]},{"title":"å¹²è´§ï¼šè®¡ç®—æœºç½‘ç»œçŸ¥è¯†æ€»ç»“","slug":"å¹²è´§ï¼šè®¡ç®—æœºç½‘ç»œçŸ¥è¯†æ€»ç»“","date":"2019-09-11T04:03:11.000Z","updated":"2021-02-08T08:14:20.165Z","comments":false,"path":"2019/09/11/å¹²è´§ï¼šè®¡ç®—æœºç½‘ç»œçŸ¥è¯†æ€»ç»“/","link":"","permalink":"http://zhoumoon.github.io/2019/09/11/å¹²è´§ï¼šè®¡ç®—æœºç½‘ç»œçŸ¥è¯†æ€»ç»“/","excerpt":"","text":"ç›®å½•ç»“æ„ 1. è®¡ç®—æœºæ¦‚è¿° 2. ç‰©ç†å±‚ 3. æ•°æ®é“¾è·¯å±‚ 4. ç½‘ç»œå±‚ 5. è¿è¾“å±‚ 6. åº”ç”¨å±‚ä¸€è®¡ç®—æœºæ¦‚è¿°ï¼ˆ1ï¼‰ï¼ŒåŸºæœ¬æœ¯è¯­ ç»“ç‚¹ ï¼ˆnodeï¼‰ï¼šç½‘ç»œä¸­çš„ç»“ç‚¹å¯ä»¥æ˜¯è®¡ç®—æœºï¼Œé›†çº¿å™¨ï¼Œäº¤æ¢æœºæˆ–è·¯ç”±å™¨ç­‰ã€‚ é“¾è·¯ï¼ˆlink ï¼‰ï¼šä»ä¸€ä¸ªç»“ç‚¹åˆ°å¦ä¸€ä¸ªç»“ç‚¹çš„ä¸€æ®µç‰©ç†çº¿è·¯ã€‚ä¸­é—´æ²¡æœ‰ä»»ä½•å…¶ä»–äº¤ç‚¹ã€‚ ä¸»æœºï¼ˆhostï¼‰ï¼šè¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„è®¡ç®—æœº. ISPï¼ˆInternet Service Providerï¼‰ï¼šå› ç‰¹ç½‘æœåŠ¡æä¾›è€…ï¼ˆæä¾›å•†ï¼‰. IXPï¼ˆInternet eXchange Pointï¼‰ï¼šäº’è”ç½‘äº¤æ¢ç‚¹IXPçš„ä¸»è¦ä½œç”¨å°±æ˜¯å…è®¸ä¸¤ä¸ªç½‘ç»œç›´æ¥ç›¸è¿å¹¶äº¤æ¢åˆ†ç»„ï¼Œè€Œä¸éœ€è¦å†é€šè¿‡ç¬¬ä¸‰ä¸ªç½‘ç»œæ¥è½¬å‘åˆ†ç»„ã€‚. RFC(Request For Comments)æ„æ€æ˜¯â€œè¯·æ±‚è¯„è®®â€ï¼ŒåŒ…å«äº†å…³äºInternetå‡ ä¹æ‰€æœ‰çš„é‡è¦çš„æ–‡å­—èµ„æ–™ã€‚ å¹¿åŸŸç½‘WANï¼ˆWide Area Networkï¼‰ä»»åŠ¡æ˜¯é€šè¿‡é•¿è·ç¦»è¿é€ä¸»æœºå‘é€çš„æ•°æ® åŸåŸŸç½‘MANï¼ˆMetropolitan Area Networkï¼‰ç”¨æ¥è®²å¤šä¸ªå±€åŸŸç½‘è¿›è¡Œäº’è¿ å±€åŸŸç½‘LANï¼ˆLocal Area Networkï¼‰å­¦æ ¡æˆ–ä¼ä¸šå¤§å¤šæ‹¥æœ‰å¤šä¸ªäº’è¿çš„å±€åŸŸç½‘ ä¸ªäººåŒºåŸŸç½‘PANï¼ˆPersonal Area Networkï¼‰åœ¨ä¸ªäººå·¥ä½œçš„åœ°æ–¹æŠŠå±äºä¸ªäººä½¿ç”¨çš„ç”µå­è®¾å¤‡ç”¨æ— çº¿æŠ€æœ¯è¿æ¥èµ·æ¥çš„ç½‘ç»œ ç«¯ç³»ç»Ÿï¼ˆend systemï¼‰ï¼šå¤„åœ¨å› ç‰¹ç½‘è¾¹ç¼˜çš„éƒ¨åˆ†å³æ˜¯è¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„æ‰€æœ‰çš„ä¸»æœº. åˆ†ç»„ï¼ˆpacket ï¼‰ï¼šå› ç‰¹ç½‘ä¸­ä¼ é€çš„æ•°æ®å•å…ƒã€‚ç”±é¦–éƒ¨headerå’Œæ•°æ®æ®µç»„æˆã€‚åˆ†ç»„åˆç§°ä¸ºåŒ…ï¼Œé¦–éƒ¨å¯ç§°ä¸ºåŒ…å¤´ã€‚ å­˜å‚¨è½¬å‘ï¼ˆstore and forward ï¼‰:è·¯ç”±å™¨æ”¶åˆ°ä¸€ä¸ªåˆ†ç»„ï¼Œå…ˆå­˜å‚¨ä¸‹æ¥ï¼Œå†æ£€æŸ¥å…¶é¦–éƒ¨ï¼ŒæŸ¥æ‰¾è½¬å‘è¡¨ï¼ŒæŒ‰ç…§é¦–éƒ¨ä¸­çš„ç›®çš„åœ°å€ï¼Œæ‰¾åˆ°åˆé€‚çš„æ¥å£è½¬å‘å‡ºå»ã€‚ å¸¦å®½ï¼ˆbandwidthï¼‰ï¼šåœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œè¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡â€ã€‚å¸¸ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›ã€‚å•ä½æ˜¯â€œæ¯”ç‰¹æ¯ç§’â€ï¼Œè®°ä¸ºb/sã€‚ ååé‡ï¼ˆthroughput ï¼‰ï¼šè¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„æ•°æ®é‡ã€‚ååé‡æ›´ç»å¸¸åœ°ç”¨äºå¯¹ç°å®ä¸–ç•Œä¸­çš„ç½‘ç»œçš„ä¸€ç§æµ‹é‡ï¼Œä»¥ä¾¿çŸ¥é“å®é™…ä¸Šåˆ°åº•æœ‰å¤šå°‘æ•°æ®é‡èƒ½å¤Ÿé€šè¿‡ç½‘ç»œã€‚ååé‡å—ç½‘ç»œçš„å¸¦å®½æˆ–ç½‘ç»œçš„é¢å®šé€Ÿç‡çš„é™åˆ¶ã€‚ï¼ˆ2ï¼‰ï¼Œé‡è¦çŸ¥è¯†ç‚¹æ€»ç»“ 1ï¼Œè®¡ç®—æœºç½‘ç»œï¼ˆç®€ç§°ç½‘ç»œï¼‰æŠŠè®¸å¤šè®¡ç®—æœºè¿æ¥åœ¨ä¸€èµ·ï¼Œè€Œäº’è”ç½‘æŠŠè®¸å¤šç½‘ç»œè¿æ¥åœ¨ä¸€èµ·ï¼Œæ˜¯ç½‘ç»œçš„ç½‘ç»œã€‚ 2ï¼Œå°å†™å­—æ¯iå¼€å¤´çš„internetï¼ˆäº’è”ç½‘ï¼‰æ˜¯é€šç”¨åè¯ï¼Œå®ƒæ³›æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç½‘ç»œã€‚åœ¨è¿™äº›ç½‘ç»œä¹‹é—´çš„é€šä¿¡åè®®ï¼ˆå³é€šä¿¡è§„åˆ™ï¼‰å¯ä»¥æ˜¯ä»»æ„çš„ã€‚ å¤§å†™å­—æ¯Iå¼€å¤´çš„Internetï¼ˆäº’è”ç½‘ï¼‰æ˜¯ä¸“ç”¨åè¯ï¼Œå®ƒæŒ‡å…¨çƒæœ€å¤§çš„ï¼Œå¼€æ”¾çš„ï¼Œç”±ä¼—å¤šç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç‰¹å®šçš„äº’è”ç½‘ï¼Œå¹¶é‡‡ç”¨TCP/IPåè®®ä½œä¸ºé€šä¿¡è§„åˆ™ï¼Œå…¶å‰èº«ä¸ºARPANETã€‚Internetçš„æ¨èè¯‘åä¸ºå› ç‰¹ç½‘ï¼Œç°åœ¨ä¸€èˆ¬æµè¡Œç§°ä¸ºäº’è”ç½‘ã€‚ 3ï¼Œè·¯ç”±å™¨æ˜¯å®ç°åˆ†ç»„äº¤æ¢çš„å…³é”®æ„ä»¶ï¼Œå…¶ä»»åŠ¡æ˜¯è½¬å‘æ”¶åˆ°çš„åˆ†ç»„ï¼Œè¿™æ˜¯ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†æœ€é‡è¦çš„åŠŸèƒ½ã€‚åˆ†ç»„äº¤æ¢é‡‡ç”¨å­˜å‚¨è½¬å‘æŠ€æœ¯ï¼Œè¡¨ç¤ºæŠŠä¸€ä¸ªæŠ¥æ–‡ï¼ˆè¦å‘é€çš„æ•´å—æ•°æ®ï¼‰åˆ†ä¸ºå‡ ä¸ªåˆ†ç»„åå†è¿›è¡Œä¼ é€ã€‚åœ¨å‘é€æŠ¥æ–‡ä¹‹å‰ï¼Œå…ˆæŠŠè¾ƒé•¿çš„æŠ¥æ–‡åˆ’åˆ†æˆä¸ºä¸€ä¸ªä¸ªæ›´å°çš„ç­‰é•¿æ•°æ®æ®µã€‚åœ¨æ¯ä¸ªæ•°æ®ç«¯çš„å‰é¢åŠ ä¸Šä¸€äº›ç”±å¿…è¦çš„æ§åˆ¶ä¿¡æ¯ç»„æˆçš„é¦–éƒ¨åï¼Œå°±æ„æˆäº†ä¸€ä¸ªåˆ†ç»„ã€‚åˆ†ç»„åˆç§°ä¸ºåŒ…ã€‚åˆ†ç»„æ˜¯åœ¨äº’è”ç½‘ä¸­ä¼ é€çš„æ•°æ®å•å…ƒï¼Œæ­£æ˜¯ç”±äºåˆ†ç»„çš„å¤´éƒ¨åŒ…å«äº†è¯¸å¦‚ç›®çš„åœ°å€å’Œæºåœ°å€ç­‰é‡è¦æ§åˆ¶ä¿¡æ¯ï¼Œæ¯ä¸€ä¸ªåˆ†ç»„æ‰èƒ½åœ¨äº’è”ç½‘ä¸­ç‹¬ç«‹çš„é€‰æ‹©ä¼ è¾“è·¯å¾„ï¼Œå¹¶æ­£ç¡®åœ°äº¤ä»˜åˆ°åˆ†ç»„ä¼ è¾“çš„ç»ˆç‚¹ã€‚ 4ï¼Œäº’è”ç½‘æŒ‰å·¥ä½œæ–¹å¼å¯åˆ’åˆ†ä¸ºè¾¹ç¼˜éƒ¨åˆ†å’Œæ ¸å¿ƒéƒ¨åˆ†ã€‚ä¸»æœºåœ¨ç½‘ç»œçš„è¾¹ç¼˜éƒ¨åˆ†ï¼Œå…¶ä½œç”¨æ˜¯è¿›è¡Œä¿¡æ¯å¤„ç†ã€‚ç”±å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆæ ¸å¿ƒéƒ¨åˆ†ï¼Œå…¶ä½œç”¨æ˜¯æä¾›è¿é€šæ€§å’Œäº¤æ¢ã€‚ 5ï¼Œè®¡ç®—æœºé€šä¿¡æ˜¯è®¡ç®—æœºä¸­è¿›ç¨‹ï¼ˆå³è¿è¡Œç€çš„ç¨‹åºï¼‰ä¹‹é—´çš„é€šä¿¡ã€‚è®¡ç®—æœºç½‘ç»œé‡‡ç”¨çš„é€šä¿¡æ–¹å¼æ˜¯å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ï¼ˆC/Sæ–¹å¼ï¼‰å’Œå¯¹ç­‰è¿æ¥æ–¹å¼ï¼ˆP2Pæ–¹å¼ï¼‰ã€‚ 6ï¼Œå®¢æˆ·å’ŒæœåŠ¡å™¨éƒ½æ˜¯æŒ‡é€šä¿¡ä¸­æ‰€æ¶‰åŠçš„åº”ç”¨è¿›ç¨‹ã€‚å®¢æˆ·æ˜¯æœåŠ¡è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨æ˜¯æœåŠ¡æä¾›æ–¹ã€‚ 7ï¼ŒæŒ‰ç…§ä½œç”¨èŒƒå›´çš„ä¸åŒï¼Œè®¡ç®—æœºç½‘ç»œåˆ†ä¸ºå¹¿åŸŸç½‘WANï¼ŒåŸåŸŸç½‘MANï¼Œå±€åŸŸç½‘LANï¼Œä¸ªäººåŒºåŸŸç½‘PANã€‚ 8ï¼Œè®¡ç®—æœºç½‘ç»œæœ€å¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡æ˜¯ï¼šé€Ÿç‡ï¼Œå¸¦å®½ï¼Œååé‡ï¼Œæ—¶å»¶ï¼ˆå‘é€æ—¶å»¶ï¼Œå¤„ç†æ—¶å»¶ï¼Œæ’é˜Ÿæ—¶å»¶ï¼‰ï¼Œæ—¶å»¶å¸¦å®½ç§¯ï¼Œå¾€è¿”æ—¶é—´å’Œä¿¡é“åˆ©ç”¨ç‡ã€‚ 9ï¼Œç½‘ç»œåè®®å³åè®®ï¼Œæ˜¯ä¸ºè¿›è¡Œç½‘ç»œä¸­çš„æ•°æ®äº¤æ¢è€Œå»ºç«‹çš„è§„åˆ™ã€‚è®¡ç®—æœºç½‘ç»œçš„å„å±‚ä»¥åŠå…¶åè®®é›†åˆï¼Œç§°ä¸ºç½‘ç»œçš„ä½“ç³»ç»“æ„ã€‚ 10ï¼Œäº”å±‚ä½“ç³»ç»“æ„ç”±åº”ç”¨å±‚ï¼Œè¿è¾“å±‚ï¼Œç½‘ç»œå±‚ï¼ˆç½‘é™…å±‚ï¼‰ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç‰©ç†å±‚ç»„æˆã€‚è¿è¾“å±‚æœ€ä¸»è¦çš„åè®®æ˜¯TCPå’ŒUDPåè®®ï¼Œç½‘ç»œå±‚æœ€é‡è¦çš„åè®®æ˜¯IPåè®®ã€‚ äºŒç‰©ç†å±‚ï¼ˆ1ï¼‰ï¼ŒåŸºæœ¬æœ¯è¯­æ•°æ®ï¼ˆdataï¼‰ï¼šè¿é€æ¶ˆæ¯çš„å®ä½“ã€‚ä¿¡å·ï¼ˆsignalï¼‰ï¼šæ•°æ®çš„ç”µæ°”çš„æˆ–ç”µç£çš„è¡¨ç°ã€‚æˆ–è€…è¯´ä¿¡å·æ˜¯é€‚åˆåœ¨ä¼ è¾“ä»‹è´¨ä¸Šä¼ è¾“çš„å¯¹è±¡ã€‚ç å…ƒï¼ˆ codeï¼‰ï¼š åœ¨ä½¿ç”¨æ—¶é—´åŸŸï¼ˆæˆ–ç®€ç§°ä¸ºæ—¶åŸŸï¼‰çš„æ³¢å½¢æ¥è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ã€‚å•å·¥ï¼ˆsimplex ï¼‰ï¼šåªèƒ½æœ‰ä¸€ä¸ªæ–¹å‘çš„é€šä¿¡è€Œæ²¡æœ‰åæ–¹å‘çš„äº¤äº’ã€‚åŠåŒå·¥ï¼ˆhalf duplex ï¼‰ï¼šé€šä¿¡çš„åŒæ–¹éƒ½å¯ä»¥å‘é€ä¿¡æ¯ï¼Œä½†ä¸èƒ½åŒæ–¹åŒæ—¶å‘é€(å½“ç„¶ä¹Ÿå°±ä¸èƒ½åŒæ—¶æ¥æ”¶)ã€‚å…¨åŒå·¥ï¼ˆfull duplexï¼‰ï¼š é€šä¿¡çš„åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶ä¿¡æ¯ã€‚å¥ˆæ°å‡†åˆ™ï¼šåœ¨ä»»ä½•ä¿¡é“ä¸­ï¼Œç å…ƒçš„ä¼ è¾“çš„æ•ˆç‡æ˜¯æœ‰ä¸Šé™çš„ï¼Œä¼ è¾“é€Ÿç‡è¶…è¿‡æ­¤ä¸Šé™ï¼Œå°±ä¼šå‡ºç°ä¸¥é‡çš„ç é—´ä¸²æ‰°é—®é¢˜ï¼Œä½¿æ¥æ”¶ç«¯å¯¹ç å…ƒçš„åˆ¤å†³ï¼ˆå³è¯†åˆ«ï¼‰æˆä¸ºä¸å¯èƒ½ã€‚åŸºå¸¦ä¿¡å·ï¼ˆbaseband signalï¼‰ï¼šæ¥è‡ªä¿¡æºçš„ä¿¡å·ã€‚æŒ‡æ²¡æœ‰ç»è¿‡è°ƒåˆ¶çš„æ•°å­—ä¿¡å·æˆ–æ¨¡æ‹Ÿä¿¡å·ã€‚ å¸¦é€šï¼ˆé¢‘å¸¦ï¼‰ä¿¡å·ï¼ˆbandpass signalï¼‰ï¼šæŠŠåŸºå¸¦ä¿¡å·ç»è¿‡è½½æ³¢è°ƒåˆ¶åï¼ŒæŠŠä¿¡å·çš„é¢‘ç‡èŒƒå›´æ¬ç§»åˆ°è¾ƒé«˜çš„é¢‘æ®µä»¥ä¾¿åœ¨ä¿¡é“ä¸­ä¼ è¾“ï¼ˆå³ä»…åœ¨ä¸€æ®µé¢‘ç‡èŒƒå›´å†…èƒ½å¤Ÿé€šè¿‡ä¿¡é“ï¼‰ï¼Œè¿™é‡Œè°ƒåˆ¶è¿‡åçš„ä¿¡å·å°±æ˜¯å¸¦é€šä¿¡å·ã€‚ è°ƒåˆ¶ï¼ˆmodulation ï¼‰ï¼šå¯¹ä¿¡å·æºçš„ä¿¡æ¯è¿›è¡Œå¤„ç†ååŠ åˆ°è½½æ³¢ä¿¡å·ä¸Šï¼Œä½¿å…¶å˜ä¸ºé€‚åˆåœ¨ä¿¡é“ä¼ è¾“çš„å½¢å¼çš„è¿‡ç¨‹ã€‚ä¿¡å™ªæ¯”ï¼ˆsignal-to-noise ratio ï¼‰ï¼šæŒ‡ä¿¡å·çš„å¹³å‡åŠŸç‡å’Œå™ªå£°çš„å¹³å‡åŠŸç‡ä¹‹æ¯”ï¼Œè®°ä¸ºS/Nã€‚ä¿¡å™ªæ¯”ï¼ˆdBï¼‰=10*log10ï¼ˆS/Nï¼‰ä¿¡é“å¤ç”¨ï¼ˆchannel multiplexing ï¼‰ï¼šæŒ‡å¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€ä¸ªä¿¡é“ã€‚ï¼ˆå¹¶ä¸ä¸€å®šæ˜¯åŒæ—¶ï¼‰æ¯”ç‰¹ç‡ï¼ˆbit rate ï¼‰ï¼šå•ä½æ—¶é—´ï¼ˆæ¯ç§’ï¼‰å†…ä¼ é€çš„æ¯”ç‰¹æ•°ã€‚æ³¢ç‰¹ç‡ï¼ˆbaud rateï¼‰ï¼šå•ä½æ—¶é—´è½½æ³¢è°ƒåˆ¶çŠ¶æ€æ”¹å˜çš„æ¬¡æ•°ã€‚é’ˆå¯¹æ•°æ®ä¿¡å·å¯¹è½½æ³¢çš„è°ƒåˆ¶é€Ÿç‡ã€‚å¤ç”¨ï¼ˆmultiplexingï¼‰ï¼šå…±äº«ä¿¡é“çš„æ–¹æ³•ADSLï¼ˆAsymmetric Digital Subscriber Line ï¼‰ï¼š éå¯¹ç§°æ•°å­—ç”¨æˆ·çº¿ã€‚å…‰çº¤åŒè½´æ··åˆç½‘ï¼ˆHFCç½‘ï¼‰:åœ¨ç›®å‰è¦†ç›–èŒƒå›´å¾ˆå¹¿çš„æœ‰çº¿ç”µè§†ç½‘çš„åŸºç¡€ä¸Šå¼€å‘çš„ä¸€ç§å±…æ°‘å®½å¸¦æ¥å…¥ç½‘ï¼ˆ2ï¼‰ï¼Œé‡è¦çŸ¥è¯†ç‚¹æ€»ç»“ 1ï¼Œç‰©ç†å±‚çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯ç¡®å®šä¸ä¼ è¾“åª’ä½“æ¥å£æœ‰å…³çš„ä¸€äº›ç‰¹æ€§ï¼Œå¦‚æœºæ¢°ç‰¹æ€§ï¼Œç”µæ°”ç‰¹æ€§ï¼ŒåŠŸèƒ½ç‰¹æ€§ï¼Œè¿‡ç¨‹ç‰¹æ€§ã€‚ 2ï¼Œä¸€ä¸ªæ•°æ®é€šä¿¡ç³»ç»Ÿå¯åˆ’åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼Œå³æºç³»ç»Ÿï¼Œä¼ è¾“ç³»ç»Ÿï¼Œç›®çš„ç³»ç»Ÿã€‚æºç³»ç»ŸåŒ…æ‹¬æºç‚¹ï¼ˆæˆ–æºç«™ï¼Œä¿¡æºï¼‰å’Œå‘é€å™¨ï¼Œç›®çš„ç³»ç»ŸåŒ…æ‹¬æ¥æ”¶å™¨å’Œç»ˆç‚¹ã€‚ 3ï¼Œé€šä¿¡çš„ç›®çš„æ˜¯ä¼ é€æ¶ˆæ¯ã€‚å¦‚è¯éŸ³ï¼Œæ–‡å­—ï¼Œå›¾åƒç­‰éƒ½æ˜¯æ¶ˆæ¯ï¼Œæ•°æ®æ˜¯è¿é€æ¶ˆæ¯çš„å®ä½“ã€‚ä¿¡å·åˆ™æ˜¯æ•°æ®çš„ç”µå™¨æˆ–ç”µç£çš„è¡¨ç°ã€‚ 4ï¼Œæ ¹æ®ä¿¡å·ä¸­ä»£è¡¨æ¶ˆæ¯çš„å‚æ•°çš„å–å€¼æ–¹å¼ä¸åŒï¼Œä¿¡å·å¯åˆ†ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼ˆæˆ–è¿ç»­ä¿¡å·ï¼‰å’Œæ•°å­—ä¿¡å·ï¼ˆæˆ–ç¦»æ•£ä¿¡å·ï¼‰ã€‚åœ¨ä½¿ç”¨æ—¶é—´åŸŸï¼ˆç®€ç§°æ—¶åŸŸï¼‰çš„æ³¢å½¢è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ç§°ä¸ºç å…ƒã€‚ 5ï¼Œæ ¹æ®åŒæ–¹ä¿¡æ¯äº¤äº’çš„æ–¹å¼ï¼Œé€šä¿¡å¯åˆ’åˆ†ä¸ºå•å‘é€šä¿¡ï¼ˆæˆ–å•å·¥é€šä¿¡ï¼‰ï¼ŒåŒå‘äº¤æ›¿é€šä¿¡ï¼ˆæˆ–åŠåŒå·¥é€šä¿¡ï¼‰ï¼ŒåŒå‘åŒæ—¶é€šä¿¡ï¼ˆå…¨åŒå·¥é€šä¿¡ï¼‰ã€‚ 6ï¼Œæ¥è‡ªä¿¡æºçš„ä¿¡å·ç§°ä¸ºåŸºå¸¦ä¿¡å·ã€‚ä¿¡å·è¦åœ¨ä¿¡é“ä¸Šä¼ è¾“å°±è¦ç»è¿‡è°ƒåˆ¶ã€‚è°ƒåˆ¶æœ‰åŸºå¸¦è°ƒåˆ¶å’Œå¸¦é€šè°ƒåˆ¶ä¹‹åˆ†ã€‚æœ€åŸºæœ¬çš„å¸¦é€šè°ƒåˆ¶æ–¹æ³•æœ‰è°ƒå¹…ï¼Œè°ƒé¢‘å’Œè°ƒç›¸ã€‚è¿˜æœ‰æ›´å¤æ‚çš„è°ƒåˆ¶æ–¹æ³•ï¼Œå¦‚æ­£äº¤æŒ¯å¹…è°ƒåˆ¶ã€‚ 7ï¼Œè¦æé«˜æ•°æ®åœ¨ä¿¡é“ä¸Šçš„ä¼ é€’é€Ÿç‡ï¼Œå¯ä»¥ä½¿ç”¨æ›´å¥½çš„ä¼ è¾“åª’ä½“ï¼Œæˆ–ä½¿ç”¨å…ˆè¿›çš„è°ƒåˆ¶æŠ€æœ¯ã€‚ä½†æ•°æ®ä¼ è¾“é€Ÿç‡ä¸å¯èƒ½ä»»æ„è¢«æé«˜ã€‚ 8ï¼Œä¼ è¾“åª’ä½“å¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œå³å¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼ˆåŒç»çº¿ï¼ŒåŒè½´ç”µç¼†ï¼Œå…‰çº¤ï¼‰å’Œéå¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼ˆæ— çº¿ï¼Œçº¢å¤–ï¼Œå¤§æ°”æ¿€å…‰ï¼‰ã€‚ 9ï¼Œä¸ºäº†æœ‰æ•ˆåˆ©ç”¨å…‰çº¤èµ„æºï¼Œåœ¨å…‰çº¤å¹²çº¿å’Œç”¨æˆ·ä¹‹é—´å¹¿æ³›ä½¿ç”¨æ— æºå…‰ç½‘ç»œPONã€‚æ— æºå…‰ç½‘ç»œæ— éœ€é…å¤‡ç”µæºï¼Œå…¶é•¿æœŸè¿è¥æˆæœ¬å’Œç®¡ç†æˆæœ¬éƒ½å¾ˆä½ã€‚æœ€æµè¡Œçš„æ— æºå…‰ç½‘ç»œæ˜¯ä»¥å¤ªç½‘æ— æºå…‰ç½‘ç»œEPONå’Œå‰æ¯”ç‰¹æ— æºå…‰ç½‘ç»œGPONã€‚ ï¼ˆ3ï¼‰ï¼Œæœ€é‡è¦çš„çŸ¥è¯†ç‚¹â‘ ï¼Œç‰©ç†å±‚çš„ä»»åŠ¡ é€æ˜åœ°ä¼ é€æ¯”ç‰¹æµã€‚ä¹Ÿå¯ä»¥å°†ç‰©ç†å±‚çš„ä¸»è¦ä»»åŠ¡æè¿°ä¸ºç¡®å®šä¸ä¼ è¾“åª’ä½“çš„æ¥å£çš„ä¸€äº›ç‰¹æ€§ï¼Œå³ï¼šæœºæ¢°ç‰¹æ€§ï¼ˆæ¥å£æ‰€ç”¨æ¥çº¿å™¨çš„ä¸€äº›ç‰©ç†å±æ€§å¦‚å½¢çŠ¶å°ºå¯¸ï¼‰ï¼Œç”µæ°”ç‰¹æ€§ï¼ˆæ¥å£ç”µç¼†çš„å„æ¡çº¿ä¸Šå‡ºç°çš„ç”µå‹çš„èŒƒå›´ï¼‰ï¼ŒåŠŸèƒ½ç‰¹æ€§ï¼ˆæŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³çš„ç”µå‹çš„æ„ä¹‰ï¼‰ï¼Œè¿‡ç¨‹ç‰¹æ€§ï¼ˆå¯¹äºä¸åŒåŠŸèƒ½èƒ½çš„å„ç§å¯èƒ½äº‹ä»¶çš„å‡ºç°é¡ºåºï¼‰ã€‚ æ‹“å±•ï¼š ç‰©ç†å±‚è€ƒè™‘çš„æ˜¯æ€æ ·æ‰èƒ½åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµï¼Œè€Œä¸æ˜¯æŒ‡å…·ä½“çš„ä¼ è¾“åª’ä½“ã€‚ç°æœ‰çš„è®¡ç®—æœºç½‘ç»œä¸­çš„ç¡¬ä»¶è®¾å¤‡å’Œä¼ è¾“åª’ä½“çš„ç§ç±»éå¸¸ç¹å¤šï¼Œè€Œä¸”é€šä¿¡æ‰‹æ®µä¹Ÿæœ‰è®¸å¤šä¸åŒçš„æ–¹å¼ã€‚ç‰©ç†å±‚çš„ä½œç”¨æ­£æ˜¯å°½å¯èƒ½åœ°å±è”½æ‰è¿™äº›ä¼ è¾“åª’ä½“å’Œé€šä¿¡æ‰‹æ®µçš„å·®å¼‚ï¼Œä½¿ç‰©ç†å±‚ä¸Šé¢çš„æ•°æ®é“¾è·¯å±‚æ„Ÿè§‰ä¸åˆ°è¿™äº›å·®å¼‚ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿æ•°æ®é“¾è·¯å±‚åªè€ƒè™‘å®Œæˆæœ¬å±‚çš„åè®®å’ŒæœåŠ¡ï¼Œè€Œä¸å¿…è€ƒè™‘ç½‘ç»œçš„å…·ä½“ä¼ è¾“åª’ä½“å’Œé€šä¿¡æ‰‹æ®µæ˜¯ä»€ä¹ˆã€‚ â‘¡ï¼Œå‡ ç§å¸¸ç”¨çš„ä¿¡é“å¤ç”¨æŠ€æœ¯ â‘¢ï¼Œå‡ ç§å¸¸ç”¨çš„å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œä¸»è¦æ˜¯ADSLå’ŒFTTx ç”¨æˆ·åˆ°äº’è”ç½‘çš„å®½å¸¦æ¥å…¥æ–¹æ³•æœ‰éå¯¹ç§°æ•°å­—ç”¨æˆ·çº¿ADSLï¼ˆç”¨æ•°å­—æŠ€æœ¯å¯¹ç°æœ‰çš„æ¨¡æ‹Ÿç”µè¯çº¿è¿›è¡Œæ”¹é€ ï¼Œè€Œä¸éœ€è¦é‡æ–°å¸ƒçº¿ã€‚ASDLçš„å¿«é€Ÿç‰ˆæœ¬æ˜¯ç”šé«˜é€Ÿæ•°å­—ç”¨æˆ·çº¿VDSLã€‚ï¼‰ï¼Œå…‰çº¤åŒè½´æ··åˆç½‘HFCï¼ˆæ˜¯åœ¨ç›®å‰è¦†ç›–èŒƒå›´å¾ˆå¹¿çš„æœ‰çº¿ç”µè§†ç½‘çš„åŸºç¡€ä¸Šå¼€å‘çš„ä¸€ç§å±…æ°‘å®½å¸¦æ¥å…¥ç½‘ï¼‰å’ŒFTTxï¼ˆå³å…‰çº¤åˆ°Â·Â·Â·Â·Â·Â·ï¼‰ã€‚ ä¸‰æ•°æ®é“¾è·¯å±‚ï¼ˆ1ï¼‰ï¼ŒåŸºæœ¬æœ¯è¯­ é“¾è·¯ï¼ˆlinkï¼‰ï¼šä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»ç»“ç‚¹çš„ä¸€æ®µç‰©ç†é“¾è·¯ æ•°æ®é“¾è·¯ï¼ˆdata linkï¼‰ï¼šæŠŠå®ç°æ§åˆ¶æ•°æ®è¿è¾“çš„åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šå°±æ„æˆäº†æ•°æ®é“¾è·¯ å¾ªç¯å†—ä½™æ£€éªŒCRCï¼ˆCyclic Redundancy Checkï¼‰ï¼šä¸ºäº†ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼ŒCRCæ˜¯æ•°æ®é“¾è·¯å±‚å¹¿æ³›ä½¿ç”¨çš„ä¸€ç§æ£€é”™æŠ€æœ¯ å¸§ï¼ˆframeï¼‰ï¼šä¸€ä¸ªæ•°æ®é“¾è·¯å±‚çš„ä¼ è¾“å•å…ƒï¼Œç”±ä¸€ä¸ªæ•°æ®é“¾è·¯å±‚é¦–éƒ¨å’Œå…¶æºå¸¦çš„å°åŒ…æ‰€ç»„æˆåè®®æ•°æ®å•å…ƒã€‚ MTUï¼ˆMaximum Transfer Uint ï¼‰ï¼šæœ€å¤§ä¼ é€å•å…ƒã€‚å¸§çš„æ•°æ®éƒ¨åˆ†çš„çš„é•¿åº¦ä¸Šé™ã€‚ è¯¯ç ç‡BERï¼ˆBit Error Rate ï¼‰ï¼šåœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œä¼ è¾“é”™è¯¯çš„æ¯”ç‰¹å æ‰€ä¼ è¾“æ¯”ç‰¹æ€»æ•°çš„æ¯”ç‡ã€‚ PPPï¼ˆPoint-to-Point Protocol ï¼‰ï¼šç‚¹å¯¹ç‚¹åè®®ã€‚å³ç”¨æˆ·è®¡ç®—æœºå’ŒISPè¿›è¡Œé€šä¿¡æ—¶æ‰€ä½¿ç”¨çš„æ•°æ®é“¾è·¯å±‚åè®®ã€‚ä»¥ä¸‹æ˜¯PPPå¸§çš„ç¤ºæ„å›¾: MACåœ°å€ï¼ˆMedia Access Controlæˆ–è€…Medium Access Controlï¼‰ï¼šæ„è¯‘ä¸ºåª’ä½“è®¿é—®æ§åˆ¶ï¼Œæˆ–ç§°ä¸ºç‰©ç†åœ°å€ã€ç¡¬ä»¶åœ°å€ï¼Œç”¨æ¥å®šä¹‰ç½‘ç»œè®¾å¤‡çš„ä½ç½®ã€‚ åœ¨OSIæ¨¡å‹ä¸­ï¼Œç¬¬ä¸‰å±‚ç½‘ç»œå±‚è´Ÿè´£ IPåœ°å€ï¼Œç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚åˆ™è´Ÿè´£ MACåœ°å€ã€‚ å› æ­¤ä¸€ä¸ªä¸»æœºä¼šæœ‰ä¸€ä¸ªMACåœ°å€ï¼Œè€Œæ¯ä¸ªç½‘ç»œä½ç½®ä¼šæœ‰ä¸€ä¸ªä¸“å±äºå®ƒçš„IPåœ°å€ ã€‚ åœ°å€æ˜¯è¯†åˆ«æŸä¸ªç³»ç»Ÿçš„é‡è¦æ ‡è¯†ç¬¦ï¼Œâ€œåå­—æŒ‡å‡ºæˆ‘ä»¬æ‰€è¦å¯»æ‰¾çš„èµ„æºï¼Œåœ°å€æŒ‡å‡ºèµ„æºæ‰€åœ¨çš„åœ°æ–¹ï¼Œè·¯ç”±å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•åˆ°è¾¾è¯¥å¤„â€ ç½‘æ¡¥ï¼ˆbridgeï¼‰ï¼šä¸€ç§ç”¨äºæ•°æ®é“¾è·¯å±‚å®ç°ä¸­ç»§ï¼Œè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå±€åŸŸç½‘çš„ç½‘ç»œäº’è¿è®¾å¤‡ã€‚ äº¤æ¢æœºï¼ˆswitch ï¼‰ï¼šå¹¿ä¹‰çš„æ¥è¯´ï¼Œäº¤æ¢æœºæŒ‡çš„æ˜¯ä¸€ç§é€šä¿¡ç³»ç»Ÿä¸­å®Œæˆä¿¡æ¯äº¤æ¢çš„è®¾å¤‡ã€‚è¿™é‡Œå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚çš„äº¤æ¢æœºæŒ‡çš„æ˜¯äº¤æ¢å¼é›†çº¿å™¨ï¼Œå…¶å®è´¨æ˜¯ä¸€ä¸ªå¤šæ¥å£çš„ç½‘æ¡¥ï¼ˆ2ï¼‰ï¼Œé‡è¦çŸ¥è¯†ç‚¹æ€»ç»“1ï¼Œé“¾è·¯æ˜¯ä»ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»èŠ‚ç‚¹çš„ä¸€æ®µç‰©ç†é“¾è·¯ï¼Œæ•°æ®é“¾è·¯åˆ™åœ¨é“¾è·¯çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›å¿…è¦çš„ç¡¬ä»¶ï¼ˆå¦‚ç½‘ç»œé€‚é…å™¨ï¼‰å’Œè½¯ä»¶ï¼ˆå¦‚åè®®çš„å®ç°ï¼‰ 2ï¼Œæ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¸»è¦æ˜¯ç‚¹å¯¹ç‚¹ä¿¡é“å’Œå¹¿æ’­ä¿¡é“ä¸¤ç§ã€‚ 3ï¼Œæ•°æ®é“¾è·¯å±‚ä¼ è¾“çš„åè®®æ•°æ®å•å…ƒæ˜¯å¸§ã€‚æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜æ˜¯ï¼šå°è£…æˆå¸§ï¼Œé€æ˜ä¼ è¾“å’Œå·®é”™æ£€æµ‹ 4ï¼Œå¾ªç¯å†—ä½™æ£€éªŒCRCæ˜¯ä¸€ç§æ£€é”™æ–¹æ³•ï¼Œè€Œå¸§æ£€éªŒåºåˆ—FCSæ˜¯æ·»åŠ åœ¨æ•°æ®åé¢çš„å†—ä½™ç  5ï¼Œç‚¹å¯¹ç‚¹åè®®PPPæ˜¯æ•°æ®é“¾è·¯å±‚ä½¿ç”¨æœ€å¤šçš„ä¸€ç§åè®®ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šç®€å•ï¼Œåªæ£€æµ‹å·®é”™è€Œä¸å»çº æ­£å·®é”™ï¼Œä¸ä½¿ç”¨åºå·ï¼Œä¹Ÿä¸è¿›è¡Œæµé‡æ§åˆ¶ï¼Œå¯åŒæ—¶æ”¯æŒå¤šç§ç½‘ç»œå±‚åè®® 6ï¼ŒPPPoEæ˜¯ä¸ºå®½å¸¦ä¸Šç½‘çš„ä¸»æœºä½¿ç”¨çš„é“¾è·¯å±‚åè®® 7ï¼Œå±€åŸŸç½‘çš„ä¼˜ç‚¹æ˜¯ï¼šå…·æœ‰å¹¿æ’­åŠŸèƒ½ï¼Œä»ä¸€ä¸ªç«™ç‚¹å¯æ–¹ä¾¿åœ°è®¿é—®å…¨ç½‘ï¼›ä¾¿äºç³»ç»Ÿçš„æ‰©å±•å’Œé€æ¸æ¼”å˜ï¼›æé«˜äº†ç³»ç»Ÿçš„å¯é æ€§ï¼Œå¯ç”¨æ€§å’Œç”Ÿå­˜æ€§ã€‚ 8ï¼Œå…±å‘åª’ä½“é€šä¿¡èµ„æºçš„æ–¹æ³•æœ‰äºŒï¼šä¸€æ˜¯é™æ€åˆ’åˆ†ä¿¡é“(å„ç§å¤ç”¨æŠ€æœ¯)ï¼Œè€Œæ˜¯åŠ¨æ€åª’ä½“æ¥å…¥æ§åˆ¶ï¼Œåˆç§°ä¸ºå¤šç‚¹æ¥å…¥ï¼ˆéšå³æ¥å…¥æˆ–å—æ§æ¥å…¥ï¼‰ 9ï¼Œè®¡ç®—æœºä¸å¤–æ¥å±€åŸŸç½‘é€šä¿¡éœ€è¦é€šè¿‡é€šä¿¡é€‚é…å™¨ï¼ˆæˆ–ç½‘ç»œé€‚é…å™¨ï¼‰ï¼Œå®ƒåˆç§°ä¸ºç½‘ç»œæ¥å£å¡æˆ–ç½‘å¡ã€‚è®¡ç®—å™¨çš„ç¡¬ä»¶åœ°å€å°±åœ¨é€‚é…å™¨çš„ROMä¸­ã€‚ 10ï¼Œä»¥å¤ªç½‘é‡‡ç”¨çš„æ— è¿æ¥çš„å·¥ä½œæ–¹å¼ï¼Œå¯¹å‘é€çš„æ•°æ®å¸§ä¸è¿›è¡Œç¼–å·ï¼Œä¹Ÿä¸è¦æ±‚å¯¹æ–¹å‘å›ç¡®è®¤ã€‚ç›®çš„ç«™æ”¶åˆ°æœ‰å·®é”™å¸§å°±æŠŠå®ƒä¸¢æ‰ï¼Œå…¶ä»–ä»€ä¹ˆä¹Ÿä¸åš 11ï¼Œä»¥å¤ªç½‘é‡‡ç”¨çš„åè®®æ˜¯å…·æœ‰å†²çªæ£€æµ‹çš„è½½æ³¢ç›‘å¬å¤šç‚¹æ¥å…¥CSMA/CDã€‚åè®®çš„ç‰¹ç‚¹æ˜¯ï¼šå‘é€å‰å…ˆç›‘å¬ï¼Œè¾¹å‘é€è¾¹ç›‘å¬ï¼Œä¸€æ—¦å‘ç°æ€»çº¿ä¸Šå‡ºç°äº†ç¢°æ’ï¼Œå°±ç«‹å³åœæ­¢å‘é€ã€‚ç„¶åæŒ‰ç…§é€€é¿ç®—æ³•ç­‰å¾…ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å‘é€ã€‚ å› æ­¤ï¼Œæ¯ä¸€ä¸ªç«™ç‚¹åœ¨è‡ªå·±å‘é€æ•°æ®ä¹‹åçš„ä¸€å°æ®µæ—¶é—´å†…ï¼Œå­˜åœ¨è¿™é­é‡ç¢°æ’çš„å¯èƒ½æ€§ã€‚ä»¥å¤ªç½‘ä¸Šçš„å„ç«™ç‚¹å¹³ç­‰çš„äº‰ç”¨ä»¥å¤ªç½‘ä¿¡é“ 12ï¼Œä»¥å¤ªç½‘çš„é€‚é…å™¨å…·æœ‰è¿‡æ»¤åŠŸèƒ½ï¼Œå®ƒåªæ¥æ”¶å•æ’­å¸§ï¼Œå¹¿æ’­å¸§å’Œå¤šæ’­å¸§ã€‚ 13ï¼Œä½¿ç”¨é›†çº¿å™¨å¯ä»¥åœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘ï¼ˆæ‰©å±•åçš„ä»¥å¤ªç½‘ä»ç„¶æ˜¯ä¸€ä¸ªç½‘ç»œï¼‰ ï¼ˆ3ï¼‰ï¼Œæœ€é‡è¦çš„çŸ¥è¯†ç‚¹â‘  æ•°æ®é“¾è·¯å±‚çš„ç‚¹å¯¹ç‚¹ä¿¡é“å’Œå¹¿æ’­ä¿¡é“çš„ç‰¹ç‚¹ï¼Œä»¥åŠè¿™ä¸¤ç§ä¿¡é“æ‰€ä½¿ç”¨çš„åè®®ï¼ˆPPPåè®®ä»¥åŠCSMA/CDåè®®ï¼‰çš„ç‰¹ç‚¹â‘¡ æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ï¼šå°è£…æˆå¸§ï¼Œé€æ˜ä¼ è¾“ï¼Œå·®é”™æ£€æµ‹â‘¢ ä»¥å¤ªç½‘çš„MACå±‚ç¡¬ä»¶åœ°å€â‘£ é€‚é…å™¨ï¼Œè½¬å‘å™¨ï¼Œé›†çº¿å™¨ï¼Œç½‘æ¡¥ï¼Œä»¥å¤ªç½‘äº¤æ¢æœºçš„ä½œç”¨ä»¥åŠé€‚ç”¨åœºåˆå››ç½‘ç»œå±‚ï¼ˆ1ï¼‰ï¼ŒåŸºæœ¬æœ¯è¯­è™šç”µè·¯ï¼ˆVirtual Circuitï¼‰ï¼šåœ¨ä¸¤ä¸ªç»ˆç«¯è®¾å¤‡çš„é€»è¾‘æˆ–ç‰©ç†ç«¯å£ä¹‹é—´ï¼Œé€šè¿‡å»ºç«‹çš„åŒå‘çš„é€æ˜ä¼ è¾“é€šé“ã€‚è™šç”µè·¯è¡¨ç¤ºè¿™åªæ˜¯ä¸€æ¡é€»è¾‘ä¸Šçš„è¿æ¥ï¼Œåˆ†ç»„éƒ½æ²¿ç€è¿™æ¡é€»è¾‘è¿æ¥æŒ‰ç…§å­˜å‚¨è½¬å‘æ–¹å¼ä¼ é€ï¼Œè€Œå¹¶ä¸æ˜¯çœŸæ­£å»ºç«‹äº†ä¸€æ¡ç‰©ç†è¿æ¥ã€‚IPï¼ˆInternet Protocol ï¼‰ï¼šç½‘é™…åè®® IP æ˜¯ TCP/IPä½“ç³»ä¸­ä¸¤ä¸ªæœ€ä¸»è¦çš„åè®®ä¹‹ä¸€ï¼Œæ˜¯TCP/IPä½“ç³»ç»“æ„ç½‘é™…å±‚çš„æ ¸å¿ƒã€‚é…å¥—çš„æœ‰ARPï¼ŒRARPï¼ŒICMPï¼ŒIGMPã€‚ ARPï¼ˆAddress Resolution Protocolï¼‰ï¼šåœ°å€è§£æåè®®ICMPï¼ˆInternet Control Message Protocol ï¼‰ï¼šç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®® ï¼ˆICMP å…è®¸ä¸»æœºæˆ–è·¯ç”±å™¨æŠ¥å‘Šå·®é”™æƒ…å†µå’Œæä¾›æœ‰å…³å¼‚å¸¸æƒ…å†µçš„æŠ¥å‘Šã€‚ï¼‰å­ç½‘æ©ç ï¼ˆsubnet mask ï¼‰ï¼šå®ƒæ˜¯ä¸€ç§ç”¨æ¥æŒ‡æ˜ä¸€ä¸ªIPåœ°å€çš„å“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºæ‰€åœ¨çš„å­ç½‘ä»¥åŠå“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºçš„ä½æ©ç ã€‚å­ç½‘æ©ç ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå®ƒå¿…é¡»ç»“åˆIPåœ°å€ä¸€èµ·ä½¿ç”¨ã€‚ CIDRï¼ˆ Classless Inter-Domain Routing ï¼‰ï¼šæ— åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹© ï¼ˆç‰¹ç‚¹æ˜¯æ¶ˆé™¤äº†ä¼ ç»Ÿçš„ A ç±»ã€B ç±»å’Œ C ç±»åœ°å€ä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µï¼Œå¹¶ä½¿ç”¨å„ç§é•¿åº¦çš„â€œç½‘ç»œå‰ç¼€â€(network-prefix)æ¥ä»£æ›¿åˆ†ç±»åœ°å€ä¸­çš„ç½‘ç»œå·å’Œå­ç½‘å·ï¼‰é»˜è®¤è·¯ç”±ï¼ˆdefault routeï¼‰ï¼šå½“åœ¨è·¯ç”±è¡¨ä¸­æŸ¥ä¸åˆ°èƒ½åˆ°è¾¾ç›®çš„åœ°å€çš„è·¯ç”±æ—¶ï¼Œè·¯ç”±å™¨é€‰æ‹©çš„è·¯ç”±ã€‚é»˜è®¤è·¯ç”±è¿˜å¯ä»¥å‡å°è·¯ç”±è¡¨æ‰€å ç”¨çš„ç©ºé—´å’Œæœç´¢è·¯ç”±è¡¨æ‰€ç”¨çš„æ—¶é—´ã€‚è·¯ç”±é€‰æ‹©ç®—æ³•ï¼ˆVirtual Circuitï¼‰ï¼šè·¯ç”±é€‰æ‹©åè®®çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å› ç‰¹ç½‘é‡‡ç”¨è‡ªé€‚åº”çš„ï¼Œåˆ†å±‚æ¬¡çš„è·¯ç”±é€‰æ‹©åè®®ã€‚ï¼ˆ2ï¼‰ï¼Œé‡è¦çŸ¥è¯†ç‚¹æ€»ç»“1ï¼ŒTCP/IPåè®®ä¸­çš„ç½‘ç»œå±‚å‘ä¸Šåªæä¾›ç®€å•çµæ´»çš„ï¼Œæ— è¿æ¥çš„ï¼Œå°½æœ€å¤§åŠªåŠ›äº¤ä»˜çš„æ•°æ®æŠ¥æœåŠ¡ã€‚ç½‘ç»œå±‚ä¸æä¾›æœåŠ¡è´¨é‡çš„æ‰¿è¯ºï¼Œä¸ä¿è¯åˆ†ç»„äº¤ä»˜çš„æ—¶é™æ‰€ä¼ é€çš„åˆ†ç»„å¯èƒ½å‡ºé”™ï¼Œä¸¢å¤±ï¼Œé‡å¤å’Œå¤±åºã€‚è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„å¯é æ€§ç”±è¿è¾“å±‚è´Ÿè´£ 2ï¼Œåœ¨äº’è”ç½‘çš„äº¤ä»˜æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯åœ¨æœ¬ç½‘ç»œç›´æ¥äº¤ä»˜ä¸ç”¨ç»è¿‡è·¯ç”±å™¨ï¼Œå¦ä¸€ç§æ˜¯å’Œå…¶ä»–ç½‘ç»œçš„é—´æ¥äº¤ä»˜ï¼Œè‡³å°‘ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œä½†æœ€åä¸€æ¬¡ä¸€å®šæ˜¯ç›´æ¥äº¤ä»˜ 3ï¼Œåˆ†ç±»çš„IPåœ°å€ç”±ç½‘ç»œå·å­—æ®µï¼ˆæŒ‡æ˜ç½‘ç»œï¼‰å’Œä¸»æœºå·å­—æ®µï¼ˆæŒ‡æ˜ä¸»æœºï¼‰ç»„æˆã€‚ç½‘ç»œå·å­—æ®µæœ€å‰é¢çš„ç±»åˆ«æŒ‡æ˜IPåœ°å€çš„ç±»åˆ«ã€‚IPåœ°å€å¸‚ä¸€ä¸­åˆ†ç­‰çº§çš„åœ°å€ç»“æ„ã€‚IPåœ°å€ç®¡ç†æœºæ„åˆ†é…IPåœ°å€æ—¶åªåˆ†é…ç½‘ç»œå·ï¼Œä¸»æœºå·ç”±å¾—åˆ°è¯¥ç½‘ç»œå·çš„å•ä½è‡ªè¡Œåˆ†é…ã€‚è·¯ç”±å™¨æ ¹æ®ç›®çš„ä¸»æœºæ‰€è¿æ¥çš„ç½‘ç»œå·æ¥è½¬å‘åˆ†ç»„ã€‚ä¸€ä¸ªè·¯ç”±å™¨è‡³å°‘è¿æ¥åˆ°ä¸¤ä¸ªç½‘ç»œï¼Œæ‰€ä»¥ä¸€ä¸ªè·¯ç”±å™¨è‡³å°‘åº”å½“æœ‰ä¸¤ä¸ªä¸åŒçš„IPåœ°å€ 4ï¼ŒIPæ•°æ®æŠ¥åˆ†ä¸ºé¦–éƒ¨å’Œæ•°æ®ä¸¤éƒ¨åˆ†ã€‚é¦–éƒ¨çš„å‰ä¸€éƒ¨åˆ†æ˜¯å›ºå®šé•¿åº¦ï¼Œå…±20å­—èŠ‚ï¼Œæ˜¯æ‰€æœ‰IPæ•°æ®åŒ…å¿…é¡»å…·æœ‰çš„ï¼ˆæºåœ°å€ï¼Œç›®çš„åœ°å€ï¼Œæ€»é•¿åº¦ç­‰é‡è¦åœ°æ®µéƒ½å›ºå®šåœ¨é¦–éƒ¨ï¼‰ã€‚ä¸€äº›é•¿åº¦å¯å˜çš„å¯é€‰å­—æ®µå›ºå®šåœ¨é¦–éƒ¨çš„åé¢ã€‚IPé¦–éƒ¨ä¸­çš„ç”Ÿå­˜æ—¶é—´ç»™å‡ºäº†IPæ•°æ®æŠ¥åœ¨äº’è”ç½‘ä¸­æ‰€èƒ½ç»è¿‡çš„æœ€å¤§è·¯ç”±å™¨æ•°ã€‚å¯é˜²æ­¢IPæ•°æ®æŠ¥åœ¨äº’è”ç½‘ä¸­æ— é™åˆ¶çš„å…œåœˆå­ã€‚ 5ï¼Œåœ°å€è§£æåè®®ARPæŠŠIPåœ°å€è§£æä¸ºç¡¬ä»¶åœ°å€ã€‚ARPçš„é«˜é€Ÿç¼“å­˜å¯ä»¥å¤§å¤§å‡å°‘ç½‘ç»œä¸Šçš„é€šä¿¡é‡ã€‚å› ä¸ºè¿™æ ·å¯ä»¥ä½¿ä¸»æœºä¸‹æ¬¡å†ä¸åŒæ ·åœ°å€çš„ä¸»æœºé€šä¿¡æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»é«˜é€Ÿç¼“å­˜ä¸­æ‰¾åˆ°æ‰€éœ€è¦çš„ç¡¬ä»¶åœ°å€è€Œä¸éœ€è¦å†å»å¹¿æ’­æ–¹å¼å‘é€ARPè¯·æ±‚åˆ†ç»„ 6ï¼Œæ— åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹©CIDRæ˜¯è§£å†³ç›®å‰IPåœ°å€ç´§ç¼ºçš„ä¸€ä¸ªå¥½åŠæ³•ã€‚CIDRè®°æ³•æŠŠIPåœ°å€åé¢åŠ ä¸Šæ–œçº¿â€œ/â€ï¼Œç„¶åå†™ä¸Šå‰ç¼€æ‰€æ‰€å çš„ä½æ•°ã€‚å‰ç¼€ï¼ˆæˆ–ç½‘ç»œå‰ç¼€ç”¨æ¥æŒ‡æ˜ç½‘ç»œï¼‰ï¼Œå‰ç¼€åé¢çš„éƒ¨åˆ†æ˜¯åç¼€ï¼Œç”¨æ¥æŒ‡æ˜ä¸»æœºã€‚CIDRæŠŠå‰ç¼€éƒ½ç›¸åŒçš„è¿ç»­çš„IPåœ°å€ç»„æˆä¸€ä¸ªâ€œCIDRåœ°å€å—â€ï¼ŒIPåœ°å€åˆ†é…éƒ½ä»¥CIDRåœ°å€å—ä¸ºå•ä½ã€‚ 7ï¼Œ ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®æ˜¯IPå±‚çš„åè®®.ICMPæŠ¥æ–‡ä½œä¸ºIPæ•°æ®æŠ¥çš„æ•°æ®ï¼ŒåŠ ä¸Šé¦–éƒ¨åç»„æˆIPæ•°æ®æŠ¥å‘é€å‡ºå»ã€‚ä½¿ç”¨ICMPæ•°æ®æŠ¥å¹¶ä¸æ˜¯ä¸ºäº†å®ç°å¯é ä¼ è¾“ã€‚ICMPå…è®¸ä¸»æœºæˆ–è·¯ç”±å™¨æŠ¥å‘Šå·®é”™æƒ…å†µå’Œæä¾›æœ‰å…³å¼‚å¸¸æƒ…å†µçš„æŠ¥å‘Šã€‚ICMPæŠ¥æ–‡çš„ç§ç±»æœ‰ä¸¤ç§ ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡å’ŒICMPè¯¢é—®æŠ¥æ–‡ã€‚ 8ï¼Œè¦è§£å†³IPåœ°å€è€—å°½çš„é—®é¢˜ï¼Œæœ€æ ¹æœ¬çš„åŠæ³•æ˜¯é‡‡ç”¨å…·æœ‰æ›´å¤§åœ°å€å¼“ç®­çš„æ–°ç‰ˆæœ¬IPåè®®-IPv6ã€‚IPv6æ‰€å¸¦æ¥çš„å˜åŒ–æœ‰â‘ æ›´å¤§çš„åœ°å€ç©ºé—´ï¼ˆé‡‡ç”¨128ä½åœ°å€ï¼‰â‘¡çµæ´»çš„é¦–éƒ¨æ ¼å¼â‘¢æ”¹è¿›çš„é€‰é¡¹â‘£æ”¯æŒå³æ’å³ç”¨â‘¤æ”¯æŒèµ„æºçš„é¢„åˆ†é…â‘¥IPv6çš„é¦–éƒ¨æ”¹ä¸º8å­—èŠ‚å¯¹é½ã€‚å¦å¤–IPæ•°æ®æŠ¥çš„ç›®çš„åœ°å€å¯ä»¥æ˜¯ä»¥ä¸‹ä¸‰ç§åŸºæœ¬ç±»å‹åœ°å€ä¹‹ä¸€ï¼šå•æ’­ï¼Œå¤šæ’­å’Œä»»æ’­ 9ï¼Œè™šæ‹Ÿä¸“ç”¨ç½‘ç»œVPNåˆ©ç”¨å…¬ç”¨çš„äº’è”ç½‘ä½œä¸ºæœ¬æœºæ„ä¸“ç”¨ç½‘ä¹‹é—´çš„é€šä¿¡è½½ä½“ã€‚VPNå†…ä½¿ç”¨äº’è”ç½‘çš„ä¸“ç”¨åœ°å€ã€‚ä¸€ä¸ªVPNè‡³å°‘è¦æœ‰ä¸€ä¸ªè·¯ç”±å™¨å…·æœ‰åˆæ³•çš„å…¨çƒIPåœ°å€ï¼Œè¿™æ ·æ‰èƒ½å’Œæœ¬ç³»ç»Ÿçš„å¦ä¸€ä¸ªVPNé€šè¿‡äº’è”ç½‘è¿›è¡Œé€šä¿¡ã€‚æ‰€æœ‰é€šè¿‡äº’è”ç½‘ä¼ é€çš„æ•°æ®éƒ½éœ€è¦åŠ å¯† 10ï¼Œ MPLSçš„ç‰¹ç‚¹æ˜¯ï¼šâ‘ æ”¯æŒé¢å‘è¿æ¥çš„æœåŠ¡è´¨é‡â‘¡æ”¯æŒæµé‡å·¥ç¨‹ï¼Œå¹³è¡¡ç½‘ç»œè´Ÿè½½â‘¢æœ‰æ•ˆçš„æ”¯æŒè™šæ‹Ÿä¸“ç”¨ç½‘VPNã€‚MPLSåœ¨å…¥å£èŠ‚ç‚¹ç»™æ¯ä¸€ä¸ªIPæ•°æ®æŠ¥æ‰“ä¸Šå›ºå®šé•¿åº¦çš„â€œæ ‡è®°â€ï¼Œç„¶åæ ¹æ®æ ‡è®°åœ¨ç¬¬äºŒå±‚ï¼ˆé“¾è·¯å±‚ï¼‰ç”¨ç¡¬ä»¶è¿›è¡Œè½¬å‘ï¼ˆåœ¨æ ‡è®°äº¤æ¢è·¯ç”±å™¨ä¸­è¿›è¡Œæ ‡è®°äº¤æ¢ï¼‰ï¼Œå› è€Œè½¬å‘é€Ÿç‡å¤§å¤§åŠ å¿«ã€‚ ï¼ˆ3ï¼‰ï¼Œæœ€é‡è¦çŸ¥è¯†ç‚¹â‘  è™šæ‹Ÿäº’è”ç½‘ç»œçš„æ¦‚å¿µâ‘¡ IPåœ°å€å’Œç‰©ç†åœ°å€çš„å…³ç³»â‘¢ ä¼ ç»Ÿçš„åˆ†ç±»çš„IPåœ°å€ï¼ˆåŒ…æ‹¬å­ç½‘æ©ç ï¼‰å’Œè¯¯åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹©CIDRâ‘£ è·¯ç”±é€‰æ‹©åè®®çš„å·¥ä½œåŸç†äº”è¿è¾“å±‚ï¼ˆ1ï¼‰ï¼ŒåŸºæœ¬æœ¯è¯­è¿›ç¨‹ï¼ˆprocessï¼‰ï¼šæŒ‡è®¡ç®—æœºä¸­æ­£åœ¨è¿è¡Œçš„ç¨‹åºå®ä½“åº”ç”¨è¿›ç¨‹äº’ç›¸é€šä¿¡ï¼šä¸€å°ä¸»æœºçš„è¿›ç¨‹å’Œå¦ä¸€å°ä¸»æœºä¸­çš„ä¸€ä¸ªè¿›ç¨‹äº¤æ¢æ•°æ®çš„è¿‡ç¨‹ï¼ˆå¦å¤–æ³¨æ„é€šä¿¡çœŸæ­£çš„ç«¯ç‚¹ä¸æ˜¯ä¸»æœºè€Œæ˜¯ä¸»æœºä¸­çš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ç«¯åˆ°ç«¯çš„é€šä¿¡æ˜¯åº”ç”¨è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼‰ä¼ è¾“å±‚çš„å¤ç”¨ä¸åˆ†ç”¨ï¼šå¤ç”¨æŒ‡å‘é€æ–¹ä¸åŒçš„è¿›ç¨‹éƒ½å¯ä»¥é€šè¿‡ç»Ÿä¸€ä¸ªè¿è¾“å±‚åè®®ä¼ é€æ•°æ®ã€‚åˆ†ç”¨æŒ‡æ¥æ”¶æ–¹çš„è¿è¾“å±‚åœ¨å‰¥å»æŠ¥æ–‡çš„é¦–éƒ¨åèƒ½æŠŠè¿™äº›æ•°æ®æ­£ç¡®çš„äº¤ä»˜åˆ°ç›®çš„åº”ç”¨è¿›ç¨‹ã€‚ TCPï¼ˆTransmission Control Protocolï¼‰ï¼šä¼ è¾“æ§åˆ¶åè®®UDPï¼ˆUser Datagram Protocolï¼‰ï¼šç”¨æˆ·æ•°æ®æŠ¥åè®®ç«¯å£ï¼ˆportï¼‰ï¼ˆlinkï¼‰ï¼šç«¯å£çš„ç›®çš„æ˜¯ä¸ºäº†ç¡®è®¤å¯¹æ–¹æœºå™¨æ˜¯é‚£ä¸ªè¿›ç¨‹åœ¨äºè‡ªå·±è¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚MSNå’ŒQQçš„ç«¯å£ä¸åŒï¼Œå¦‚æœæ²¡æœ‰ç«¯å£å°±å¯èƒ½å‡ºç°QQè¿›ç¨‹å’ŒMSNäº¤äº’é”™è¯¯ã€‚ç«¯å£åˆç§°åè®®ç«¯å£å·ã€‚ åœæ­¢ç­‰å¾…åè®®ï¼ˆlinkï¼‰ï¼šæŒ‡å‘é€æ–¹æ¯å‘é€å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤ï¼Œåœ¨æ”¶åˆ°ç¡®è®¤ä¹‹ååœ¨å‘é€ä¸‹ä¸€ä¸ªåˆ†ç»„ã€‚æµé‡æ§åˆ¶ï¼ˆlinkï¼‰ï¼šå°±æ˜¯è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œæ—¢è¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ï¼Œä¹Ÿä¸è¦ä½¿ç½‘ç»œå‘ç”Ÿæ‹¥å¡ã€‚æ‹¥å¡æ§åˆ¶ï¼ˆlinkï¼‰ï¼šé˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œè¿™æ ·å¯ä»¥ä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨æˆ–é“¾è·¯ä¸è‡´è¿‡è½½ã€‚æ‹¥å¡æ§åˆ¶æ‰€è¦åšçš„éƒ½æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯ç½‘ç»œèƒ½å¤Ÿæ‰¿å—ç°æœ‰çš„ç½‘ç»œè´Ÿè·ã€‚ï¼ˆ2ï¼‰ï¼Œé‡è¦çŸ¥è¯†ç‚¹æ€»ç»“1ï¼Œè¿è¾“å±‚æä¾›åº”ç”¨è¿›ç¨‹ä¹‹é—´çš„é€»è¾‘é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿è¾“å±‚ä¹‹é—´çš„é€šä¿¡å¹¶ä¸æ˜¯çœŸæ­£åœ¨ä¸¤ä¸ªè¿è¾“å±‚ä¹‹é—´ç›´æ¥ä¼ è¾“æ•°æ®ã€‚è¿è¾“å±‚å‘åº”ç”¨å±‚å±è”½äº†ä¸‹é¢ç½‘ç»œçš„ç»†èŠ‚ï¼ˆå¦‚ç½‘ç»œæ‹“è¡¥ï¼Œæ‰€é‡‡ç”¨çš„è·¯ç”±é€‰æ‹©åè®®ç­‰ï¼‰ï¼Œå®ƒä½¿åº”ç”¨è¿›ç¨‹ä¹‹é—´çœ‹èµ·æ¥å¥½åƒä¸¤ä¸ªè¿è¾“å±‚å®ä½“ä¹‹é—´æœ‰ä¸€æ¡ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ä¿¡é“ã€‚ 2ï¼Œç½‘ç»œå±‚ä¸ºä¸»æœºæä¾›é€»è¾‘é€šä¿¡ï¼Œè€Œè¿è¾“å±‚ä¸ºåº”ç”¨è¿›ç¨‹ä¹‹é—´æä¾›ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ã€‚ 3ï¼Œè¿è¾“å±‚çš„ä¸¤ä¸ªé‡è¦åè®®æ˜¯ç”¨æˆ·æ•°æ®æŠ¥åè®®UDPå’Œä¼ è¾“æ§åˆ¶åè®®TCPã€‚æŒ‰ç…§OSIçš„æœ¯è¯­ï¼Œä¸¤ä¸ªå¯¹ç­‰è¿è¾“å®ä½“åœ¨é€šä¿¡æ—¶ä¼ é€çš„æ•°æ®å•ä½å«åšè¿è¾“åè®®æ•°æ®å•å…ƒTPDUï¼ˆTransport Protocol Data Unitï¼‰ã€‚ä½†åœ¨TCP/IPä½“ç³»ä¸­ï¼Œåˆ™æ ¹æ®æ‰€ä½¿ç”¨çš„åè®®æ˜¯TCPæˆ–UDPï¼Œåˆ†åˆ«ç§°ä¹‹ä¸ºTCPæŠ¥æ–‡æ®µæˆ–UDPç”¨æˆ·æ•°æ®æŠ¥ã€‚ 4ï¼ŒUDPåœ¨ä¼ é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å…ˆå»ºç«‹è¿æ¥ï¼Œè¿œåœ°ä¸»æœºåœ¨æ”¶åˆ°UDPæŠ¥æ–‡åï¼Œä¸éœ€è¦ç»™å‡ºä»»ä½•ç¡®è®¤ã€‚è™½ç„¶UDPä¸æä¾›å¯é äº¤ä»˜ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹UDPç¡®æ˜¯ä¸€ç§æœ€æœ‰æ•ˆçš„å·¥ä½œæ–¹å¼ã€‚ TCPæä¾›é¢å‘è¿æ¥çš„æœåŠ¡ã€‚åœ¨ä¼ é€æ•°æ®ä¹‹å‰å¿…é¡»å…ˆå»ºç«‹è¿æ¥ï¼Œæ•°æ®ä¼ é€ç»“æŸåè¦é‡Šæ”¾è¿æ¥ã€‚TCPä¸æä¾›å¹¿æ’­æˆ–å¤šæ’­æœåŠ¡ã€‚ç”±äºTCPè¦æä¾›å¯é çš„ï¼Œé¢å‘è¿æ¥çš„ä¼ è¾“æœåŠ¡ï¼Œè¿™ä¸€éš¾ä»¥é¿å…å¢åŠ äº†è®¸å¤šå¼€é”€ï¼Œå¦‚ç¡®è®¤ï¼Œæµé‡æ§åˆ¶ï¼Œè®¡æ—¶å™¨ä»¥åŠè¿æ¥ç®¡ç†ç­‰ã€‚è¿™ä¸ä»…ä½¿åè®®æ•°æ®å•å…ƒçš„é¦–éƒ¨å¢å¤§å¾ˆå¤šï¼Œè¿˜è¦å ç”¨è®¸å¤šå¤„ç†æœºèµ„æºã€‚ 5ï¼Œç¡¬ä»¶ç«¯å£æ˜¯ä¸åŒç¡¬ä»¶è®¾å¤‡è¿›è¡Œäº¤äº’çš„æ¥å£ï¼Œè€Œè½¯ä»¶ç«¯å£æ˜¯åº”ç”¨å±‚å„ç§åè®®è¿›ç¨‹ä¸è¿è¾“å®ä½“è¿›è¡Œå±‚é—´äº¤äº’çš„ä¸€ç§åœ°å€ã€‚UDPå’ŒTCPçš„é¦–éƒ¨æ ¼å¼ä¸­éƒ½æœ‰æºç«¯å£å’Œç›®çš„ç«¯å£è¿™ä¸¤ä¸ªé‡è¦å­—æ®µã€‚å½“è¿è¾“å±‚æ”¶åˆ°IPå±‚äº¤ä¸Šæ¥çš„è¿è¾“å±‚æŠ¥æ–‡æ—¶ï¼Œå°±èƒ½å¤Ÿ æ ¹æ®å…¶é¦–éƒ¨ä¸­çš„ç›®çš„ç«¯å£å·æŠŠæ•°æ®äº¤ä»˜åº”ç”¨å±‚çš„ç›®çš„åº”ç”¨å±‚ã€‚ï¼ˆä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ä¸å…‰è¦çŸ¥é“å¯¹æ–¹IPåœ°å€è€Œä¸”è¦çŸ¥é“å¯¹æ–¹çš„ç«¯å£å·(ä¸ºäº†æ‰¾åˆ°å¯¹æ–¹è®¡ç®—æœºä¸­çš„åº”ç”¨è¿›ç¨‹)ï¼‰ 6ï¼Œè¿è¾“å±‚ç”¨ä¸€ä¸ª16ä½ç«¯å£å·æ ‡å¿—ä¸€ä¸ªç«¯å£ã€‚ç«¯å£å·åªæœ‰æœ¬åœ°æ„ä¹‰ï¼Œå®ƒåªæ˜¯ä¸ºäº†æ ‡å¿—è®¡ç®—æœºåº”ç”¨å±‚ä¸­çš„å„ä¸ªè¿›ç¨‹åœ¨å’Œè¿è¾“å±‚äº¤äº’æ—¶çš„å±‚é—´æ¥å£ã€‚åœ¨äº’è”ç½‘çš„ä¸åŒè®¡ç®—æœºä¸­ï¼Œç›¸åŒçš„ç«¯å£å·æ˜¯æ²¡æœ‰å…³è”çš„ã€‚åè®®ç«¯å£å·ç®€ç§°ç«¯å£ã€‚è™½ç„¶é€šä¿¡çš„ç»ˆç‚¹æ˜¯åº”ç”¨è¿›ç¨‹ï¼Œä½†åªè¦æŠŠæ‰€å‘é€çš„æŠ¥æ–‡äº¤åˆ°ç›®çš„ä¸»æœºçš„æŸä¸ªåˆé€‚ç«¯å£ï¼Œå‰©ä¸‹çš„å·¥ä½œï¼ˆæœ€åäº¤ä»˜ç›®çš„è¿›ç¨‹ï¼‰å°±ç”±TCPå’ŒUDPæ¥å®Œæˆã€‚ 7ï¼Œè¿è¾“å±‚çš„ç«¯å£å·åˆ†ä¸ºæœåŠ¡å™¨ç«¯ä½¿ç”¨çš„ç«¯å£å·ï¼ˆ01023æŒ‡æ´¾ç»™ç†ŸçŸ¥ç«¯å£ï¼Œ102449151æ˜¯ç™»è®°ç«¯å£å·ï¼‰å’Œå®¢æˆ·ç«¯æš‚æ—¶ä½¿ç”¨çš„ç«¯å£å·ï¼ˆ49152~65535ï¼‰ 8ï¼ŒUDPçš„ä¸»è¦ç‰¹ç‚¹æ˜¯â‘ æ— è¿æ¥â‘¡å°½æœ€å¤§åŠªåŠ›äº¤ä»˜â‘¢é¢å‘æŠ¥æ–‡â‘£æ— æ‹¥å¡æ§åˆ¶â‘¤æ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡â‘¥é¦–éƒ¨å¼€é”€å°ï¼ˆåªæœ‰å››ä¸ªå­—æ®µï¼šæºç«¯å£ï¼Œç›®çš„ç«¯å£ï¼Œé•¿åº¦å’Œæ£€éªŒå’Œï¼‰ 9ï¼ŒTCPçš„ä¸»è¦ç‰¹ç‚¹æ˜¯â‘ é¢å‘è¿æ¥â‘¡æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ä¸€å¯¹ä¸€çš„â‘¢æä¾›å¯é äº¤ä»˜â‘£æä¾›å…¨åŒå·¥é€šä¿¡â‘¤é¢å‘å­—èŠ‚æµ 10ï¼ŒTCPç”¨ä¸»æœºçš„IPåœ°å€åŠ ä¸Šä¸»æœºä¸Šçš„ç«¯å£å·ä½œä¸ºTCPè¿æ¥çš„ç«¯ç‚¹ã€‚è¿™æ ·çš„ç«¯ç‚¹å°±å«åšå¥—æ¥å­—ï¼ˆsocketï¼‰æˆ–æ’å£ã€‚å¥—æ¥å­—ç”¨ï¼ˆIPåœ°å€ï¼šç«¯å£å·ï¼‰æ¥è¡¨ç¤ºã€‚æ¯ä¸€æ¡TCPè¿æ¥å”¯ä¸€è¢«é€šä¿¡ä¸¤ç«¯çš„ä¸¤ä¸ªç«¯ç‚¹æ‰€ç¡®å®šã€‚ 11ï¼Œåœæ­¢ç­‰å¾…åè®®æ˜¯ä¸ºäº†å®ç°å¯é ä¼ è¾“çš„ï¼Œå®ƒçš„åŸºæœ¬åŸç†å°±æ˜¯æ¯å‘å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚åœ¨æ”¶åˆ°ç¡®è®¤åå†å‘ä¸‹ä¸€ä¸ªåˆ†ç»„ã€‚ 12ï¼Œä¸ºäº†æé«˜ä¼ è¾“æ•ˆç‡ï¼Œå‘é€æ–¹å¯ä»¥ä¸ä½¿ç”¨ä½æ•ˆç‡çš„åœæ­¢ç­‰å¾…åè®®ï¼Œè€Œæ˜¯é‡‡ç”¨æµæ°´çº¿ä¼ è¾“ã€‚æµæ°´çº¿ä¼ è¾“å°±æ˜¯å‘é€æ–¹å¯è¿ç»­å‘é€å¤šä¸ªåˆ†ç»„ï¼Œä¸å¿…æ¯å‘å®Œä¸€ä¸ªåˆ†ç»„å°±åœä¸‹æ¥ç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚è¿™æ ·å¯ä½¿ä¿¡é“ä¸Šä¸€ç›´æœ‰æ•°æ®ä¸é—´æ–­çš„åœ¨ä¼ é€ã€‚è¿™ç§ä¼ è¾“æ–¹å¼å¯ä»¥æ˜æ˜¾æé«˜ä¿¡é“åˆ©ç”¨ç‡ã€‚ 13ï¼Œåœæ­¢ç­‰å¾…åè®®ä¸­è¶…æ—¶é‡ä¼ æ˜¯æŒ‡åªè¦è¶…è¿‡ä¸€æ®µæ—¶é—´ä»ç„¶æ²¡æœ‰æ”¶åˆ°ç¡®è®¤ï¼Œå°±é‡ä¼ å‰é¢å‘é€è¿‡çš„åˆ†ç»„ï¼ˆè®¤ä¸ºåˆšæ‰å‘é€è¿‡çš„åˆ†ç»„ä¸¢å¤±äº†ï¼‰ã€‚å› æ­¤æ¯å‘é€å®Œä¸€ä¸ªåˆ†ç»„éœ€è¦è®¾ç½®ä¸€ä¸ªè¶…æ—¶è®¡æ—¶å™¨ï¼Œå…¶é‡è½¬æ—¶é—´åº”æ¯”æ•°æ®åœ¨åˆ†ç»„ä¼ è¾“çš„å¹³å‡å¾€è¿”æ—¶é—´æ›´é•¿ä¸€äº›ã€‚è¿™ç§è‡ªåŠ¨é‡ä¼ æ–¹å¼å¸¸ç§°ä¸ºè‡ªåŠ¨é‡ä¼ è¯·æ±‚ARQã€‚å¦å¤–åœ¨åœæ­¢ç­‰å¾…åè®®ä¸­è‹¥æ”¶åˆ°é‡å¤åˆ†ç»„ï¼Œå°±ä¸¢å¼ƒè¯¥åˆ†ç»„ï¼Œä½†åŒæ—¶è¿˜è¦å‘é€ç¡®è®¤ã€‚è¿ç»­ARQåè®®å¯æé«˜ä¿¡é“åˆ©ç”¨ç‡ã€‚å‘é€ç»´æŒä¸€ä¸ªå‘é€çª—å£ï¼Œå‡¡ä½äºå‘é€çª—å£å†…çš„åˆ†ç»„å¯è¿ç»­å‘é€å‡ºå»ï¼Œè€Œä¸éœ€è¦ç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚æ¥æ”¶æ–¹ä¸€èˆ¬é‡‡ç”¨ç´¯ç§¯ç¡®è®¤ï¼Œå¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åä¸€ä¸ªåˆ†ç»„å‘é€ç¡®è®¤ï¼Œè¡¨æ˜åˆ°è¿™ä¸ªåˆ†ç»„ä½ç½®çš„æ‰€æœ‰åˆ†ç»„éƒ½å·²ç»æ­£ç¡®æ”¶åˆ°äº†ã€‚ 14ï¼ŒTCPæŠ¥æ–‡æ®µçš„å‰20ä¸ªå­—èŠ‚æ˜¯å›ºå®šçš„ï¼Œåé¢æœ‰4nå­—èŠ‚æ˜¯æ ¹æ®éœ€è¦å¢åŠ çš„é€‰é¡¹ã€‚å› æ­¤ï¼ŒTCPé¦–éƒ¨çš„æœ€å°é•¿åº¦æ˜¯20å­—èŠ‚ã€‚ 15ï¼ŒTCPä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶ã€‚å‘é€çª—å£é‡Œé¢çš„åºå·è¡¨ç¤ºå…è®¸å‘é€çš„åºå·ã€‚å‘é€çª—å£åæ²¿çš„åé¢éƒ¨åˆ†è¡¨ç¤ºå·²å‘é€ä¸”å·²æ”¶åˆ°ç¡®è®¤ï¼Œè€Œå‘é€çª—å£å‰æ²¿çš„å‰é¢éƒ¨åˆ†è¡¨ç¤ºä¸æ™•ä¸å‘é€ã€‚å‘é€çª—å£åæ²¿çš„å˜åŒ–æƒ…å†µæœ‰ä¸¤ç§å¯èƒ½ï¼Œå³ä¸åŠ¨ï¼ˆæ²¡æœ‰æ”¶åˆ°æ–°çš„ç¡®è®¤ï¼‰å’Œå‰ç§»ï¼ˆæ”¶åˆ°äº†æ–°çš„ç¡®è®¤ï¼‰ã€‚å‘é€çª—å£çš„å‰æ²¿é€šå¸¸æ˜¯ä¸æ–­å‘å‰ç§»åŠ¨çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬æ€»æ˜¯å¸Œæœ›æ•°æ®ä¼ è¾“æ›´å¿«ä¸€äº›ã€‚ä½†å¦‚æœå‘é€æ–¹æŠŠæ•°æ®å‘é€çš„è¿‡å¿«ï¼Œæ¥æ”¶æ–¹å°±å¯èƒ½æ¥ä¸åŠæ¥æ”¶ï¼Œè¿™å°±ä¼šé€ æˆæ•°æ®çš„ä¸¢å¤±ã€‚æ‰€è°“æµé‡æ§åˆ¶å°±æ˜¯è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œè¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ã€‚ 16ï¼Œåœ¨æŸæ®µæ—¶é—´ï¼Œè‹¥å¯¹ç½‘ç»œä¸­æŸä¸€èµ„æºçš„éœ€æ±‚è¶…è¿‡äº†è¯¥èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œç½‘ç»œçš„æ€§èƒ½å°±è¦å˜åã€‚è¿™ç§æƒ…å†µå°±å«æ‹¥å¡ã€‚æ‹¥å¡æ§åˆ¶å°±æ˜¯ä¸ºäº†é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨æˆ–é“¾è·¯ä¸è‡´è¿‡è½½ã€‚æ‹¥å¡æ§åˆ¶æ‰€è¦åšçš„éƒ½æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯ç½‘ç»œèƒ½å¤Ÿæ‰¿å—ç°æœ‰çš„ç½‘ç»œè´Ÿè·ã€‚æ‹¥å¡æ§åˆ¶æ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„è¿‡ç¨‹ï¼Œæ¶‰åŠåˆ°æ‰€æœ‰çš„ä¸»æœºï¼Œæ‰€æœ‰çš„è·¯ç”±å™¨ï¼Œä»¥åŠä¸é™ä½ç½‘ç»œä¼ è¾“æ€§èƒ½æœ‰å…³çš„æ‰€æœ‰å› ç´ ã€‚ç›¸åï¼Œæµé‡æ§åˆ¶å¾€å¾€æ˜¯ç‚¹å¯¹ç‚¹é€šä¿¡é‡çš„æ§åˆ¶ï¼Œæ˜¯ä¸ªç«¯åˆ°ç«¯çš„é—®é¢˜ã€‚æµé‡æ§åˆ¶æ‰€è¦åšåˆ°çš„å°±æ˜¯æŠ‘åˆ¶å‘é€ç«¯å‘é€æ•°æ®çš„é€Ÿç‡ï¼Œä»¥ä¾¿ä½¿æ¥æ”¶ç«¯æ¥å¾—åŠæ¥æ”¶ã€‚ 17ï¼Œä¸ºäº†è¿›è¡Œæ‹¥å¡æ§åˆ¶ï¼ŒTCPå‘é€æ–¹è¦ç»´æŒä¸€ä¸ªæ‹¥å¡çª—å£cwndçš„çŠ¶æ€å˜é‡ã€‚æ‹¥å¡æ§åˆ¶çª—å£çš„å¤§å°å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åŠ¨æ€å˜åŒ–ã€‚å‘é€æ–¹è®©è‡ªå·±çš„å‘é€çª—å£å–ä¸ºæ‹¥å¡çª—å£å’Œæ¥æ”¶æ–¹çš„æ¥å—çª—å£ä¸­è¾ƒå°çš„ä¸€ä¸ªã€‚ 18ï¼ŒTCPçš„æ‹¥å¡æ§åˆ¶é‡‡ç”¨äº†å››ç§ç®—æ³•ï¼Œå³æ…¢å¼€å§‹ï¼Œæ‹¥å¡é¿å…ï¼Œå¿«é‡ä¼ å’Œå¿«æ¢å¤ã€‚åœ¨ç½‘ç»œå±‚ä¹Ÿå¯ä»¥ä½¿è·¯ç”±å™¨é‡‡ç”¨é€‚å½“çš„åˆ†ç»„ä¸¢å¼ƒç­–ç•¥ï¼ˆå¦‚ä¸»åŠ¨é˜Ÿåˆ—ç®¡ç†AQMï¼‰ï¼Œä»¥å‡å°‘ç½‘ç»œæ‹¥å¡çš„å‘ç”Ÿã€‚ 19ï¼Œè¿è¾“è¿æ¥çš„ä¸‰ä¸ªé˜¶æ®µï¼Œå³ï¼šè¿æ¥å»ºç«‹ï¼Œæ•°æ®ä¼ é€å’Œè¿æ¥é‡Šæ”¾ã€‚ 20ï¼Œä¸»åŠ¨å‘èµ·TCPè¿æ¥å»ºç«‹çš„åº”ç”¨è¿›ç¨‹å«åšå®¢æˆ·ï¼Œè€Œè¢«åŠ¨ç­‰å¾…è¿æ¥å»ºç«‹çš„åº”ç”¨è¿›ç¨‹å«åšæœåŠ¡å™¨ã€‚TCPè¿æ¥é‡‡ç”¨ä¸‰æŠ¥æ–‡æ¡æ‰‹æœºåˆ¶ã€‚æœåŠ¡å™¨è¦ç¡®è®¤ç”¨æˆ·çš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå®¢æˆ·è¦å¯¹æœåŠ¡å™¨çš„ç¡®è®¤è¿›è¡Œç¡®è®¤ã€‚ 21ï¼ŒTCPçš„è¿æ¥é‡Šæ”¾é‡‡ç”¨å››æŠ¥æ–‡æ¡æ‰‹æœºåˆ¶ã€‚ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥åœ¨æ•°æ®ä¼ é€ç»“æŸåå‘å‡ºè¿æ¥é‡Šæ”¾çš„é€šçŸ¥ï¼Œå¾…å¯¹æ–¹ç¡®è®¤åè¿›å…¥åŠå…³é—­çŠ¶æ€ã€‚å½“å¦ä¸€æ–¹ä¹Ÿæ²¡æœ‰æ•°æ®å†å‘é€æ—¶ï¼Œåˆ™å‘é€è¿æ¥é‡Šæ”¾é€šçŸ¥ï¼Œå¯¹æ–¹ç¡®è®¤åå°±å®Œå…¨å…³é—­äº†TCPè¿æ¥ ï¼ˆ3ï¼‰ï¼Œæœ€é‡è¦çš„çŸ¥è¯†ç‚¹â‘  ç«¯å£å’Œå¥—æ¥å­—çš„æ„ä¹‰â‘¡ æ— è¿æ¥UDPçš„ç‰¹ç‚¹â‘¢ é¢å‘è¿æ¥TCPçš„ç‰¹ç‚¹â‘£ åœ¨ä¸å¯é çš„ç½‘ç»œä¸Šå®ç°å¯é ä¼ è¾“çš„å·¥ä½œåŸç†ï¼Œåœæ­¢ç­‰å¾…åè®®å’ŒARQåè®®â‘  TCPçš„æ»‘åŠ¨çª—å£ï¼Œæµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶å’Œè¿æ¥ç®¡ç†å…­åº”ç”¨å±‚ï¼ˆ1ï¼‰ï¼ŒåŸºæœ¬æœ¯è¯­ åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰ï¼šDNSï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰ï¼Œä¸‡ç»´ç½‘ä¸Šä½œä¸ºåŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿ç”¨æˆ·æ›´æ–¹ä¾¿çš„è®¿é—®äº’è”ç½‘ï¼Œè€Œä¸ç”¨å»è®°ä½èƒ½å¤Ÿè¢«æœºå™¨ç›´æ¥è¯»å–çš„IPæ•°ä¸²ã€‚ é€šè¿‡åŸŸåï¼Œæœ€ç»ˆå¾—åˆ°è¯¥åŸŸåå¯¹åº”çš„IPåœ°å€çš„è¿‡ç¨‹å«åšåŸŸåè§£æï¼ˆæˆ–ä¸»æœºåè§£æï¼‰ã€‚DNSåè®®è¿è¡Œåœ¨UDPåè®®ä¹‹ä¸Šï¼Œä½¿ç”¨ç«¯å£å·53ã€‚åœ¨RFCæ–‡æ¡£ä¸­RFC 2181å¯¹DNSæœ‰è§„èŒƒè¯´æ˜ï¼ŒRFC 2136å¯¹DNSçš„åŠ¨æ€æ›´æ–°è¿›è¡Œè¯´æ˜ï¼ŒRFC 2308å¯¹DNSæŸ¥è¯¢çš„åå‘ç¼“å­˜è¿›è¡Œè¯´æ˜ã€‚ æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFTPï¼‰ï¼šFTP æ˜¯File TransferProtocolï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰çš„è‹±æ–‡ç®€ç§°ï¼Œè€Œä¸­æ–‡ç®€ç§°ä¸ºâ€œæ–‡ä¼ åè®®â€ã€‚ç”¨äºInternetä¸Šçš„æ§åˆ¶æ–‡ä»¶çš„åŒå‘ä¼ è¾“ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆApplicationï¼‰ã€‚ åŸºäºä¸åŒçš„æ“ä½œç³»ç»Ÿæœ‰ä¸åŒçš„FTPåº”ç”¨ç¨‹åºï¼Œè€Œæ‰€æœ‰è¿™äº›åº”ç”¨ç¨‹åºéƒ½éµå®ˆåŒä¸€ç§åè®®ä»¥ä¼ è¾“æ–‡ä»¶ã€‚åœ¨FTPçš„ä½¿ç”¨å½“ä¸­ï¼Œç”¨æˆ·ç»å¸¸é‡åˆ°ä¸¤ä¸ªæ¦‚å¿µï¼š&quot;ä¸‹è½½&quot;ï¼ˆDownloadï¼‰å’Œ&quot;ä¸Šä¼ &quot;ï¼ˆUploadï¼‰ã€‚ &quot;ä¸‹è½½&quot;æ–‡ä»¶å°±æ˜¯ä»è¿œç¨‹ä¸»æœºæ‹·è´æ–‡ä»¶è‡³è‡ªå·±çš„è®¡ç®—æœºä¸Šï¼›&quot;ä¸Šä¼ &quot;æ–‡ä»¶å°±æ˜¯å°†æ–‡ä»¶ä»è‡ªå·±çš„è®¡ç®—æœºä¸­æ‹·è´è‡³è¿œç¨‹ä¸»æœºä¸Šã€‚ç”¨Internetè¯­è¨€æ¥è¯´ï¼Œç”¨æˆ·å¯é€šè¿‡å®¢æˆ·æœºç¨‹åºå‘ï¼ˆä»ï¼‰è¿œç¨‹ä¸»æœºä¸Šä¼ ï¼ˆä¸‹è½½ï¼‰æ–‡ä»¶ã€‚ ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆTFTPï¼‰ï¼šTFTPï¼ˆTrivial File Transfer Protocol,ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯TCP/IPåè®®æ—ä¸­çš„ä¸€ä¸ªç”¨æ¥åœ¨å®¢æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ã€å¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚ç«¯å£å·ä¸º69ã€‚ è¿œç¨‹ç»ˆç«¯åè®®ï¼ˆTELENETï¼‰ï¼šTelnetåè®®æ˜¯TCP/IPåè®®æ—ä¸­çš„ä¸€å‘˜ï¼Œæ˜¯Internetè¿œç¨‹ç™»é™†æœåŠ¡çš„æ ‡å‡†åè®®å’Œä¸»è¦æ–¹å¼ã€‚å®ƒä¸ºç”¨æˆ·æä¾›äº†åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå®Œæˆè¿œç¨‹ä¸»æœºå·¥ä½œçš„èƒ½åŠ›ã€‚ åœ¨ç»ˆç«¯ä½¿ç”¨è€…çš„ç”µè„‘ä¸Šä½¿ç”¨telnetç¨‹åºï¼Œç”¨å®ƒè¿æ¥åˆ°æœåŠ¡å™¨ã€‚ç»ˆç«¯ä½¿ç”¨è€…å¯ä»¥åœ¨telnetç¨‹åºä¸­è¾“å…¥å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ä¼šåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå°±åƒç›´æ¥åœ¨æœåŠ¡å™¨çš„æ§åˆ¶å°ä¸Šè¾“å…¥ä¸€æ ·ã€‚ å¯ä»¥åœ¨æœ¬åœ°å°±èƒ½æ§åˆ¶æœåŠ¡å™¨ã€‚è¦å¼€å§‹ä¸€ä¸ªtelnetä¼šè¯ï¼Œå¿…é¡»è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ¥ç™»å½•æœåŠ¡å™¨ã€‚Telnetæ˜¯å¸¸ç”¨çš„è¿œç¨‹æ§åˆ¶WebæœåŠ¡å™¨çš„æ–¹æ³•ã€‚ ä¸‡ç»´ç½‘ï¼ˆWWWï¼‰ï¼šWWWæ˜¯ç¯çƒä¿¡æ¯ç½‘çš„ç¼©å†™ï¼Œï¼ˆäº¦ä½œâ€œWebâ€ã€â€œWWWâ€ã€â€œ&apos;W3&apos;â€ï¼Œè‹±æ–‡å…¨ç§°ä¸ºâ€œWorld Wide Webâ€ï¼‰ï¼Œä¸­æ–‡åå­—ä¸ºâ€œä¸‡ç»´ç½‘â€ï¼Œ&quot;ç¯çƒç½‘&quot;ç­‰ï¼Œå¸¸ç®€ç§°ä¸ºWebã€‚åˆ†ä¸ºWebå®¢æˆ·ç«¯å’ŒWebæœåŠ¡å™¨ç¨‹åºã€‚ WWWå¯ä»¥è®©Webå®¢æˆ·ç«¯ï¼ˆå¸¸ç”¨æµè§ˆå™¨ï¼‰è®¿é—®æµè§ˆWebæœåŠ¡å™¨ä¸Šçš„é¡µé¢ã€‚æ˜¯ä¸€ä¸ªç”±è®¸å¤šäº’ç›¸é“¾æ¥çš„è¶…æ–‡æœ¬ç»„æˆçš„ç³»ç»Ÿï¼Œé€šè¿‡äº’è”ç½‘è®¿é—®ã€‚åœ¨è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæœ‰ç”¨çš„äº‹ç‰©ï¼Œç§°ä¸ºä¸€æ ·â€œèµ„æºâ€ï¼›å¹¶ä¸”ç”±ä¸€ä¸ªå…¨å±€â€œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦â€ï¼ˆURIï¼‰æ ‡è¯†ï¼›è¿™äº›èµ„æºé€šè¿‡è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHypertext Transfer Protocolï¼‰ä¼ é€ç»™ç”¨æˆ·ï¼Œè€Œåè€…é€šè¿‡ç‚¹å‡»é“¾æ¥æ¥è·å¾—èµ„æºã€‚ ä¸‡ç»´ç½‘è”ç›Ÿï¼ˆè‹±è¯­ï¼šWorld Wide Web Consortiumï¼Œç®€ç§°W3Cï¼‰ï¼Œåˆç§°W3Cç†äº‹ä¼šã€‚1994å¹´10æœˆåœ¨éº»çœç†å·¥å­¦é™¢ï¼ˆMITï¼‰è®¡ç®—æœºç§‘å­¦å®éªŒå®¤æˆç«‹ã€‚ä¸‡ç»´ç½‘è”ç›Ÿçš„åˆ›å»ºè€…æ˜¯ä¸‡ç»´ç½‘çš„å‘æ˜è€…è’‚å§†Â·ä¼¯çº³æ–¯-æã€‚ ä¸‡ç»´ç½‘å¹¶ä¸ç­‰åŒäº’è”ç½‘ï¼Œä¸‡ç»´ç½‘åªæ˜¯äº’è”ç½‘æ‰€èƒ½æä¾›çš„æœåŠ¡å…¶ä¸­ä¹‹ä¸€ï¼Œæ˜¯é ç€äº’è”ç½‘è¿è¡Œçš„ä¸€é¡¹æœåŠ¡ã€‚ ä¸‡ç»´ç½‘çš„å¤§è‡´å·¥ä½œå·¥ç¨‹ï¼š ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦æ˜¯å¯¹å¯ä»¥ä»äº’è”ç½‘ä¸Šå¾—åˆ°çš„èµ„æºçš„ä½ç½®å’Œè®¿é—®æ–¹æ³•çš„ä¸€ç§ç®€æ´çš„è¡¨ç¤ºï¼Œæ˜¯äº’è”ç½‘ä¸Šæ ‡å‡†èµ„æºçš„åœ°å€ã€‚äº’è”ç½‘ä¸Šçš„æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„URLï¼Œå®ƒåŒ…å«çš„ä¿¡æ¯æŒ‡å‡ºæ–‡ä»¶çš„ä½ç½®ä»¥åŠæµè§ˆå™¨åº”è¯¥æ€ä¹ˆå¤„ç†å®ƒã€‚ è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰ï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼ŒHyperText Transfer Protocol)æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ã€‚æ‰€æœ‰çš„WWWæ–‡ä»¶éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚ è®¾è®¡HTTPæœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶HTMLé¡µé¢çš„æ–¹æ³•ã€‚1960å¹´ç¾å›½äººTed Nelsonæ„æ€äº†ä¸€ç§é€šè¿‡è®¡ç®—æœºå¤„ç†æ–‡æœ¬ä¿¡æ¯çš„æ–¹æ³•ï¼Œå¹¶ç§°ä¹‹ä¸ºè¶…æ–‡æœ¬ï¼ˆhypertextï¼‰,è¿™æˆä¸ºäº†HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®æ ‡å‡†æ¶æ„çš„å‘å±•æ ¹åŸºã€‚ ä»£ç†æœåŠ¡å™¨ï¼ˆProxy Serverï¼‰ï¼šä»£ç†æœåŠ¡å™¨ï¼ˆProxy Serverï¼‰æ˜¯ä¸€ç§ç½‘ç»œå®ä½“ï¼Œå®ƒåˆç§°ä¸ºä¸‡ç»´ç½‘é«˜é€Ÿç¼“å­˜ã€‚ ä»£ç†æœåŠ¡å™¨æŠŠæœ€è¿‘çš„ä¸€äº›è¯·æ±‚å’Œå“åº”æš‚å­˜åœ¨æœ¬åœ°ç£ç›˜ä¸­ã€‚å½“æ–°è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œè‹¥ä»£ç†æœåŠ¡å™¨å‘ç°è¿™ä¸ªè¯·æ±‚ä¸æš‚æ—¶å­˜æ”¾çš„çš„è¯·æ±‚ç›¸åŒï¼Œå°±è¿”å›æš‚å­˜çš„å“åº”ï¼Œè€Œä¸éœ€è¦æŒ‰URLçš„åœ°å€å†æ¬¡å»äº’è”ç½‘è®¿é—®è¯¥èµ„æºã€‚ ä»£ç†æœåŠ¡å™¨å¯åœ¨å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨å·¥ä½œï¼Œä¹Ÿå¯ä»¥åœ¨ä¸­é—´ç³»ç»Ÿå·¥ä½œã€‚ httpè¯·æ±‚å¤´ï¼šhttpè¯·æ±‚å¤´ï¼ŒHTTPå®¢æˆ·ç¨‹åºï¼ˆä¾‹å¦‚æµè§ˆå™¨ï¼‰ï¼Œå‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™å¿…é¡»æŒ‡æ˜è¯·æ±‚ç±»å‹ï¼ˆä¸€èˆ¬æ˜¯GETæˆ–è€…POSTï¼‰ã€‚å¦‚æœ‰å¿…è¦ï¼Œå®¢æˆ·ç¨‹åºè¿˜å¯ä»¥é€‰æ‹©å‘é€å…¶ä»–çš„è¯·æ±‚å¤´ã€‚ - Acceptï¼šæµè§ˆå™¨å¯æ¥å—çš„MIMEç±»å‹ã€‚ - Accept-Charsetï¼šæµè§ˆå™¨å¯æ¥å—çš„å­—ç¬¦é›†ã€‚ - Accept-Encodingï¼šæµè§ˆå™¨èƒ½å¤Ÿè¿›è¡Œè§£ç çš„æ•°æ®ç¼–ç æ–¹å¼ï¼Œæ¯”å¦‚gzipã€‚Servletèƒ½å¤Ÿå‘æ”¯æŒgzipçš„æµè§ˆå™¨è¿”å›ç»gzipç¼–ç çš„HTMLé¡µé¢ã€‚è®¸å¤šæƒ…å½¢ä¸‹è¿™å¯ä»¥å‡å°‘5åˆ°10å€çš„ä¸‹è½½æ—¶é—´ã€‚ - Accept-Languageï¼šæµè§ˆå™¨æ‰€å¸Œæœ›çš„è¯­è¨€ç§ç±»ï¼Œå½“æœåŠ¡å™¨èƒ½å¤Ÿæä¾›ä¸€ç§ä»¥ä¸Šçš„è¯­è¨€ç‰ˆæœ¬æ—¶è¦ç”¨åˆ°ã€‚ - Authorizationï¼šæˆæƒä¿¡æ¯ï¼Œé€šå¸¸å‡ºç°åœ¨å¯¹æœåŠ¡å™¨å‘é€çš„WWW-Authenticateå¤´çš„åº”ç­”ä¸­ã€‚ - Connectionï¼šè¡¨ç¤ºæ˜¯å¦éœ€è¦æŒä¹…è¿æ¥ã€‚å¦‚æœServletçœ‹åˆ°è¿™é‡Œçš„å€¼ä¸ºâ€œKeep-Aliveâ€ï¼Œæˆ–è€…çœ‹åˆ°è¯·æ±‚ä½¿ç”¨çš„æ˜¯HTTP 1.1ï¼ˆHTTP 1.1é»˜è®¤è¿›è¡ŒæŒä¹…è¿æ¥ï¼‰ï¼Œå®ƒå°±å¯ä»¥åˆ©ç”¨æŒä¹…è¿æ¥çš„ä¼˜ç‚¹ï¼Œå½“é¡µé¢åŒ…å«å¤šä¸ªå…ƒç´ æ—¶ï¼ˆä¾‹å¦‚Appletï¼Œå›¾ç‰‡ï¼‰ï¼Œæ˜¾è‘—åœ°å‡å°‘ä¸‹è½½æ‰€éœ€è¦çš„æ—¶é—´ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼ŒServletéœ€è¦åœ¨åº”ç­”ä¸­å‘é€ä¸€ä¸ªContent-Lengthå¤´ï¼Œæœ€ç®€å•çš„å®ç°æ–¹æ³•æ˜¯ï¼šå…ˆæŠŠå†…å®¹å†™å…¥ByteArrayOutputStreamï¼Œç„¶ååœ¨æ­£å¼å†™å‡ºå†…å®¹ä¹‹å‰è®¡ç®—å®ƒçš„å¤§å°ã€‚ - Content-Lengthï¼šè¡¨ç¤ºè¯·æ±‚æ¶ˆæ¯æ­£æ–‡çš„é•¿åº¦ã€‚ - Cookieï¼šè¿™æ˜¯æœ€é‡è¦çš„è¯·æ±‚å¤´ä¿¡æ¯ä¹‹ä¸€ - Fromï¼šè¯·æ±‚å‘é€è€…çš„emailåœ°å€ï¼Œç”±ä¸€äº›ç‰¹æ®Šçš„Webå®¢æˆ·ç¨‹åºä½¿ç”¨ï¼Œæµè§ˆå™¨ä¸ä¼šç”¨åˆ°å®ƒã€‚ - Hostï¼šåˆå§‹URLä¸­çš„ä¸»æœºå’Œç«¯å£ã€‚ - If-Modified-Sinceï¼šåªæœ‰å½“æ‰€è¯·æ±‚çš„å†…å®¹åœ¨æŒ‡å®šçš„æ—¥æœŸä¹‹ååˆç»è¿‡ä¿®æ”¹æ‰è¿”å›å®ƒï¼Œå¦åˆ™è¿”å›304â€œNot Modifiedâ€åº”ç­”ã€‚ - Pragmaï¼šæŒ‡å®šâ€œno-cacheâ€å€¼è¡¨ç¤ºæœåŠ¡å™¨å¿…é¡»è¿”å›ä¸€ä¸ªåˆ·æ–°åçš„æ–‡æ¡£ï¼Œå³ä½¿å®ƒæ˜¯ä»£ç†æœåŠ¡å™¨è€Œä¸”å·²ç»æœ‰äº†é¡µé¢çš„æœ¬åœ°æ‹·è´ã€‚ - Refererï¼šåŒ…å«ä¸€ä¸ªURLï¼Œç”¨æˆ·ä»è¯¥URLä»£è¡¨çš„é¡µé¢å‡ºå‘è®¿é—®å½“å‰è¯·æ±‚çš„é¡µé¢ã€‚ - User-Agentï¼šæµè§ˆå™¨ç±»å‹ï¼Œå¦‚æœServletè¿”å›çš„å†…å®¹ä¸æµè§ˆå™¨ç±»å‹æœ‰å…³åˆ™è¯¥å€¼éå¸¸æœ‰ç”¨ã€‚ç®€å•é‚®ä»¶ä¼ è¾“åè®®(SMTP)ï¼šSMTPï¼ˆSimple Mail Transfer Protocolï¼‰å³ç®€å•é‚®ä»¶ä¼ è¾“åè®®,å®ƒæ˜¯ä¸€ç»„ç”¨äºç”±æºåœ°å€åˆ°ç›®çš„åœ°å€ä¼ é€é‚®ä»¶çš„è§„åˆ™ï¼Œç”±å®ƒæ¥æ§åˆ¶ä¿¡ä»¶çš„ä¸­è½¬æ–¹å¼ã€‚ SMTPåè®®å±äºTCP/IPåè®®ç°‡ï¼Œå®ƒå¸®åŠ©æ¯å°è®¡ç®—æœºåœ¨å‘é€æˆ–ä¸­è½¬ä¿¡ä»¶æ—¶æ‰¾åˆ°ä¸‹ä¸€ä¸ªç›®çš„åœ°ã€‚ é€šè¿‡SMTPåè®®æ‰€æŒ‡å®šçš„æœåŠ¡å™¨,å°±å¯ä»¥æŠŠE-mailå¯„åˆ°æ”¶ä¿¡äººçš„æœåŠ¡å™¨ä¸Šäº†ï¼Œæ•´ä¸ªè¿‡ç¨‹åªè¦å‡ åˆ†é’Ÿã€‚SMTPæœåŠ¡å™¨åˆ™æ˜¯éµå¾ªSMTPåè®®çš„å‘é€é‚®ä»¶æœåŠ¡å™¨ï¼Œç”¨æ¥å‘é€æˆ–ä¸­è½¬å‘å‡ºçš„ç”µå­é‚®ä»¶ã€‚æœç´¢å¼•æ“ï¼šæœç´¢å¼•æ“ï¼ˆSearch Engineï¼‰æ˜¯æŒ‡æ ¹æ®ä¸€å®šçš„ç­–ç•¥ã€è¿ç”¨ç‰¹å®šçš„è®¡ç®—æœºç¨‹åºä»äº’è”ç½‘ä¸Šæœé›†ä¿¡æ¯ï¼Œåœ¨å¯¹ä¿¡æ¯è¿›è¡Œç»„ç»‡å’Œå¤„ç†åï¼Œä¸ºç”¨æˆ·æä¾›æ£€ç´¢æœåŠ¡ï¼Œå°†ç”¨æˆ·æ£€ç´¢ç›¸å…³çš„ä¿¡æ¯å±•ç¤ºç»™ç”¨æˆ·çš„ç³»ç»Ÿã€‚ æœç´¢å¼•æ“åŒ…æ‹¬å…¨æ–‡ç´¢å¼•ã€ç›®å½•ç´¢å¼•ã€å…ƒæœç´¢å¼•æ“ã€å‚ç›´æœç´¢å¼•æ“ã€é›†åˆå¼æœç´¢å¼•æ“ã€é—¨æˆ·æœç´¢å¼•æ“ä¸å…è´¹é“¾æ¥åˆ—è¡¨ç­‰ã€‚å…¨æ–‡ç´¢å¼•ï¼š å…¨æ–‡ç´¢å¼•æŠ€æœ¯æ˜¯ç›®å‰æœç´¢å¼•æ“çš„å…³é”®æŠ€æœ¯ã€‚ è¯•æƒ³åœ¨1Må¤§å°çš„æ–‡ä»¶ä¸­æœç´¢ä¸€ä¸ªè¯ï¼Œå¯èƒ½éœ€è¦å‡ ç§’ï¼Œåœ¨100Mçš„æ–‡ä»¶ä¸­å¯èƒ½éœ€è¦å‡ åç§’ï¼Œå¦‚æœåœ¨æ›´å¤§çš„æ–‡ä»¶ä¸­æœç´¢é‚£ä¹ˆå°±éœ€è¦æ›´å¤§çš„ç³»ç»Ÿå¼€é”€ï¼Œè¿™æ ·çš„å¼€é”€æ˜¯ä¸ç°å®çš„ã€‚ æ‰€ä»¥åœ¨è¿™æ ·çš„çŸ›ç›¾ä¸‹å‡ºç°äº†å…¨æ–‡ç´¢å¼•æŠ€æœ¯ï¼Œæœ‰æ—¶å€™æœ‰äººå«å€’æ’æ–‡æ¡£æŠ€æœ¯ã€‚ç›®å½•ç´¢å¼•ï¼šç›®å½•ç´¢å¼•ï¼ˆ search index/directory)ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å°†ç½‘ç«™åˆ†é—¨åˆ«ç±»åœ°å­˜æ”¾åœ¨ç›¸åº”çš„ç›®å½•ä¸­ï¼Œå› æ­¤ç”¨æˆ·åœ¨æŸ¥è¯¢ä¿¡æ¯æ—¶ï¼Œå¯é€‰æ‹©å…³é”®è¯æœç´¢ï¼Œä¹Ÿå¯æŒ‰åˆ†ç±»ç›®å½•é€å±‚æŸ¥æ‰¾ã€‚å‚ç›´æœç´¢å¼•æ“ï¼šå‚ç›´æœç´¢å¼•æ“æ˜¯é’ˆå¯¹æŸä¸€ä¸ªè¡Œä¸šçš„ä¸“ä¸šæœç´¢å¼•æ“ï¼Œæ˜¯æœç´¢å¼•æ“çš„ç»†åˆ†å’Œå»¶ä¼¸ï¼Œæ˜¯å¯¹ç½‘é¡µåº“ä¸­çš„æŸç±»ä¸“é—¨çš„ä¿¡æ¯è¿›è¡Œä¸€æ¬¡æ•´åˆï¼Œå®šå‘åˆ†å­—æ®µæŠ½å–å‡ºéœ€è¦çš„æ•°æ®è¿›è¡Œå¤„ç†åå†ä»¥æŸç§å½¢å¼è¿”å›ç»™ç”¨æˆ·ã€‚ å‚ç›´æœç´¢æ˜¯ç›¸å¯¹é€šç”¨æœç´¢å¼•æ“çš„ä¿¡æ¯é‡å¤§ã€æŸ¥è¯¢ä¸å‡†ç¡®ã€æ·±åº¦ä¸å¤Ÿç­‰æå‡ºæ¥çš„æ–°çš„æœç´¢å¼•æ“æœåŠ¡æ¨¡å¼ï¼Œé€šè¿‡é’ˆå¯¹æŸä¸€ç‰¹å®šé¢†åŸŸã€æŸä¸€ç‰¹å®šäººç¾¤æˆ–æŸä¸€ç‰¹å®šéœ€æ±‚æä¾›çš„æœ‰ä¸€å®šä»·å€¼çš„ä¿¡æ¯å’Œç›¸å…³æœåŠ¡ã€‚ å…¶ç‰¹ç‚¹å°±æ˜¯â€œä¸“ã€ç²¾ã€æ·±â€ï¼Œä¸”å…·æœ‰è¡Œä¸šè‰²å½©ï¼Œç›¸æ¯”è¾ƒé€šç”¨æœç´¢å¼•æ“çš„æµ·é‡ä¿¡æ¯æ— åºåŒ–ï¼Œå‚ç›´æœç´¢å¼•æ“åˆ™æ˜¾å¾—æ›´åŠ ä¸“æ³¨ã€å…·ä½“å’Œæ·±å…¥ã€‚ï¼ˆ2ï¼‰ï¼Œé‡è¦çŸ¥è¯†ç‚¹æ€»ç»“1ï¼Œæ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFTPï¼‰ä½¿ç”¨TCPå¯é çš„è¿è¾“æœåŠ¡ã€‚FTPä½¿ç”¨å®¢æˆ·æœåŠ¡å™¨æ–¹å¼ã€‚ä¸€ä¸ªFTPæœåŠ¡å™¨è¿›ç¨‹å¯ä»¥åŒæ—¶ä¸ºå¤šä¸ªç”¨æˆ·æä¾›æœåŠ¡ã€‚åœ¨è¿›è¿›è¡Œæ–‡ä»¶ä¼ è¾“æ—¶ï¼ŒFTPçš„å®¢æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´è¦å…ˆå»ºç«‹ä¸¤ä¸ªå¹¶è¡Œçš„TCPè¿æ¥:æ§åˆ¶è¿æ¥å’Œæ•°æ®è¿æ¥ã€‚å®é™…ç”¨äºä¼ è¾“æ–‡ä»¶çš„æ˜¯æ•°æ®è¿æ¥ã€‚ 2ï¼Œä¸‡ç»´ç½‘å®¢æˆ·ç¨‹åºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œäº¤äº’ä½¿ç”¨çš„åè®®æ—¶è¶…æ–‡æœ¬ä¼ è¾“åè®®HTTPã€‚HTTPä½¿ç”¨TCPè¿æ¥è¿›è¡Œå¯é ä¼ è¾“ã€‚ä½†HTTPæœ¬èº«æ˜¯æ— è¿æ¥ã€æ— çŠ¶æ€çš„ã€‚HTTP/1.1åè®®ä½¿ç”¨äº†æŒç»­è¿æ¥ï¼ˆåˆ†ä¸ºéæµæ°´çº¿æ–¹å¼å’Œæµæ°´çº¿æ–¹å¼ï¼‰ 3ï¼Œç”µå­é‚®ä»¶æŠŠé‚®ä»¶å‘é€åˆ°æ”¶ä»¶äººä½¿ç”¨çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œå¹¶æ”¾åœ¨å…¶ä¸­çš„æ”¶ä»¶äººé‚®ç®±ä¸­ï¼Œæ”¶ä»¶äººå¯éšæ—¶ä¸Šç½‘åˆ°è‡ªå·±ä½¿ç”¨çš„é‚®ä»¶æœåŠ¡å™¨è¯»å–ï¼Œç›¸å½“äºç”µå­é‚®ç®±ã€‚ 4ï¼Œä¸€ä¸ªç”µå­é‚®ä»¶ç³»ç»Ÿæœ‰ä¸‰ä¸ªé‡è¦ç»„æˆæ„ä»¶ï¼šç”¨æˆ·ä»£ç†ã€é‚®ä»¶æœåŠ¡å™¨ã€é‚®ä»¶åè®®ï¼ˆåŒ…æ‹¬é‚®ä»¶å‘é€åè®®ï¼Œå¦‚SMTPï¼Œå’Œé‚®ä»¶è¯»å–åè®®ï¼Œå¦‚POP3å’ŒIMAPï¼‰ã€‚ç”¨æˆ·ä»£ç†å’Œé‚®ä»¶æœåŠ¡å™¨éƒ½è¦è¿è¡Œè¿™äº›åè®®ã€‚ ï¼ˆ3ï¼‰ï¼Œæœ€é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“â‘  åŸŸåç³»ç»Ÿ-ä»åŸŸåè§£æå‡ºIPåœ°å€â‘¡ è®¿é—®ä¸€ä¸ªç½‘ç«™å¤§è‡´çš„è¿‡ç¨‹â‘¢ ç³»ç»Ÿè°ƒç”¨å’Œåº”ç”¨ç¼–ç¨‹æ¥å£æ¦‚å¿µ","categories":[],"tags":[{"name":"Http","slug":"Http","permalink":"http://zhoumoon.github.io/tags/Http/"}]},{"title":"ä¸€åƒè¡ŒMySQLå‘½ä»¤","slug":"ä¸€åƒè¡ŒMySQLå‘½ä»¤","date":"2018-02-03T23:11:02.000Z","updated":"2021-02-08T08:11:26.289Z","comments":false,"path":"2018/02/04/ä¸€åƒè¡ŒMySQLå‘½ä»¤/","link":"","permalink":"http://zhoumoon.github.io/2018/02/04/ä¸€åƒè¡ŒMySQLå‘½ä»¤/","excerpt":"","text":"éå¸¸ä¸é”™çš„æ€»ç»“ï¼Œå¼ºçƒˆå»ºè®®ä¿å­˜ä¸‹æ¥ï¼Œéœ€è¦çš„æ—¶å€™çœ‹ä¸€çœ‹ã€‚ åŸºæœ¬æ“ä½œ æ•°æ®åº“æ“ä½œ è¡¨çš„æ“ä½œ æ•°æ®æ“ä½œ å­—ç¬¦é›†ç¼–ç  æ•°æ®ç±»å‹(åˆ—ç±»å‹) åˆ—å±æ€§(åˆ—çº¦æŸ) å»ºè¡¨è§„èŒƒ SELECT UNION å­æŸ¥è¯¢ è¿æ¥æŸ¥è¯¢(join) TRUNCATE å¤‡ä»½ä¸è¿˜åŸ è§†å›¾ äº‹åŠ¡(transaction) é”è¡¨ è§¦å‘å™¨ SQLç¼–ç¨‹ å­˜å‚¨è¿‡ç¨‹ ç”¨æˆ·å’Œæƒé™ç®¡ç† è¡¨ç»´æŠ¤ æ‚é¡¹ åŸºæœ¬æ“ä½œ123456789/* WindowsæœåŠ¡ */-- å¯åŠ¨MySQL net start mysql-- åˆ›å»ºWindowsæœåŠ¡ sc create mysql binPath= mysqld_bin_path(æ³¨æ„ï¼šç­‰å·ä¸å€¼ä¹‹é—´æœ‰ç©ºæ ¼)/* è¿æ¥ä¸æ–­å¼€æœåŠ¡å™¨ */mysql -h åœ°å€ -P ç«¯å£ -u ç”¨æˆ·å -p å¯†ç SHOW PROCESSLIST -- æ˜¾ç¤ºå“ªäº›çº¿ç¨‹æ­£åœ¨è¿è¡ŒSHOW VARIABLES -- æ˜¾ç¤ºç³»ç»Ÿå˜é‡ä¿¡æ¯ æ•°æ®åº“æ“ä½œ12345678910111213141516171819/* æ•°æ®åº“æ“ä½œ */ -------------------- æŸ¥çœ‹å½“å‰æ•°æ®åº“ SELECT DATABASE();-- æ˜¾ç¤ºå½“å‰æ—¶é—´ã€ç”¨æˆ·åã€æ•°æ®åº“ç‰ˆæœ¬ SELECT now(), user(), version();-- åˆ›å»ºåº“ CREATE DATABASE[ IF NOT EXISTS] æ•°æ®åº“å æ•°æ®åº“é€‰é¡¹ æ•°æ®åº“é€‰é¡¹ï¼š CHARACTER SET charset_name COLLATE collation_name-- æŸ¥çœ‹å·²æœ‰åº“ SHOW DATABASES[ LIKE &apos;PATTERN&apos;]-- æŸ¥çœ‹å½“å‰åº“ä¿¡æ¯ SHOW CREATE DATABASE æ•°æ®åº“å-- ä¿®æ”¹åº“çš„é€‰é¡¹ä¿¡æ¯ ALTER DATABASE åº“å é€‰é¡¹ä¿¡æ¯-- åˆ é™¤åº“ DROP DATABASE[ IF EXISTS] æ•°æ®åº“å åŒæ—¶åˆ é™¤è¯¥æ•°æ®åº“ç›¸å…³çš„ç›®å½•åŠå…¶ç›®å½•å†…å®¹ è¡¨çš„æ“ä½œ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576-- åˆ›å»ºè¡¨ CREATE [TEMPORARY] TABLE[ IF NOT EXISTS] [åº“å.]è¡¨å ( è¡¨çš„ç»“æ„å®šä¹‰ )[ è¡¨é€‰é¡¹] æ¯ä¸ªå­—æ®µå¿…é¡»æœ‰æ•°æ®ç±»å‹ æœ€åä¸€ä¸ªå­—æ®µåä¸èƒ½æœ‰é€—å· TEMPORARY ä¸´æ—¶è¡¨ï¼Œä¼šè¯ç»“æŸæ—¶è¡¨è‡ªåŠ¨æ¶ˆå¤± å¯¹äºå­—æ®µçš„å®šä¹‰ï¼š å­—æ®µå æ•°æ®ç±»å‹ [NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY] [COMMENT &apos;string&apos;]-- è¡¨é€‰é¡¹ -- å­—ç¬¦é›† CHARSET = charset_name å¦‚æœè¡¨æ²¡æœ‰è®¾å®šï¼Œåˆ™ä½¿ç”¨æ•°æ®åº“å­—ç¬¦é›† -- å­˜å‚¨å¼•æ“ ENGINE = engine_name è¡¨åœ¨ç®¡ç†æ•°æ®æ—¶é‡‡ç”¨çš„ä¸åŒçš„æ•°æ®ç»“æ„ï¼Œç»“æ„ä¸åŒä¼šå¯¼è‡´å¤„ç†æ–¹å¼ã€æä¾›çš„ç‰¹æ€§æ“ä½œç­‰ä¸åŒ å¸¸è§çš„å¼•æ“ï¼šInnoDB MyISAM Memory/Heap BDB Merge Example CSV MaxDB Archive ä¸åŒçš„å¼•æ“åœ¨ä¿å­˜è¡¨çš„ç»“æ„å’Œæ•°æ®æ—¶é‡‡ç”¨ä¸åŒçš„æ–¹å¼ MyISAMè¡¨æ–‡ä»¶å«ä¹‰ï¼š.frmè¡¨å®šä¹‰ï¼Œ.MYDè¡¨æ•°æ®ï¼Œ.MYIè¡¨ç´¢å¼• InnoDBè¡¨æ–‡ä»¶å«ä¹‰ï¼š.frmè¡¨å®šä¹‰ï¼Œè¡¨ç©ºé—´æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶ SHOW ENGINES -- æ˜¾ç¤ºå­˜å‚¨å¼•æ“çš„çŠ¶æ€ä¿¡æ¯ SHOW ENGINE å¼•æ“å &#123;LOGS|STATUS&#125; -- æ˜¾ç¤ºå­˜å‚¨å¼•æ“çš„æ—¥å¿—æˆ–çŠ¶æ€ä¿¡æ¯ -- è‡ªå¢èµ·å§‹æ•° AUTO_INCREMENT = è¡Œæ•° -- æ•°æ®æ–‡ä»¶ç›®å½• DATA DIRECTORY = &apos;ç›®å½•&apos; -- ç´¢å¼•æ–‡ä»¶ç›®å½• INDEX DIRECTORY = &apos;ç›®å½•&apos; -- è¡¨æ³¨é‡Š COMMENT = &apos;string&apos; -- åˆ†åŒºé€‰é¡¹ PARTITION BY ... (è¯¦ç»†è§æ‰‹å†Œ)-- æŸ¥çœ‹æ‰€æœ‰è¡¨ SHOW TABLES[ LIKE &apos;pattern&apos;] SHOW TABLES FROM åº“å-- æŸ¥çœ‹è¡¨æœºæ„ SHOW CREATE TABLE è¡¨å ï¼ˆä¿¡æ¯æ›´è¯¦ç»†ï¼‰ DESC è¡¨å / DESCRIBE è¡¨å / EXPLAIN è¡¨å / SHOW COLUMNS FROM è¡¨å [LIKE &apos;PATTERN&apos;] SHOW TABLE STATUS [FROM db_name] [LIKE &apos;pattern&apos;]-- ä¿®æ”¹è¡¨ -- ä¿®æ”¹è¡¨æœ¬èº«çš„é€‰é¡¹ ALTER TABLE è¡¨å è¡¨çš„é€‰é¡¹ eg: ALTER TABLE è¡¨å ENGINE=MYISAM; -- å¯¹è¡¨è¿›è¡Œé‡å‘½å RENAME TABLE åŸè¡¨å TO æ–°è¡¨å RENAME TABLE åŸè¡¨å TO åº“å.è¡¨å ï¼ˆå¯å°†è¡¨ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ•°æ®åº“ï¼‰ -- RENAMEå¯ä»¥äº¤æ¢ä¸¤ä¸ªè¡¨å -- ä¿®æ”¹è¡¨çš„å­—æ®µæœºæ„ï¼ˆ13.1.2. ALTER TABLEè¯­æ³•ï¼‰ ALTER TABLE è¡¨å æ“ä½œå -- æ“ä½œå ADD[ COLUMN] å­—æ®µå®šä¹‰ -- å¢åŠ å­—æ®µ AFTER å­—æ®µå -- è¡¨ç¤ºå¢åŠ åœ¨è¯¥å­—æ®µååé¢ FIRST -- è¡¨ç¤ºå¢åŠ åœ¨ç¬¬ä¸€ä¸ª ADD PRIMARY KEY(å­—æ®µå) -- åˆ›å»ºä¸»é”® ADD UNIQUE [ç´¢å¼•å] (å­—æ®µå)-- åˆ›å»ºå”¯ä¸€ç´¢å¼• ADD INDEX [ç´¢å¼•å] (å­—æ®µå) -- åˆ›å»ºæ™®é€šç´¢å¼• DROP[ COLUMN] å­—æ®µå -- åˆ é™¤å­—æ®µ MODIFY[ COLUMN] å­—æ®µå å­—æ®µå±æ€§ -- æ”¯æŒå¯¹å­—æ®µå±æ€§è¿›è¡Œä¿®æ”¹ï¼Œä¸èƒ½ä¿®æ”¹å­—æ®µå(æ‰€æœ‰åŸæœ‰å±æ€§ä¹Ÿéœ€å†™ä¸Š) CHANGE[ COLUMN] åŸå­—æ®µå æ–°å­—æ®µå å­—æ®µå±æ€§ -- æ”¯æŒå¯¹å­—æ®µåä¿®æ”¹ DROP PRIMARY KEY -- åˆ é™¤ä¸»é”®(åˆ é™¤ä¸»é”®å‰éœ€åˆ é™¤å…¶AUTO_INCREMENTå±æ€§) DROP INDEX ç´¢å¼•å -- åˆ é™¤ç´¢å¼• DROP FOREIGN KEY å¤–é”® -- åˆ é™¤å¤–é”®-- åˆ é™¤è¡¨ DROP TABLE[ IF EXISTS] è¡¨å ...-- æ¸…ç©ºè¡¨æ•°æ® TRUNCATE [TABLE] è¡¨å-- å¤åˆ¶è¡¨ç»“æ„ CREATE TABLE è¡¨å LIKE è¦å¤åˆ¶çš„è¡¨å-- å¤åˆ¶è¡¨ç»“æ„å’Œæ•°æ® CREATE TABLE è¡¨å [AS] SELECT * FROM è¦å¤åˆ¶çš„è¡¨å-- æ£€æŸ¥è¡¨æ˜¯å¦æœ‰é”™è¯¯ CHECK TABLE tbl_name [, tbl_name] ... [option] ...-- ä¼˜åŒ–è¡¨ OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...-- ä¿®å¤è¡¨ REPAIR [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ... [QUICK] [EXTENDED] [USE_FRM]-- åˆ†æè¡¨ ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ... æ•°æ®æ“ä½œ1234567891011121314151617/* æ•°æ®æ“ä½œ */ -------------------- å¢ INSERT [INTO] è¡¨å [(å­—æ®µåˆ—è¡¨)] VALUES (å€¼åˆ—è¡¨)[, (å€¼åˆ—è¡¨), ...] -- å¦‚æœè¦æ’å…¥çš„å€¼åˆ—è¡¨åŒ…å«æ‰€æœ‰å­—æ®µå¹¶ä¸”é¡ºåºä¸€è‡´ï¼Œåˆ™å¯ä»¥çœç•¥å­—æ®µåˆ—è¡¨ã€‚ -- å¯åŒæ—¶æ’å…¥å¤šæ¡æ•°æ®è®°å½•ï¼ REPLACE ä¸ INSERT å®Œå…¨ä¸€æ ·ï¼Œå¯äº’æ¢ã€‚ INSERT [INTO] è¡¨å SET å­—æ®µå=å€¼[, å­—æ®µå=å€¼, ...]-- æŸ¥ SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å[ å…¶ä»–å­å¥] -- å¯æ¥è‡ªå¤šä¸ªè¡¨çš„å¤šä¸ªå­—æ®µ -- å…¶ä»–å­å¥å¯ä»¥ä¸ä½¿ç”¨ -- å­—æ®µåˆ—è¡¨å¯ä»¥ç”¨*ä»£æ›¿ï¼Œè¡¨ç¤ºæ‰€æœ‰å­—æ®µ-- åˆ  DELETE FROM è¡¨å[ åˆ é™¤æ¡ä»¶å­å¥] æ²¡æœ‰æ¡ä»¶å­å¥ï¼Œåˆ™ä¼šåˆ é™¤å…¨éƒ¨-- æ”¹ UPDATE è¡¨å SET å­—æ®µå=æ–°å€¼[, å­—æ®µå=æ–°å€¼] [æ›´æ–°æ¡ä»¶] å­—ç¬¦é›†ç¼–ç 123456789101112131415161718/* å­—ç¬¦é›†ç¼–ç  */ -------------------- MySQLã€æ•°æ®åº“ã€è¡¨ã€å­—æ®µå‡å¯è®¾ç½®ç¼–ç -- æ•°æ®ç¼–ç ä¸å®¢æˆ·ç«¯ç¼–ç ä¸éœ€ä¸€è‡´SHOW VARIABLES LIKE &apos;character_set_%&apos; -- æŸ¥çœ‹æ‰€æœ‰å­—ç¬¦é›†ç¼–ç é¡¹ character_set_client å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ•°æ®æ—¶ä½¿ç”¨çš„ç¼–ç  character_set_results æœåŠ¡å™¨ç«¯å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯æ‰€ä½¿ç”¨çš„ç¼–ç  character_set_connection è¿æ¥å±‚ç¼–ç SET å˜é‡å = å˜é‡å€¼ SET character_set_client = gbk; SET character_set_results = gbk; SET character_set_connection = gbk;SET NAMES GBK; -- ç›¸å½“äºå®Œæˆä»¥ä¸Šä¸‰ä¸ªè®¾ç½®-- æ ¡å¯¹é›† æ ¡å¯¹é›†ç”¨ä»¥æ’åº SHOW CHARACTER SET [LIKE &apos;pattern&apos;]/SHOW CHARSET [LIKE &apos;pattern&apos;] æŸ¥çœ‹æ‰€æœ‰å­—ç¬¦é›† SHOW COLLATION [LIKE &apos;pattern&apos;] æŸ¥çœ‹æ‰€æœ‰æ ¡å¯¹é›† CHARSET å­—ç¬¦é›†ç¼–ç  è®¾ç½®å­—ç¬¦é›†ç¼–ç  COLLATE æ ¡å¯¹é›†ç¼–ç  è®¾ç½®æ ¡å¯¹é›†ç¼–ç  æ•°æ®ç±»å‹(åˆ—ç±»å‹)12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697/* æ•°æ®ç±»å‹ï¼ˆåˆ—ç±»å‹ï¼‰ */ ------------------1. æ•°å€¼ç±»å‹-- a. æ•´å‹ ---------- ç±»å‹ å­—èŠ‚ èŒƒå›´ï¼ˆæœ‰ç¬¦å·ä½ï¼‰ tinyint 1å­—èŠ‚ -128 ~ 127 æ— ç¬¦å·ä½ï¼š0 ~ 255 smallint 2å­—èŠ‚ -32768 ~ 32767 mediumint 3å­—èŠ‚ -8388608 ~ 8388607 int 4å­—èŠ‚ bigint 8å­—èŠ‚ int(M) Mè¡¨ç¤ºæ€»ä½æ•° - é»˜è®¤å­˜åœ¨ç¬¦å·ä½ï¼Œunsigned å±æ€§ä¿®æ”¹ - æ˜¾ç¤ºå®½åº¦ï¼Œå¦‚æœæŸä¸ªæ•°ä¸å¤Ÿå®šä¹‰å­—æ®µæ—¶è®¾ç½®çš„ä½æ•°ï¼Œåˆ™å‰é¢ä»¥0è¡¥å¡«ï¼Œzerofill å±æ€§ä¿®æ”¹ ä¾‹ï¼šint(5) æ’å…¥ä¸€ä¸ªæ•°&apos;123&apos;ï¼Œè¡¥å¡«åä¸º&apos;00123&apos; - åœ¨æ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹ï¼Œè¶Šå°è¶Šå¥½ã€‚ - 1è¡¨ç¤ºboolå€¼çœŸï¼Œ0è¡¨ç¤ºboolå€¼å‡ã€‚MySQLæ²¡æœ‰å¸ƒå°”ç±»å‹ï¼Œé€šè¿‡æ•´å‹0å’Œ1è¡¨ç¤ºã€‚å¸¸ç”¨tinyint(1)è¡¨ç¤ºå¸ƒå°”å‹ã€‚-- b. æµ®ç‚¹å‹ ---------- ç±»å‹ å­—èŠ‚ èŒƒå›´ float(å•ç²¾åº¦) 4å­—èŠ‚ double(åŒç²¾åº¦) 8å­—èŠ‚ æµ®ç‚¹å‹æ—¢æ”¯æŒç¬¦å·ä½ unsigned å±æ€§ï¼Œä¹Ÿæ”¯æŒæ˜¾ç¤ºå®½åº¦ zerofill å±æ€§ã€‚ ä¸åŒäºæ•´å‹ï¼Œå‰åå‡ä¼šè¡¥å¡«0. å®šä¹‰æµ®ç‚¹å‹æ—¶ï¼Œéœ€æŒ‡å®šæ€»ä½æ•°å’Œå°æ•°ä½æ•°ã€‚ float(M, D) double(M, D) Mè¡¨ç¤ºæ€»ä½æ•°ï¼ŒDè¡¨ç¤ºå°æ•°ä½æ•°ã€‚ Må’ŒDçš„å¤§å°ä¼šå†³å®šæµ®ç‚¹æ•°çš„èŒƒå›´ã€‚ä¸åŒäºæ•´å‹çš„å›ºå®šèŒƒå›´ã€‚ Mæ—¢è¡¨ç¤ºæ€»ä½æ•°ï¼ˆä¸åŒ…æ‹¬å°æ•°ç‚¹å’Œæ­£è´Ÿå·ï¼‰ï¼Œä¹Ÿè¡¨ç¤ºæ˜¾ç¤ºå®½åº¦ï¼ˆæ‰€æœ‰æ˜¾ç¤ºç¬¦å·å‡åŒ…æ‹¬ï¼‰ã€‚ æ”¯æŒç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºã€‚ æµ®ç‚¹æ•°è¡¨ç¤ºè¿‘ä¼¼å€¼ã€‚-- c. å®šç‚¹æ•° ---------- decimal -- å¯å˜é•¿åº¦ decimal(M, D) Mä¹Ÿè¡¨ç¤ºæ€»ä½æ•°ï¼ŒDè¡¨ç¤ºå°æ•°ä½æ•°ã€‚ ä¿å­˜ä¸€ä¸ªç²¾ç¡®çš„æ•°å€¼ï¼Œä¸ä¼šå‘ç”Ÿæ•°æ®çš„æ”¹å˜ï¼Œä¸åŒäºæµ®ç‚¹æ•°çš„å››èˆäº”å…¥ã€‚ å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ¥ä¿å­˜ï¼Œæ¯9ä½æ•°å­—ä¿å­˜ä¸º4ä¸ªå­—èŠ‚ã€‚2. å­—ç¬¦ä¸²ç±»å‹-- a. char, varchar ---------- char å®šé•¿å­—ç¬¦ä¸²ï¼Œé€Ÿåº¦å¿«ï¼Œä½†æµªè´¹ç©ºé—´ varchar å˜é•¿å­—ç¬¦ä¸²ï¼Œé€Ÿåº¦æ…¢ï¼Œä½†èŠ‚çœç©ºé—´ Mè¡¨ç¤ºèƒ½å­˜å‚¨çš„æœ€å¤§é•¿åº¦ï¼Œæ­¤é•¿åº¦æ˜¯å­—ç¬¦æ•°ï¼Œéå­—èŠ‚æ•°ã€‚ ä¸åŒçš„ç¼–ç ï¼Œæ‰€å ç”¨çš„ç©ºé—´ä¸åŒã€‚ char,æœ€å¤š255ä¸ªå­—ç¬¦ï¼Œä¸ç¼–ç æ— å…³ã€‚ varchar,æœ€å¤š65535å­—ç¬¦ï¼Œä¸ç¼–ç æœ‰å…³ã€‚ ä¸€æ¡æœ‰æ•ˆè®°å½•æœ€å¤§ä¸èƒ½è¶…è¿‡65535ä¸ªå­—èŠ‚ã€‚ utf8 æœ€å¤§ä¸º21844ä¸ªå­—ç¬¦ï¼Œgbk æœ€å¤§ä¸º32766ä¸ªå­—ç¬¦ï¼Œlatin1 æœ€å¤§ä¸º65532ä¸ªå­—ç¬¦ varchar æ˜¯å˜é•¿çš„ï¼Œéœ€è¦åˆ©ç”¨å­˜å‚¨ç©ºé—´ä¿å­˜ varchar çš„é•¿åº¦ï¼Œå¦‚æœæ•°æ®å°äº255ä¸ªå­—èŠ‚ï¼Œåˆ™é‡‡ç”¨ä¸€ä¸ªå­—èŠ‚æ¥ä¿å­˜é•¿åº¦ï¼Œåä¹‹éœ€è¦ä¸¤ä¸ªå­—èŠ‚æ¥ä¿å­˜ã€‚ varchar çš„æœ€å¤§æœ‰æ•ˆé•¿åº¦ç”±æœ€å¤§è¡Œå¤§å°å’Œä½¿ç”¨çš„å­—ç¬¦é›†ç¡®å®šã€‚ æœ€å¤§æœ‰æ•ˆé•¿åº¦æ˜¯65532å­—èŠ‚ï¼Œå› ä¸ºåœ¨varcharå­˜å­—ç¬¦ä¸²æ—¶ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯ç©ºçš„ï¼Œä¸å­˜åœ¨ä»»ä½•æ•°æ®ï¼Œç„¶åè¿˜éœ€ä¸¤ä¸ªå­—èŠ‚æ¥å­˜æ”¾å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ‰€ä»¥æœ‰æ•ˆé•¿åº¦æ˜¯64432-1-2=65532å­—èŠ‚ã€‚ ä¾‹ï¼šè‹¥ä¸€ä¸ªè¡¨å®šä¹‰ä¸º CREATE TABLE tb(c1 int, c2 char(30), c3 varchar(N)) charset=utf8; é—®Nçš„æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿ ç­”ï¼š(65535-1-2-4-30*3)/3-- b. blob, text ---------- blob äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå­—èŠ‚å­—ç¬¦ä¸²ï¼‰ tinyblob, blob, mediumblob, longblob text éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦å­—ç¬¦ä¸²ï¼‰ tinytext, text, mediumtext, longtext text åœ¨å®šä¹‰æ—¶ï¼Œä¸éœ€è¦å®šä¹‰é•¿åº¦ï¼Œä¹Ÿä¸ä¼šè®¡ç®—æ€»é•¿åº¦ã€‚ text ç±»å‹åœ¨å®šä¹‰æ—¶ï¼Œä¸å¯ç»™defaultå€¼-- c. binary, varbinary ---------- ç±»ä¼¼äºcharå’Œvarcharï¼Œç”¨äºä¿å­˜äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯ä¿å­˜å­—èŠ‚å­—ç¬¦ä¸²è€Œéå­—ç¬¦å­—ç¬¦ä¸²ã€‚ char, varchar, text å¯¹åº” binary, varbinary, blob.3. æ—¥æœŸæ—¶é—´ç±»å‹ ä¸€èˆ¬ç”¨æ•´å‹ä¿å­˜æ—¶é—´æˆ³ï¼Œå› ä¸ºPHPå¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†æ—¶é—´æˆ³è¿›è¡Œæ ¼å¼åŒ–ã€‚ datetime 8å­—èŠ‚ æ—¥æœŸåŠæ—¶é—´ 1000-01-01 00:00:00 åˆ° 9999-12-31 23:59:59 date 3å­—èŠ‚ æ—¥æœŸ 1000-01-01 åˆ° 9999-12-31 timestamp 4å­—èŠ‚ æ—¶é—´æˆ³ 19700101000000 åˆ° 2038-01-19 03:14:07 time 3å­—èŠ‚ æ—¶é—´ -838:59:59 åˆ° 838:59:59 year 1å­—èŠ‚ å¹´ä»½ 1901 - 2155datetime YYYY-MM-DD hh:mm:sstimestamp YY-MM-DD hh:mm:ss YYYYMMDDhhmmss YYMMDDhhmmss YYYYMMDDhhmmss YYMMDDhhmmssdate YYYY-MM-DD YY-MM-DD YYYYMMDD YYMMDD YYYYMMDD YYMMDDtime hh:mm:ss hhmmss hhmmssyear YYYY YY YYYY YY4. æšä¸¾å’Œé›†åˆ-- æšä¸¾(enum) ----------enum(val1, val2, val3...) åœ¨å·²çŸ¥çš„å€¼ä¸­è¿›è¡Œå•é€‰ã€‚æœ€å¤§æ•°é‡ä¸º65535. æšä¸¾å€¼åœ¨ä¿å­˜æ—¶ï¼Œä»¥2ä¸ªå­—èŠ‚çš„æ•´å‹(smallint)ä¿å­˜ã€‚æ¯ä¸ªæšä¸¾å€¼ï¼ŒæŒ‰ä¿å­˜çš„ä½ç½®é¡ºåºï¼Œä»1å¼€å§‹é€ä¸€é€’å¢ã€‚ è¡¨ç°ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œå­˜å‚¨å´æ˜¯æ•´å‹ã€‚ NULLå€¼çš„ç´¢å¼•æ˜¯NULLã€‚ ç©ºå­—ç¬¦ä¸²é”™è¯¯å€¼çš„ç´¢å¼•å€¼æ˜¯0ã€‚-- é›†åˆï¼ˆsetï¼‰ ----------set(val1, val2, val3...) create table tab ( gender set(&apos;ç”·&apos;, &apos;å¥³&apos;, &apos;æ— &apos;) ); insert into tab values (&apos;ç”·, å¥³&apos;); æœ€å¤šå¯ä»¥æœ‰64ä¸ªä¸åŒçš„æˆå‘˜ã€‚ä»¥bigintå­˜å‚¨ï¼Œå…±8ä¸ªå­—èŠ‚ã€‚é‡‡å–ä½è¿ç®—çš„å½¢å¼ã€‚ å½“åˆ›å»ºè¡¨æ—¶ï¼ŒSETæˆå‘˜å€¼çš„å°¾éƒ¨ç©ºæ ¼å°†è‡ªåŠ¨è¢«åˆ é™¤ã€‚ åˆ—å±æ€§(åˆ—çº¦æŸ)12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849/* åˆ—å±æ€§ï¼ˆåˆ—çº¦æŸï¼‰ */ ------------------1. PRIMARY ä¸»é”® - èƒ½å”¯ä¸€æ ‡è¯†è®°å½•çš„å­—æ®µï¼Œå¯ä»¥ä½œä¸ºä¸»é”®ã€‚ - ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ã€‚ - ä¸»é”®å…·æœ‰å”¯ä¸€æ€§ã€‚ - å£°æ˜å­—æ®µæ—¶ï¼Œç”¨ primary key æ ‡è¯†ã€‚ ä¹Ÿå¯ä»¥åœ¨å­—æ®µåˆ—è¡¨ä¹‹åå£°æ˜ ä¾‹ï¼šcreate table tab ( id int, stu varchar(10), primary key (id)); - ä¸»é”®å­—æ®µçš„å€¼ä¸èƒ½ä¸ºnullã€‚ - ä¸»é”®å¯ä»¥ç”±å¤šä¸ªå­—æ®µå…±åŒç»„æˆã€‚æ­¤æ—¶éœ€è¦åœ¨å­—æ®µåˆ—è¡¨åå£°æ˜çš„æ–¹æ³•ã€‚ ä¾‹ï¼šcreate table tab ( id int, stu varchar(10), age int, primary key (stu, age));2. UNIQUE å”¯ä¸€ç´¢å¼•ï¼ˆå”¯ä¸€çº¦æŸï¼‰ ä½¿å¾—æŸå­—æ®µçš„å€¼ä¹Ÿä¸èƒ½é‡å¤ã€‚3. NULL çº¦æŸ nullä¸æ˜¯æ•°æ®ç±»å‹ï¼Œæ˜¯åˆ—çš„ä¸€ä¸ªå±æ€§ã€‚ è¡¨ç¤ºå½“å‰åˆ—æ˜¯å¦å¯ä»¥ä¸ºnullï¼Œè¡¨ç¤ºä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚ null, å…è®¸ä¸ºç©ºã€‚é»˜è®¤ã€‚ not null, ä¸å…è®¸ä¸ºç©ºã€‚ insert into tab values (null, &apos;val&apos;); -- æ­¤æ—¶è¡¨ç¤ºå°†ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼è®¾ä¸ºnull, å–å†³äºè¯¥å­—æ®µæ˜¯å¦å…è®¸ä¸ºnull4. DEFAULT é»˜è®¤å€¼å±æ€§ å½“å‰å­—æ®µçš„é»˜è®¤å€¼ã€‚ insert into tab values (default, &apos;val&apos;); -- æ­¤æ—¶è¡¨ç¤ºå¼ºåˆ¶ä½¿ç”¨é»˜è®¤å€¼ã€‚ create table tab ( add_time timestamp default current_timestamp ); -- è¡¨ç¤ºå°†å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³è®¾ä¸ºé»˜è®¤å€¼ã€‚ current_date, current_time5. AUTO_INCREMENT è‡ªåŠ¨å¢é•¿çº¦æŸ è‡ªåŠ¨å¢é•¿å¿…é¡»ä¸ºç´¢å¼•ï¼ˆä¸»é”®æˆ–uniqueï¼‰ åªèƒ½å­˜åœ¨ä¸€ä¸ªå­—æ®µä¸ºè‡ªåŠ¨å¢é•¿ã€‚ é»˜è®¤ä¸º1å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚å¯ä»¥é€šè¿‡è¡¨å±æ€§ auto_increment = xè¿›è¡Œè®¾ç½®ï¼Œæˆ– alter table tbl auto_increment = x;6. COMMENT æ³¨é‡Š ä¾‹ï¼šcreate table tab ( id int ) comment &apos;æ³¨é‡Šå†…å®¹&apos;;7. FOREIGN KEY å¤–é”®çº¦æŸ ç”¨äºé™åˆ¶ä¸»è¡¨ä¸ä»è¡¨æ•°æ®å®Œæ•´æ€§ã€‚ alter table t1 add constraint `t1_t2_fk` foreign key (t1_id) references t2(id); -- å°†è¡¨t1çš„t1_idå¤–é”®å…³è”åˆ°è¡¨t2çš„idå­—æ®µã€‚ -- æ¯ä¸ªå¤–é”®éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œå¯ä»¥é€šè¿‡ constraint æŒ‡å®š å­˜åœ¨å¤–é”®çš„è¡¨ï¼Œç§°ä¹‹ä¸ºä»è¡¨ï¼ˆå­è¡¨ï¼‰ï¼Œå¤–é”®æŒ‡å‘çš„è¡¨ï¼Œç§°ä¹‹ä¸ºä¸»è¡¨ï¼ˆçˆ¶è¡¨ï¼‰ã€‚ ä½œç”¨ï¼šä¿æŒæ•°æ®ä¸€è‡´æ€§ï¼Œå®Œæ•´æ€§ï¼Œä¸»è¦ç›®çš„æ˜¯æ§åˆ¶å­˜å‚¨åœ¨å¤–é”®è¡¨ï¼ˆä»è¡¨ï¼‰ä¸­çš„æ•°æ®ã€‚ MySQLä¸­ï¼Œå¯ä»¥å¯¹InnoDBå¼•æ“ä½¿ç”¨å¤–é”®çº¦æŸï¼š è¯­æ³•ï¼š foreign key (å¤–é”®å­—æ®µï¼‰ references ä¸»è¡¨å (å…³è”å­—æ®µ) [ä¸»è¡¨è®°å½•åˆ é™¤æ—¶çš„åŠ¨ä½œ] [ä¸»è¡¨è®°å½•æ›´æ–°æ—¶çš„åŠ¨ä½œ] æ­¤æ—¶éœ€è¦æ£€æµ‹ä¸€ä¸ªä»è¡¨çš„å¤–é”®éœ€è¦çº¦æŸä¸ºä¸»è¡¨çš„å·²å­˜åœ¨çš„å€¼ã€‚å¤–é”®åœ¨æ²¡æœ‰å…³è”çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è®¾ç½®ä¸ºnull.å‰ææ˜¯è¯¥å¤–é”®åˆ—ï¼Œæ²¡æœ‰not nullã€‚ å¯ä»¥ä¸æŒ‡å®šä¸»è¡¨è®°å½•æ›´æ”¹æˆ–æ›´æ–°æ—¶çš„åŠ¨ä½œï¼Œé‚£ä¹ˆæ­¤æ—¶ä¸»è¡¨çš„æ“ä½œè¢«æ‹’ç»ã€‚ å¦‚æœæŒ‡å®šäº† on update æˆ– on deleteï¼šåœ¨åˆ é™¤æˆ–æ›´æ–°æ—¶ï¼Œæœ‰å¦‚ä¸‹å‡ ä¸ªæ“ä½œå¯ä»¥é€‰æ‹©ï¼š 1. cascadeï¼Œçº§è”æ“ä½œã€‚ä¸»è¡¨æ•°æ®è¢«æ›´æ–°ï¼ˆä¸»é”®å€¼æ›´æ–°ï¼‰ï¼Œä»è¡¨ä¹Ÿè¢«æ›´æ–°ï¼ˆå¤–é”®å€¼æ›´æ–°ï¼‰ã€‚ä¸»è¡¨è®°å½•è¢«åˆ é™¤ï¼Œä»è¡¨ç›¸å…³è®°å½•ä¹Ÿè¢«åˆ é™¤ã€‚ 2. set nullï¼Œè®¾ç½®ä¸ºnullã€‚ä¸»è¡¨æ•°æ®è¢«æ›´æ–°ï¼ˆä¸»é”®å€¼æ›´æ–°ï¼‰ï¼Œä»è¡¨çš„å¤–é”®è¢«è®¾ç½®ä¸ºnullã€‚ä¸»è¡¨è®°å½•è¢«åˆ é™¤ï¼Œä»è¡¨ç›¸å…³è®°å½•å¤–é”®è¢«è®¾ç½®æˆnullã€‚ä½†æ³¨æ„ï¼Œè¦æ±‚è¯¥å¤–é”®åˆ—ï¼Œæ²¡æœ‰not nullå±æ€§çº¦æŸã€‚ 3. restrictï¼Œæ‹’ç»çˆ¶è¡¨åˆ é™¤å’Œæ›´æ–°ã€‚ æ³¨æ„ï¼Œå¤–é”®åªè¢«InnoDBå­˜å‚¨å¼•æ“æ‰€æ”¯æŒã€‚å…¶ä»–å¼•æ“æ˜¯ä¸æ”¯æŒçš„ã€‚ å»ºè¡¨è§„èŒƒ1234567891011121314/* å»ºè¡¨è§„èŒƒ */ ------------------ -- Normal Format, NF - æ¯ä¸ªè¡¨ä¿å­˜ä¸€ä¸ªå®ä½“ä¿¡æ¯ - æ¯ä¸ªå…·æœ‰ä¸€ä¸ªIDå­—æ®µä½œä¸ºä¸»é”® - IDä¸»é”® + åŸå­è¡¨ -- 1NF, ç¬¬ä¸€èŒƒå¼ å­—æ®µä¸èƒ½å†åˆ†ï¼Œå°±æ»¡è¶³ç¬¬ä¸€èŒƒå¼ã€‚ -- 2NF, ç¬¬äºŒèŒƒå¼ æ»¡è¶³ç¬¬ä¸€èŒƒå¼çš„å‰æä¸‹ï¼Œä¸èƒ½å‡ºç°éƒ¨åˆ†ä¾èµ–ã€‚ æ¶ˆé™¤å¤åˆä¸»é”®å°±å¯ä»¥é¿å…éƒ¨åˆ†ä¾èµ–ã€‚å¢åŠ å•åˆ—å…³é”®å­—ã€‚ -- 3NF, ç¬¬ä¸‰èŒƒå¼ æ»¡è¶³ç¬¬äºŒèŒƒå¼çš„å‰æä¸‹ï¼Œä¸èƒ½å‡ºç°ä¼ é€’ä¾èµ–ã€‚ æŸä¸ªå­—æ®µä¾èµ–äºä¸»é”®ï¼Œè€Œæœ‰å…¶ä»–å­—æ®µä¾èµ–äºè¯¥å­—æ®µã€‚è¿™å°±æ˜¯ä¼ é€’ä¾èµ–ã€‚ å°†ä¸€ä¸ªå®ä½“ä¿¡æ¯çš„æ•°æ®æ”¾åœ¨ä¸€ä¸ªè¡¨å†…å®ç°ã€‚ SELECT123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/* SELECT */ ------------------SELECT [ALL|DISTINCT] select_expr FROM -&gt; WHERE -&gt; GROUP BY [åˆè®¡å‡½æ•°] -&gt; HAVING -&gt; ORDER BY -&gt; LIMITa. select_expr -- å¯ä»¥ç”¨ * è¡¨ç¤ºæ‰€æœ‰å­—æ®µã€‚ select * from tb; -- å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ï¼ˆè®¡ç®—å…¬å¼ã€å‡½æ•°è°ƒç”¨ã€å­—æ®µä¹Ÿæ˜¯ä¸ªè¡¨è¾¾å¼ï¼‰ select stu, 29+25, now() from tb; -- å¯ä»¥ä¸ºæ¯ä¸ªåˆ—ä½¿ç”¨åˆ«åã€‚é€‚ç”¨äºç®€åŒ–åˆ—æ ‡è¯†ï¼Œé¿å…å¤šä¸ªåˆ—æ ‡è¯†ç¬¦é‡å¤ã€‚ - ä½¿ç”¨ as å…³é”®å­—ï¼Œä¹Ÿå¯çœç•¥ as. select stu+10 as add10 from tb;b. FROM å­å¥ ç”¨äºæ ‡è¯†æŸ¥è¯¢æ¥æºã€‚ -- å¯ä»¥ä¸ºè¡¨èµ·åˆ«åã€‚ä½¿ç”¨aså…³é”®å­—ã€‚ SELECT * FROM tb1 AS tt, tb2 AS bb; -- fromå­å¥åï¼Œå¯ä»¥åŒæ—¶å‡ºç°å¤šä¸ªè¡¨ã€‚ -- å¤šä¸ªè¡¨ä¼šæ¨ªå‘å åŠ åˆ°ä¸€èµ·ï¼Œè€Œæ•°æ®ä¼šå½¢æˆä¸€ä¸ªç¬›å¡å°”ç§¯ã€‚ SELECT * FROM tb1, tb2; -- å‘ä¼˜åŒ–ç¬¦æç¤ºå¦‚ä½•é€‰æ‹©ç´¢å¼• USE INDEXã€IGNORE INDEXã€FORCE INDEX SELECT * FROM table1 USE INDEX (key1,key2) WHERE key1=1 AND key2=2 AND key3=3; SELECT * FROM table1 IGNORE INDEX (key3) WHERE key1=1 AND key2=2 AND key3=3;c. WHERE å­å¥ -- ä»fromè·å¾—çš„æ•°æ®æºä¸­è¿›è¡Œç­›é€‰ã€‚ -- æ•´å‹1è¡¨ç¤ºçœŸï¼Œ0è¡¨ç¤ºå‡ã€‚ -- è¡¨è¾¾å¼ç”±è¿ç®—ç¬¦å’Œè¿ç®—æ•°ç»„æˆã€‚ -- è¿ç®—æ•°ï¼šå˜é‡ï¼ˆå­—æ®µï¼‰ã€å€¼ã€å‡½æ•°è¿”å›å€¼ -- è¿ç®—ç¬¦ï¼š =, &lt;=&gt;, &lt;&gt;, !=, &lt;=, &lt;, &gt;=, &gt;, !, &amp;&amp;, ||, in (not) null, (not) like, (not) in, (not) between and, is (not), and, or, not, xor is/is not åŠ ä¸Šture/false/unknownï¼Œæ£€éªŒæŸä¸ªå€¼çš„çœŸå‡ &lt;=&gt;ä¸&lt;&gt;åŠŸèƒ½ç›¸åŒï¼Œ&lt;=&gt;å¯ç”¨äºnullæ¯”è¾ƒd. GROUP BY å­å¥, åˆ†ç»„å­å¥ GROUP BY å­—æ®µ/åˆ«å [æ’åºæ–¹å¼] åˆ†ç»„åä¼šè¿›è¡Œæ’åºã€‚å‡åºï¼šASCï¼Œé™åºï¼šDESC ä»¥ä¸‹[åˆè®¡å‡½æ•°]éœ€é…åˆ GROUP BY ä½¿ç”¨ï¼š count è¿”å›ä¸åŒçš„éNULLå€¼æ•°ç›® count(*)ã€count(å­—æ®µ) sum æ±‚å’Œ max æ±‚æœ€å¤§å€¼ min æ±‚æœ€å°å€¼ avg æ±‚å¹³å‡å€¼ group_concat è¿”å›å¸¦æœ‰æ¥è‡ªä¸€ä¸ªç»„çš„è¿æ¥çš„éNULLå€¼çš„å­—ç¬¦ä¸²ç»“æœã€‚ç»„å†…å­—ç¬¦ä¸²è¿æ¥ã€‚e. HAVING å­å¥ï¼Œæ¡ä»¶å­å¥ ä¸ where åŠŸèƒ½ã€ç”¨æ³•ç›¸åŒï¼Œæ‰§è¡Œæ—¶æœºä¸åŒã€‚ where åœ¨å¼€å§‹æ—¶æ‰§è¡Œæ£€æµ‹æ•°æ®ï¼Œå¯¹åŸæ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚ having å¯¹ç­›é€‰å‡ºçš„ç»“æœå†æ¬¡è¿›è¡Œè¿‡æ»¤ã€‚ having å­—æ®µå¿…é¡»æ˜¯æŸ¥è¯¢å‡ºæ¥çš„ï¼Œwhere å­—æ®µå¿…é¡»æ˜¯æ•°æ®è¡¨å­˜åœ¨çš„ã€‚ where ä¸å¯ä»¥ä½¿ç”¨å­—æ®µçš„åˆ«åï¼Œhaving å¯ä»¥ã€‚å› ä¸ºæ‰§è¡ŒWHEREä»£ç æ—¶ï¼Œå¯èƒ½å°šæœªç¡®å®šåˆ—å€¼ã€‚ where ä¸å¯ä»¥ä½¿ç”¨åˆè®¡å‡½æ•°ã€‚ä¸€èˆ¬éœ€ç”¨åˆè®¡å‡½æ•°æ‰ä¼šç”¨ having SQLæ ‡å‡†è¦æ±‚HAVINGå¿…é¡»å¼•ç”¨GROUP BYå­å¥ä¸­çš„åˆ—æˆ–ç”¨äºåˆè®¡å‡½æ•°ä¸­çš„åˆ—ã€‚f. ORDER BY å­å¥ï¼Œæ’åºå­å¥ order by æ’åºå­—æ®µ/åˆ«å æ’åºæ–¹å¼ [,æ’åºå­—æ®µ/åˆ«å æ’åºæ–¹å¼]... å‡åºï¼šASCï¼Œé™åºï¼šDESC æ”¯æŒå¤šä¸ªå­—æ®µçš„æ’åºã€‚g. LIMIT å­å¥ï¼Œé™åˆ¶ç»“æœæ•°é‡å­å¥ ä»…å¯¹å¤„ç†å¥½çš„ç»“æœè¿›è¡Œæ•°é‡é™åˆ¶ã€‚å°†å¤„ç†å¥½çš„ç»“æœçš„çœ‹ä½œæ˜¯ä¸€ä¸ªé›†åˆï¼ŒæŒ‰ç…§è®°å½•å‡ºç°çš„é¡ºåºï¼Œç´¢å¼•ä»0å¼€å§‹ã€‚ limit èµ·å§‹ä½ç½®, è·å–æ¡æ•° çœç•¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä»ç´¢å¼•0å¼€å§‹ã€‚limit è·å–æ¡æ•°h. DISTINCT, ALL é€‰é¡¹ distinct å»é™¤é‡å¤è®°å½• é»˜è®¤ä¸º all, å…¨éƒ¨è®°å½• UNION12345678/* UNION */ ------------------ å°†å¤šä¸ªselectæŸ¥è¯¢çš„ç»“æœç»„åˆæˆä¸€ä¸ªç»“æœé›†åˆã€‚ SELECT ... UNION [ALL|DISTINCT] SELECT ... é»˜è®¤ DISTINCT æ–¹å¼ï¼Œå³æ‰€æœ‰è¿”å›çš„è¡Œéƒ½æ˜¯å”¯ä¸€çš„ å»ºè®®ï¼Œå¯¹æ¯ä¸ªSELECTæŸ¥è¯¢åŠ ä¸Šå°æ‹¬å·åŒ…è£¹ã€‚ ORDER BY æ’åºæ—¶ï¼Œéœ€åŠ ä¸Š LIMIT è¿›è¡Œç»“åˆã€‚ éœ€è¦å„selectæŸ¥è¯¢çš„å­—æ®µæ•°é‡ä¸€æ ·ã€‚ æ¯ä¸ªselectæŸ¥è¯¢çš„å­—æ®µåˆ—è¡¨(æ•°é‡ã€ç±»å‹)åº”ä¸€è‡´ï¼Œå› ä¸ºç»“æœä¸­çš„å­—æ®µåä»¥ç¬¬ä¸€æ¡selectè¯­å¥ä¸ºå‡†ã€‚ å­æŸ¥è¯¢1234567891011121314151617181920212223242526272829/* å­æŸ¥è¯¢ */ ------------------ - å­æŸ¥è¯¢éœ€ç”¨æ‹¬å·åŒ…è£¹ã€‚-- fromå‹ fromåè¦æ±‚æ˜¯ä¸€ä¸ªè¡¨ï¼Œå¿…é¡»ç»™å­æŸ¥è¯¢ç»“æœå–ä¸ªåˆ«åã€‚ - ç®€åŒ–æ¯ä¸ªæŸ¥è¯¢å†…çš„æ¡ä»¶ã€‚ - fromå‹éœ€å°†ç»“æœç”Ÿæˆä¸€ä¸ªä¸´æ—¶è¡¨æ ¼ï¼Œå¯ç”¨ä»¥åŸè¡¨çš„é”å®šçš„é‡Šæ”¾ã€‚ - å­æŸ¥è¯¢è¿”å›ä¸€ä¸ªè¡¨ï¼Œè¡¨å‹å­æŸ¥è¯¢ã€‚ select * from (select * from tb where id&gt;0) as subfrom where id&gt;1;-- whereå‹ - å­æŸ¥è¯¢è¿”å›ä¸€ä¸ªå€¼ï¼Œæ ‡é‡å­æŸ¥è¯¢ã€‚ - ä¸éœ€è¦ç»™å­æŸ¥è¯¢å–åˆ«åã€‚ - whereå­æŸ¥è¯¢å†…çš„è¡¨ï¼Œä¸èƒ½ç›´æ¥ç”¨ä»¥æ›´æ–°ã€‚ select * from tb where money = (select max(money) from tb); -- åˆ—å­æŸ¥è¯¢ å¦‚æœå­æŸ¥è¯¢ç»“æœè¿”å›çš„æ˜¯ä¸€åˆ—ã€‚ ä½¿ç”¨ in æˆ– not in å®ŒæˆæŸ¥è¯¢ exists å’Œ not exists æ¡ä»¶ å¦‚æœå­æŸ¥è¯¢è¿”å›æ•°æ®ï¼Œåˆ™è¿”å›1æˆ–0ã€‚å¸¸ç”¨äºåˆ¤æ–­æ¡ä»¶ã€‚ select column1 from t1 where exists (select * from t2); -- è¡Œå­æŸ¥è¯¢ æŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªè¡Œã€‚ select * from t1 where (id, gender) in (select id, gender from t2); è¡Œæ„é€ ç¬¦ï¼š(col1, col2, ...) æˆ– ROW(col1, col2, ...) è¡Œæ„é€ ç¬¦é€šå¸¸ç”¨äºä¸å¯¹èƒ½è¿”å›ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šåˆ—çš„å­æŸ¥è¯¢è¿›è¡Œæ¯”è¾ƒã€‚ -- ç‰¹æ®Šè¿ç®—ç¬¦ != all() ç›¸å½“äº not in = some() ç›¸å½“äº inã€‚any æ˜¯ some çš„åˆ«å != some() ä¸ç­‰åŒäº not inï¼Œä¸ç­‰äºå…¶ä¸­æŸä¸€ä¸ªã€‚ all, some å¯ä»¥é…åˆå…¶ä»–è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ã€‚ è¿æ¥æŸ¥è¯¢(join)123456789101112131415161718192021222324/* è¿æ¥æŸ¥è¯¢(join) */ ------------------ å°†å¤šä¸ªè¡¨çš„å­—æ®µè¿›è¡Œè¿æ¥ï¼Œå¯ä»¥æŒ‡å®šè¿æ¥æ¡ä»¶ã€‚-- å†…è¿æ¥(inner join) - é»˜è®¤å°±æ˜¯å†…è¿æ¥ï¼Œå¯çœç•¥innerã€‚ - åªæœ‰æ•°æ®å­˜åœ¨æ—¶æ‰èƒ½å‘é€è¿æ¥ã€‚å³è¿æ¥ç»“æœä¸èƒ½å‡ºç°ç©ºè¡Œã€‚ on è¡¨ç¤ºè¿æ¥æ¡ä»¶ã€‚å…¶æ¡ä»¶è¡¨è¾¾å¼ä¸whereç±»ä¼¼ã€‚ä¹Ÿå¯ä»¥çœç•¥æ¡ä»¶ï¼ˆè¡¨ç¤ºæ¡ä»¶æ°¸è¿œä¸ºçœŸï¼‰ ä¹Ÿå¯ç”¨whereè¡¨ç¤ºè¿æ¥æ¡ä»¶ã€‚ è¿˜æœ‰ using, ä½†éœ€å­—æ®µåç›¸åŒã€‚ using(å­—æ®µå) -- äº¤å‰è¿æ¥ cross join å³ï¼Œæ²¡æœ‰æ¡ä»¶çš„å†…è¿æ¥ã€‚ select * from tb1 cross join tb2;-- å¤–è¿æ¥(outer join) - å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œä¹Ÿä¼šå‡ºç°åœ¨è¿æ¥ç»“æœä¸­ã€‚ -- å·¦å¤–è¿æ¥ left join å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œå·¦è¡¨è®°å½•ä¼šå‡ºç°ï¼Œè€Œå³è¡¨ä¸ºnullå¡«å…… -- å³å¤–è¿æ¥ right join å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œå³è¡¨è®°å½•ä¼šå‡ºç°ï¼Œè€Œå·¦è¡¨ä¸ºnullå¡«å……-- è‡ªç„¶è¿æ¥(natural join) è‡ªåŠ¨åˆ¤æ–­è¿æ¥æ¡ä»¶å®Œæˆè¿æ¥ã€‚ ç›¸å½“äºçœç•¥äº†usingï¼Œä¼šè‡ªåŠ¨æŸ¥æ‰¾ç›¸åŒå­—æ®µåã€‚ natural join natural left join natural right joinselect info.id, info.name, info.stu_num, extra_info.hobby, extra_info.sex from info, extra_info where info.stu_num = extra_info.stu_id; TRUNCATE123456789/* TRUNCATE */ ------------------TRUNCATE [TABLE] tbl_nameæ¸…ç©ºæ•°æ®åˆ é™¤é‡å»ºè¡¨åŒºåˆ«ï¼š1ï¼Œtruncate æ˜¯åˆ é™¤è¡¨å†åˆ›å»ºï¼Œdelete æ˜¯é€æ¡åˆ é™¤2ï¼Œtruncate é‡ç½®auto_incrementçš„å€¼ã€‚è€Œdeleteä¸ä¼š3ï¼Œtruncate ä¸çŸ¥é“åˆ é™¤äº†å‡ æ¡ï¼Œè€ŒdeleteçŸ¥é“ã€‚4ï¼Œå½“è¢«ç”¨äºå¸¦åˆ†åŒºçš„è¡¨æ—¶ï¼Œtruncate ä¼šä¿ç•™åˆ†åŒº å¤‡ä»½ä¸è¿˜åŸ123456789101112131415161718192021/* å¤‡ä»½ä¸è¿˜åŸ */ ------------------å¤‡ä»½ï¼Œå°†æ•°æ®çš„ç»“æ„ä¸è¡¨å†…æ•°æ®ä¿å­˜èµ·æ¥ã€‚åˆ©ç”¨ mysqldump æŒ‡ä»¤å®Œæˆã€‚-- å¯¼å‡ºmysqldump [options] db_name [tables]mysqldump [options] ---database DB1 [DB2 DB3...]mysqldump [options] --all--database1. å¯¼å‡ºä¸€å¼ è¡¨ mysqldump -uç”¨æˆ·å -på¯†ç  åº“å è¡¨å &gt; æ–‡ä»¶å(D:/a.sql)2. å¯¼å‡ºå¤šå¼ è¡¨ mysqldump -uç”¨æˆ·å -på¯†ç  åº“å è¡¨1 è¡¨2 è¡¨3 &gt; æ–‡ä»¶å(D:/a.sql)3. å¯¼å‡ºæ‰€æœ‰è¡¨ mysqldump -uç”¨æˆ·å -på¯†ç  åº“å &gt; æ–‡ä»¶å(D:/a.sql)4. å¯¼å‡ºä¸€ä¸ªåº“ mysqldump -uç”¨æˆ·å -på¯†ç  --lock-all-tables --database åº“å &gt; æ–‡ä»¶å(D:/a.sql)å¯ä»¥-wæºå¸¦WHEREæ¡ä»¶-- å¯¼å…¥1. åœ¨ç™»å½•mysqlçš„æƒ…å†µä¸‹ï¼š source å¤‡ä»½æ–‡ä»¶2. åœ¨ä¸ç™»å½•çš„æƒ…å†µä¸‹ mysql -uç”¨æˆ·å -på¯†ç  åº“å &lt; å¤‡ä»½æ–‡ä»¶ è§†å›¾1234567891011121314151617181920212223242526272829ä»€ä¹ˆæ˜¯è§†å›¾ï¼š è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œå…¶å†…å®¹ç”±æŸ¥è¯¢å®šä¹‰ã€‚åŒçœŸå®çš„è¡¨ä¸€æ ·ï¼Œè§†å›¾åŒ…å«ä¸€ç³»åˆ—å¸¦æœ‰åç§°çš„åˆ—å’Œè¡Œæ•°æ®ã€‚ä½†æ˜¯ï¼Œè§†å›¾å¹¶ä¸åœ¨æ•°æ®åº“ä¸­ä»¥å­˜å‚¨çš„æ•°æ®å€¼é›†å½¢å¼å­˜åœ¨ã€‚è¡Œå’Œåˆ—æ•°æ®æ¥è‡ªç”±å®šä¹‰è§†å›¾çš„æŸ¥è¯¢æ‰€å¼•ç”¨çš„è¡¨ï¼Œå¹¶ä¸”åœ¨å¼•ç”¨è§†å›¾æ—¶åŠ¨æ€ç”Ÿæˆã€‚ è§†å›¾å…·æœ‰è¡¨ç»“æ„æ–‡ä»¶ï¼Œä½†ä¸å­˜åœ¨æ•°æ®æ–‡ä»¶ã€‚ å¯¹å…¶ä¸­æ‰€å¼•ç”¨çš„åŸºç¡€è¡¨æ¥è¯´ï¼Œè§†å›¾çš„ä½œç”¨ç±»ä¼¼äºç­›é€‰ã€‚å®šä¹‰è§†å›¾çš„ç­›é€‰å¯ä»¥æ¥è‡ªå½“å‰æˆ–å…¶å®ƒæ•°æ®åº“çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ï¼Œæˆ–è€…å…¶å®ƒè§†å›¾ã€‚é€šè¿‡è§†å›¾è¿›è¡ŒæŸ¥è¯¢æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œé€šè¿‡å®ƒä»¬è¿›è¡Œæ•°æ®ä¿®æ”¹æ—¶çš„é™åˆ¶ä¹Ÿå¾ˆå°‘ã€‚ è§†å›¾æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æŸ¥è¯¢çš„sqlè¯­å¥ï¼Œå®ƒä¸»è¦å‡ºäºä¸¤ç§åŸå› ï¼šå®‰å…¨åŸå› ï¼Œè§†å›¾å¯ä»¥éšè—ä¸€äº›æ•°æ®ï¼Œå¦‚ï¼šç¤¾ä¼šä¿é™©åŸºé‡‘è¡¨ï¼Œå¯ä»¥ç”¨è§†å›¾åªæ˜¾ç¤ºå§“åï¼Œåœ°å€ï¼Œè€Œä¸æ˜¾ç¤ºç¤¾ä¼šä¿é™©å·å’Œå·¥èµ„æ•°ç­‰ï¼Œå¦ä¸€åŸå› æ˜¯å¯ä½¿å¤æ‚çš„æŸ¥è¯¢æ˜“äºç†è§£å’Œä½¿ç”¨ã€‚-- åˆ›å»ºè§†å›¾CREATE [OR REPLACE] [ALGORITHM = &#123;UNDEFINED | MERGE | TEMPTABLE&#125;] VIEW view_name [(column_list)] AS select_statement - è§†å›¾åå¿…é¡»å”¯ä¸€ï¼ŒåŒæ—¶ä¸èƒ½ä¸è¡¨é‡åã€‚ - è§†å›¾å¯ä»¥ä½¿ç”¨selectè¯­å¥æŸ¥è¯¢åˆ°çš„åˆ—åï¼Œä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šç›¸åº”çš„åˆ—åã€‚ - å¯ä»¥æŒ‡å®šè§†å›¾æ‰§è¡Œçš„ç®—æ³•ï¼Œé€šè¿‡ALGORITHMæŒ‡å®šã€‚ - column_listå¦‚æœå­˜åœ¨ï¼Œåˆ™æ•°ç›®å¿…é¡»ç­‰äºSELECTè¯­å¥æ£€ç´¢çš„åˆ—æ•°-- æŸ¥çœ‹ç»“æ„ SHOW CREATE VIEW view_name-- åˆ é™¤è§†å›¾ - åˆ é™¤è§†å›¾åï¼Œæ•°æ®ä¾ç„¶å­˜åœ¨ã€‚ - å¯åŒæ—¶åˆ é™¤å¤šä¸ªè§†å›¾ã€‚ DROP VIEW [IF EXISTS] view_name ...-- ä¿®æ”¹è§†å›¾ç»“æ„ - ä¸€èˆ¬ä¸ä¿®æ”¹è§†å›¾ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰çš„æ›´æ–°è§†å›¾éƒ½ä¼šæ˜ å°„åˆ°è¡¨ä¸Šã€‚ ALTER VIEW view_name [(column_list)] AS select_statement-- è§†å›¾ä½œç”¨ 1. ç®€åŒ–ä¸šåŠ¡é€»è¾‘ 2. å¯¹å®¢æˆ·ç«¯éšè—çœŸå®çš„è¡¨ç»“æ„-- è§†å›¾ç®—æ³•(ALGORITHM) MERGE åˆå¹¶ å°†è§†å›¾çš„æŸ¥è¯¢è¯­å¥ï¼Œä¸å¤–éƒ¨æŸ¥è¯¢éœ€è¦å…ˆåˆå¹¶å†æ‰§è¡Œï¼ TEMPTABLE ä¸´æ—¶è¡¨ å°†è§†å›¾æ‰§è¡Œå®Œæ¯•åï¼Œå½¢æˆä¸´æ—¶è¡¨ï¼Œå†åšå¤–å±‚æŸ¥è¯¢ï¼ UNDEFINED æœªå®šä¹‰(é»˜è®¤)ï¼ŒæŒ‡çš„æ˜¯MySQLè‡ªä¸»å»é€‰æ‹©ç›¸åº”çš„ç®—æ³•ã€‚ äº‹åŠ¡(transaction)123456789101112131415161718192021222324252627282930313233343536373839404142434445äº‹åŠ¡æ˜¯æŒ‡é€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œç»„æˆè¿™ç»„æ“ä½œçš„å„ä¸ªå•å…ƒï¼Œè¦ä¸å…¨æˆåŠŸè¦ä¸å…¨å¤±è´¥ã€‚ - æ”¯æŒè¿ç»­SQLçš„é›†ä½“æˆåŠŸæˆ–é›†ä½“æ’¤é”€ã€‚ - äº‹åŠ¡æ˜¯æ•°æ®åº“åœ¨æ•°æ®æ™šè‡ªä¹ æ–¹é¢çš„ä¸€ä¸ªåŠŸèƒ½ã€‚ - éœ€è¦åˆ©ç”¨ InnoDB æˆ– BDB å­˜å‚¨å¼•æ“ï¼Œå¯¹è‡ªåŠ¨æäº¤çš„ç‰¹æ€§æ”¯æŒå®Œæˆã€‚ - InnoDBè¢«ç§°ä¸ºäº‹åŠ¡å®‰å…¨å‹å¼•æ“ã€‚-- äº‹åŠ¡å¼€å¯ START TRANSACTION; æˆ–è€… BEGIN; å¼€å¯äº‹åŠ¡åï¼Œæ‰€æœ‰è¢«æ‰§è¡Œçš„SQLè¯­å¥å‡è¢«è®¤ä½œå½“å‰äº‹åŠ¡å†…çš„SQLè¯­å¥ã€‚-- äº‹åŠ¡æäº¤ COMMIT;-- äº‹åŠ¡å›æ»š ROLLBACK; å¦‚æœéƒ¨åˆ†æ“ä½œå‘ç”Ÿé—®é¢˜ï¼Œæ˜ å°„åˆ°äº‹åŠ¡å¼€å¯å‰ã€‚-- äº‹åŠ¡çš„ç‰¹æ€§ 1. åŸå­æ€§ï¼ˆAtomicityï¼‰ äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚ 2. ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ äº‹åŠ¡å‰åæ•°æ®çš„å®Œæ•´æ€§å¿…é¡»ä¿æŒä¸€è‡´ã€‚ - äº‹åŠ¡å¼€å§‹å’Œç»“æŸæ—¶ï¼Œå¤–éƒ¨æ•°æ®ä¸€è‡´ - åœ¨æ•´ä¸ªäº‹åŠ¡è¿‡ç¨‹ä¸­ï¼Œæ“ä½œæ˜¯è¿ç»­çš„ 3. éš”ç¦»æ€§ï¼ˆIsolationï¼‰ å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸èƒ½è¢«å…¶å®ƒç”¨æˆ·çš„äº‹ç‰©æ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´çš„æ•°æ®è¦ç›¸äº’éš”ç¦»ã€‚ 4. æŒä¹…æ€§ï¼ˆDurabilityï¼‰ ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ã€‚-- äº‹åŠ¡çš„å®ç° 1. è¦æ±‚æ˜¯äº‹åŠ¡æ”¯æŒçš„è¡¨ç±»å‹ 2. æ‰§è¡Œä¸€ç»„ç›¸å…³çš„æ“ä½œå‰å¼€å¯äº‹åŠ¡ 3. æ•´ç»„æ“ä½œå®Œæˆåï¼Œéƒ½æˆåŠŸï¼Œåˆ™æäº¤ï¼›å¦‚æœå­˜åœ¨å¤±è´¥ï¼Œé€‰æ‹©å›æ»šï¼Œåˆ™ä¼šå›åˆ°äº‹åŠ¡å¼€å§‹çš„å¤‡ä»½ç‚¹ã€‚-- äº‹åŠ¡çš„åŸç† åˆ©ç”¨InnoDBçš„è‡ªåŠ¨æäº¤(autocommit)ç‰¹æ€§å®Œæˆã€‚ æ™®é€šçš„MySQLæ‰§è¡Œè¯­å¥åï¼Œå½“å‰çš„æ•°æ®æäº¤æ“ä½œå‡å¯è¢«å…¶ä»–å®¢æˆ·ç«¯å¯è§ã€‚ è€Œäº‹åŠ¡æ˜¯æš‚æ—¶å…³é—­â€œè‡ªåŠ¨æäº¤â€æœºåˆ¶ï¼Œéœ€è¦commitæäº¤æŒä¹…åŒ–æ•°æ®æ“ä½œã€‚-- æ³¨æ„ 1. æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰è¯­å¥ä¸èƒ½è¢«å›æ»šï¼Œæ¯”å¦‚åˆ›å»ºæˆ–å–æ¶ˆæ•°æ®åº“çš„è¯­å¥ï¼Œå’Œåˆ›å»ºã€å–æ¶ˆæˆ–æ›´æ”¹è¡¨æˆ–å­˜å‚¨çš„å­ç¨‹åºçš„è¯­å¥ã€‚ 2. äº‹åŠ¡ä¸èƒ½è¢«åµŒå¥—-- ä¿å­˜ç‚¹ SAVEPOINT ä¿å­˜ç‚¹åç§° -- è®¾ç½®ä¸€ä¸ªäº‹åŠ¡ä¿å­˜ç‚¹ ROLLBACK TO SAVEPOINT ä¿å­˜ç‚¹åç§° -- å›æ»šåˆ°ä¿å­˜ç‚¹ RELEASE SAVEPOINT ä¿å­˜ç‚¹åç§° -- åˆ é™¤ä¿å­˜ç‚¹-- InnoDBè‡ªåŠ¨æäº¤ç‰¹æ€§è®¾ç½® SET autocommit = 0|1; 0è¡¨ç¤ºå…³é—­è‡ªåŠ¨æäº¤ï¼Œ1è¡¨ç¤ºå¼€å¯è‡ªåŠ¨æäº¤ã€‚ - å¦‚æœå…³é—­äº†ï¼Œé‚£æ™®é€šæ“ä½œçš„ç»“æœå¯¹å…¶ä»–å®¢æˆ·ç«¯ä¹Ÿä¸å¯è§ï¼Œéœ€è¦commitæäº¤åæ‰èƒ½æŒä¹…åŒ–æ•°æ®æ“ä½œã€‚ - ä¹Ÿå¯ä»¥å…³é—­è‡ªåŠ¨æäº¤æ¥å¼€å¯äº‹åŠ¡ã€‚ä½†ä¸START TRANSACTIONä¸åŒçš„æ˜¯ï¼Œ SET autocommitæ˜¯æ°¸ä¹…æ”¹å˜æœåŠ¡å™¨çš„è®¾ç½®ï¼Œç›´åˆ°ä¸‹æ¬¡å†æ¬¡ä¿®æ”¹è¯¥è®¾ç½®ã€‚(é’ˆå¯¹å½“å‰è¿æ¥) è€ŒSTART TRANSACTIONè®°å½•å¼€å¯å‰çš„çŠ¶æ€ï¼Œè€Œä¸€æ—¦äº‹åŠ¡æäº¤æˆ–å›æ»šåå°±éœ€è¦å†æ¬¡å¼€å¯äº‹åŠ¡ã€‚(é’ˆå¯¹å½“å‰äº‹åŠ¡) é”è¡¨1234567/* é”è¡¨ */è¡¨é”å®šåªç”¨äºé˜²æ­¢å…¶å®ƒå®¢æˆ·ç«¯è¿›è¡Œä¸æ­£å½“åœ°è¯»å–å’Œå†™å…¥MyISAM æ”¯æŒè¡¨é”ï¼ŒInnoDB æ”¯æŒè¡Œé”-- é”å®š LOCK TABLES tbl_name [AS alias]-- è§£é” UNLOCK TABLES è§¦å‘å™¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/* è§¦å‘å™¨ */ ------------------ è§¦å‘ç¨‹åºæ˜¯ä¸è¡¨æœ‰å…³çš„å‘½åæ•°æ®åº“å¯¹è±¡ï¼Œå½“è¯¥è¡¨å‡ºç°ç‰¹å®šäº‹ä»¶æ—¶ï¼Œå°†æ¿€æ´»è¯¥å¯¹è±¡ ç›‘å¬ï¼šè®°å½•çš„å¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤ã€‚-- åˆ›å»ºè§¦å‘å™¨CREATE TRIGGER trigger_name trigger_time trigger_event ON tbl_name FOR EACH ROW trigger_stmt å‚æ•°ï¼š trigger_timeæ˜¯è§¦å‘ç¨‹åºçš„åŠ¨ä½œæ—¶é—´ã€‚å®ƒå¯ä»¥æ˜¯ before æˆ– afterï¼Œä»¥æŒ‡æ˜è§¦å‘ç¨‹åºæ˜¯åœ¨æ¿€æ´»å®ƒçš„è¯­å¥ä¹‹å‰æˆ–ä¹‹åè§¦å‘ã€‚ trigger_eventæŒ‡æ˜äº†æ¿€æ´»è§¦å‘ç¨‹åºçš„è¯­å¥çš„ç±»å‹ INSERTï¼šå°†æ–°è¡Œæ’å…¥è¡¨æ—¶æ¿€æ´»è§¦å‘ç¨‹åº UPDATEï¼šæ›´æ”¹æŸä¸€è¡Œæ—¶æ¿€æ´»è§¦å‘ç¨‹åº DELETEï¼šä»è¡¨ä¸­åˆ é™¤æŸä¸€è¡Œæ—¶æ¿€æ´»è§¦å‘ç¨‹åº tbl_nameï¼šç›‘å¬çš„è¡¨ï¼Œå¿…é¡»æ˜¯æ°¸ä¹…æ€§çš„è¡¨ï¼Œä¸èƒ½å°†è§¦å‘ç¨‹åºä¸TEMPORARYè¡¨æˆ–è§†å›¾å…³è”èµ·æ¥ã€‚ trigger_stmtï¼šå½“è§¦å‘ç¨‹åºæ¿€æ´»æ—¶æ‰§è¡Œçš„è¯­å¥ã€‚æ‰§è¡Œå¤šä¸ªè¯­å¥ï¼Œå¯ä½¿ç”¨BEGIN...ENDå¤åˆè¯­å¥ç»“æ„-- åˆ é™¤DROP TRIGGER [schema_name.]trigger_nameå¯ä»¥ä½¿ç”¨oldå’Œnewä»£æ›¿æ—§çš„å’Œæ–°çš„æ•°æ® æ›´æ–°æ“ä½œï¼Œæ›´æ–°å‰æ˜¯oldï¼Œæ›´æ–°åæ˜¯new. åˆ é™¤æ“ä½œï¼Œåªæœ‰old. å¢åŠ æ“ä½œï¼Œåªæœ‰new.-- æ³¨æ„ 1. å¯¹äºå…·æœ‰ç›¸åŒè§¦å‘ç¨‹åºåŠ¨ä½œæ—¶é—´å’Œäº‹ä»¶çš„ç»™å®šè¡¨ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªè§¦å‘ç¨‹åºã€‚-- å­—ç¬¦è¿æ¥å‡½æ•°concat(str1,str2,...])concat_ws(separator,str1,str2,...)-- åˆ†æ”¯è¯­å¥if æ¡ä»¶ then æ‰§è¡Œè¯­å¥elseif æ¡ä»¶ then æ‰§è¡Œè¯­å¥else æ‰§è¡Œè¯­å¥end if;-- ä¿®æ”¹æœ€å¤–å±‚è¯­å¥ç»“æŸç¬¦delimiter è‡ªå®šä¹‰ç»“æŸç¬¦å· SQLè¯­å¥è‡ªå®šä¹‰ç»“æŸç¬¦å·delimiter ; -- ä¿®æ”¹å›åŸæ¥çš„åˆ†å·-- è¯­å¥å—åŒ…è£¹begin è¯­å¥å—end-- ç‰¹æ®Šçš„æ‰§è¡Œ1. åªè¦æ·»åŠ è®°å½•ï¼Œå°±ä¼šè§¦å‘ç¨‹åºã€‚2. Insert into on duplicate key update è¯­æ³•ä¼šè§¦å‘ï¼š å¦‚æœæ²¡æœ‰é‡å¤è®°å½•ï¼Œä¼šè§¦å‘ before insert, after insert; å¦‚æœæœ‰é‡å¤è®°å½•å¹¶æ›´æ–°ï¼Œä¼šè§¦å‘ before insert, before update, after update; å¦‚æœæœ‰é‡å¤è®°å½•ä½†æ˜¯æ²¡æœ‰å‘ç”Ÿæ›´æ–°ï¼Œåˆ™è§¦å‘ before insert, before update3. Replace è¯­æ³• å¦‚æœæœ‰è®°å½•ï¼Œåˆ™æ‰§è¡Œ before insert, before delete, after delete, after insert SQLç¼–ç¨‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130/* SQLç¼–ç¨‹ */ --------------------// å±€éƒ¨å˜é‡ ------------ å˜é‡å£°æ˜ declare var_name[,...] type [default value] è¿™ä¸ªè¯­å¥è¢«ç”¨æ¥å£°æ˜å±€éƒ¨å˜é‡ã€‚è¦ç»™å˜é‡æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¯·åŒ…å«ä¸€ä¸ªdefaultå­å¥ã€‚å€¼å¯ä»¥è¢«æŒ‡å®šä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸éœ€è¦ä¸ºä¸€ä¸ªå¸¸æ•°ã€‚å¦‚æœæ²¡æœ‰defaultå­å¥ï¼Œåˆå§‹å€¼ä¸ºnullã€‚-- èµ‹å€¼ ä½¿ç”¨ set å’Œ select into è¯­å¥ä¸ºå˜é‡èµ‹å€¼ã€‚ - æ³¨æ„ï¼šåœ¨å‡½æ•°å†…æ˜¯å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡ï¼ˆç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡ï¼‰--// å…¨å±€å˜é‡ ------------ å®šä¹‰ã€èµ‹å€¼set è¯­å¥å¯ä»¥å®šä¹‰å¹¶ä¸ºå˜é‡èµ‹å€¼ã€‚set @var = value;ä¹Ÿå¯ä»¥ä½¿ç”¨select intoè¯­å¥ä¸ºå˜é‡åˆå§‹åŒ–å¹¶èµ‹å€¼ã€‚è¿™æ ·è¦æ±‚selectè¯­å¥åªèƒ½è¿”å›ä¸€è¡Œï¼Œä½†æ˜¯å¯ä»¥æ˜¯å¤šä¸ªå­—æ®µï¼Œå°±æ„å‘³ç€åŒæ—¶ä¸ºå¤šä¸ªå˜é‡è¿›è¡Œèµ‹å€¼ï¼Œå˜é‡çš„æ•°é‡éœ€è¦ä¸æŸ¥è¯¢çš„åˆ—æ•°ä¸€è‡´ã€‚è¿˜å¯ä»¥æŠŠèµ‹å€¼è¯­å¥çœ‹ä½œä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé€šè¿‡selectæ‰§è¡Œå®Œæˆã€‚æ­¤æ—¶ä¸ºäº†é¿å…=è¢«å½“ä½œå…³ç³»è¿ç®—ç¬¦çœ‹å¾…ï¼Œä½¿ç”¨:=ä»£æ›¿ã€‚ï¼ˆsetè¯­å¥å¯ä»¥ä½¿ç”¨= å’Œ :=ï¼‰ã€‚select @var:=20;select @v1:=id, @v2=name from t1 limit 1;select * from tbl_name where @var:=30;select into å¯ä»¥å°†è¡¨ä¸­æŸ¥è¯¢è·å¾—çš„æ•°æ®èµ‹ç»™å˜é‡ã€‚ -| select max(height) into @max_height from tb;-- è‡ªå®šä¹‰å˜é‡åä¸ºäº†é¿å…selectè¯­å¥ä¸­ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡ä¸ç³»ç»Ÿæ ‡è¯†ç¬¦ï¼ˆé€šå¸¸æ˜¯å­—æ®µåï¼‰å†²çªï¼Œç”¨æˆ·è‡ªå®šä¹‰å˜é‡åœ¨å˜é‡åå‰ä½¿ç”¨@ä½œä¸ºå¼€å§‹ç¬¦å·ã€‚@var=10; - å˜é‡è¢«å®šä¹‰åï¼Œåœ¨æ•´ä¸ªä¼šè¯å‘¨æœŸéƒ½æœ‰æ•ˆï¼ˆç™»å½•åˆ°é€€å‡ºï¼‰--// æ§åˆ¶ç»“æ„ ------------ ifè¯­å¥if search_condition then statement_list [elseif search_condition then statement_list]...[else statement_list]end if;-- caseè¯­å¥CASE value WHEN [compare-value] THEN result[WHEN [compare-value] THEN result ...][ELSE result]END-- whileå¾ªç¯[begin_label:] while search_condition do statement_listend while [end_label];- å¦‚æœéœ€è¦åœ¨å¾ªç¯å†…æå‰ç»ˆæ­¢ whileå¾ªç¯ï¼Œåˆ™éœ€è¦ä½¿ç”¨æ ‡ç­¾ï¼›æ ‡ç­¾éœ€è¦æˆå¯¹å‡ºç°ã€‚ -- é€€å‡ºå¾ªç¯ é€€å‡ºæ•´ä¸ªå¾ªç¯ leave é€€å‡ºå½“å‰å¾ªç¯ iterate é€šè¿‡é€€å‡ºçš„æ ‡ç­¾å†³å®šé€€å‡ºå“ªä¸ªå¾ªç¯--// å†…ç½®å‡½æ•° ------------ æ•°å€¼å‡½æ•°abs(x) -- ç»å¯¹å€¼ abs(-10.9) = 10format(x, d) -- æ ¼å¼åŒ–åƒåˆ†ä½æ•°å€¼ format(1234567.456, 2) = 1,234,567.46ceil(x) -- å‘ä¸Šå–æ•´ ceil(10.1) = 11floor(x) -- å‘ä¸‹å–æ•´ floor (10.1) = 10round(x) -- å››èˆäº”å…¥å»æ•´mod(m, n) -- m%n m mod n æ±‚ä½™ 10%3=1pi() -- è·å¾—åœ†å‘¨ç‡pow(m, n) -- m^nsqrt(x) -- ç®—æœ¯å¹³æ–¹æ ¹rand() -- éšæœºæ•°truncate(x, d) -- æˆªå–dä½å°æ•°-- æ—¶é—´æ—¥æœŸå‡½æ•°now(), current_timestamp(); -- å½“å‰æ—¥æœŸæ—¶é—´current_date(); -- å½“å‰æ—¥æœŸcurrent_time(); -- å½“å‰æ—¶é—´date(&apos;yyyy-mm-dd hh:ii:ss&apos;); -- è·å–æ—¥æœŸéƒ¨åˆ†time(&apos;yyyy-mm-dd hh:ii:ss&apos;); -- è·å–æ—¶é—´éƒ¨åˆ†date_format(&apos;yyyy-mm-dd hh:ii:ss&apos;, &apos;%d %y %a %d %m %b %j&apos;); -- æ ¼å¼åŒ–æ—¶é—´unix_timestamp(); -- è·å¾—unixæ—¶é—´æˆ³from_unixtime(); -- ä»æ—¶é—´æˆ³è·å¾—æ—¶é—´-- å­—ç¬¦ä¸²å‡½æ•°length(string) -- stringé•¿åº¦ï¼Œå­—èŠ‚char_length(string) -- stringçš„å­—ç¬¦ä¸ªæ•°substring(str, position [,length]) -- ä»strçš„positionå¼€å§‹,å–lengthä¸ªå­—ç¬¦replace(str ,search_str ,replace_str) -- åœ¨strä¸­ç”¨replace_stræ›¿æ¢search_strinstr(string ,substring) -- è¿”å›substringé¦–æ¬¡åœ¨stringä¸­å‡ºç°çš„ä½ç½®concat(string [,...]) -- è¿æ¥å­—ä¸²charset(str) -- è¿”å›å­—ä¸²å­—ç¬¦é›†lcase(string) -- è½¬æ¢æˆå°å†™left(string, length) -- ä»string2ä¸­çš„å·¦è¾¹èµ·å–lengthä¸ªå­—ç¬¦load_file(file_name) -- ä»æ–‡ä»¶è¯»å–å†…å®¹locate(substring, string [,start_position]) -- åŒinstr,ä½†å¯æŒ‡å®šå¼€å§‹ä½ç½®lpad(string, length, pad) -- é‡å¤ç”¨padåŠ åœ¨stringå¼€å¤´,ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlengthltrim(string) -- å»é™¤å‰ç«¯ç©ºæ ¼repeat(string, count) -- é‡å¤countæ¬¡rpad(string, length, pad) --åœ¨stråç”¨padè¡¥å……,ç›´åˆ°é•¿åº¦ä¸ºlengthrtrim(string) -- å»é™¤åç«¯ç©ºæ ¼strcmp(string1 ,string2) -- é€å­—ç¬¦æ¯”è¾ƒä¸¤å­—ä¸²å¤§å°-- æµç¨‹å‡½æ•°case when [condition] then result [when [condition] then result ...] [else result] end å¤šåˆ†æ”¯if(expr1,expr2,expr3) åŒåˆ†æ”¯ã€‚-- èšåˆå‡½æ•°count()sum();max();min();avg();group_concat()-- å…¶ä»–å¸¸ç”¨å‡½æ•°md5();default();--// å­˜å‚¨å‡½æ•°ï¼Œè‡ªå®šä¹‰å‡½æ•° ------------ æ–°å»º CREATE FUNCTION function_name (å‚æ•°åˆ—è¡¨) RETURNS è¿”å›å€¼ç±»å‹ å‡½æ•°ä½“ - å‡½æ•°åï¼Œåº”è¯¥åˆæ³•çš„æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”ä¸åº”è¯¥ä¸å·²æœ‰çš„å…³é”®å­—å†²çªã€‚ - ä¸€ä¸ªå‡½æ•°åº”è¯¥å±äºæŸä¸ªæ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨db_name.funciton_nameçš„å½¢å¼æ‰§è¡Œå½“å‰å‡½æ•°æ‰€å±æ•°æ®åº“ï¼Œå¦åˆ™ä¸ºå½“å‰æ•°æ®åº“ã€‚ - å‚æ•°éƒ¨åˆ†ï¼Œç”±&quot;å‚æ•°å&quot;å’Œ&quot;å‚æ•°ç±»å‹&quot;ç»„æˆã€‚å¤šä¸ªå‚æ•°ç”¨é€—å·éš”å¼€ã€‚ - å‡½æ•°ä½“ç”±å¤šæ¡å¯ç”¨çš„mysqlè¯­å¥ï¼Œæµç¨‹æ§åˆ¶ï¼Œå˜é‡å£°æ˜ç­‰è¯­å¥æ„æˆã€‚ - å¤šæ¡è¯­å¥åº”è¯¥ä½¿ç”¨ begin...end è¯­å¥å—åŒ…å«ã€‚ - ä¸€å®šè¦æœ‰ return è¿”å›å€¼è¯­å¥ã€‚-- åˆ é™¤ DROP FUNCTION [IF EXISTS] function_name;-- æŸ¥çœ‹ SHOW FUNCTION STATUS LIKE &apos;partten&apos; SHOW CREATE FUNCTION function_name;-- ä¿®æ”¹ ALTER FUNCTION function_name å‡½æ•°é€‰é¡¹--// å­˜å‚¨è¿‡ç¨‹ï¼Œè‡ªå®šä¹‰åŠŸèƒ½ ------------ å®šä¹‰å­˜å‚¨å­˜å‚¨è¿‡ç¨‹ æ˜¯ä¸€æ®µä»£ç ï¼ˆè¿‡ç¨‹ï¼‰ï¼Œå­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„sqlç»„æˆã€‚ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹é€šå¸¸ç”¨äºå®Œæˆä¸€æ®µä¸šåŠ¡é€»è¾‘ï¼Œä¾‹å¦‚æŠ¥åï¼Œäº¤ç­è´¹ï¼Œè®¢å•å…¥åº“ç­‰ã€‚è€Œä¸€ä¸ªå‡½æ•°é€šå¸¸ä¸“æ³¨ä¸æŸä¸ªåŠŸèƒ½ï¼Œè§†ä¸ºå…¶ä»–ç¨‹åºæœåŠ¡çš„ï¼Œéœ€è¦åœ¨å…¶ä»–è¯­å¥ä¸­è°ƒç”¨å‡½æ•°æ‰å¯ä»¥ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹ä¸èƒ½è¢«å…¶ä»–è°ƒç”¨ï¼Œæ˜¯è‡ªå·±æ‰§è¡Œ é€šè¿‡callæ‰§è¡Œã€‚-- åˆ›å»ºCREATE PROCEDURE sp_name (å‚æ•°åˆ—è¡¨) è¿‡ç¨‹ä½“å‚æ•°åˆ—è¡¨ï¼šä¸åŒäºå‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼Œéœ€è¦æŒ‡æ˜å‚æ•°ç±»å‹INï¼Œè¡¨ç¤ºè¾“å…¥å‹OUTï¼Œè¡¨ç¤ºè¾“å‡ºå‹INOUTï¼Œè¡¨ç¤ºæ··åˆå‹æ³¨æ„ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ å­˜å‚¨è¿‡ç¨‹12345678910111213141516/* å­˜å‚¨è¿‡ç¨‹ */ ------------------å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€æ®µå¯æ‰§è¡Œæ€§ä»£ç çš„é›†åˆã€‚ç›¸æ¯”å‡½æ•°ï¼Œæ›´åå‘äºä¸šåŠ¡é€»è¾‘ã€‚è°ƒç”¨ï¼šCALL è¿‡ç¨‹å-- æ³¨æ„- æ²¡æœ‰è¿”å›å€¼ã€‚- åªèƒ½å•ç‹¬è°ƒç”¨ï¼Œä¸å¯å¤¹æ‚åœ¨å…¶ä»–è¯­å¥ä¸­-- å‚æ•°IN|OUT|INOUT å‚æ•°å æ•°æ®ç±»å‹IN è¾“å…¥ï¼šåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå°†æ•°æ®è¾“å…¥åˆ°è¿‡ç¨‹ä½“å†…éƒ¨çš„å‚æ•°OUT è¾“å‡ºï¼šåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå°†è¿‡ç¨‹ä½“å¤„ç†å®Œçš„ç»“æœè¿”å›åˆ°å®¢æˆ·ç«¯INOUT è¾“å…¥è¾“å‡ºï¼šæ—¢å¯è¾“å…¥ï¼Œä¹Ÿå¯è¾“å‡º-- è¯­æ³•CREATE PROCEDURE è¿‡ç¨‹å (å‚æ•°åˆ—è¡¨)BEGIN è¿‡ç¨‹ä½“END ç”¨æˆ·å’Œæƒé™ç®¡ç†1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677/* ç”¨æˆ·å’Œæƒé™ç®¡ç† */ -------------------- rootå¯†ç é‡ç½®1. åœæ­¢MySQLæœåŠ¡2. [Linux] /usr/local/mysql/bin/safe_mysqld --skip-grant-tables &amp; [Windows] mysqld --skip-grant-tables3. use mysql;4. UPDATE `user` SET PASSWORD=PASSWORD(&quot;å¯†ç &quot;) WHERE `user` = &quot;root&quot;;5. FLUSH PRIVILEGES;ç”¨æˆ·ä¿¡æ¯è¡¨ï¼šmysql.user-- åˆ·æ–°æƒé™FLUSH PRIVILEGES;-- å¢åŠ ç”¨æˆ·CREATE USER ç”¨æˆ·å IDENTIFIED BY [PASSWORD] å¯†ç (å­—ç¬¦ä¸²) - å¿…é¡»æ‹¥æœ‰mysqlæ•°æ®åº“çš„å…¨å±€CREATE USERæƒé™ï¼Œæˆ–æ‹¥æœ‰INSERTæƒé™ã€‚ - åªèƒ½åˆ›å»ºç”¨æˆ·ï¼Œä¸èƒ½èµ‹äºˆæƒé™ã€‚ - ç”¨æˆ·åï¼Œæ³¨æ„å¼•å·ï¼šå¦‚ &apos;user_name&apos;@&apos;192.168.1.1&apos; - å¯†ç ä¹Ÿéœ€å¼•å·ï¼Œçº¯æ•°å­—å¯†ç ä¹Ÿè¦åŠ å¼•å· - è¦åœ¨çº¯æ–‡æœ¬ä¸­æŒ‡å®šå¯†ç ï¼Œéœ€å¿½ç•¥PASSWORDå…³é”®è¯ã€‚è¦æŠŠå¯†ç æŒ‡å®šä¸ºç”±PASSWORD()å‡½æ•°è¿”å›çš„æ··ç¼–å€¼ï¼Œéœ€åŒ…å«å…³é”®å­—PASSWORD-- é‡å‘½åç”¨æˆ·RENAME USER old_user TO new_user-- è®¾ç½®å¯†ç SET PASSWORD = PASSWORD(&apos;å¯†ç &apos;) -- ä¸ºå½“å‰ç”¨æˆ·è®¾ç½®å¯†ç SET PASSWORD FOR ç”¨æˆ·å = PASSWORD(&apos;å¯†ç &apos;) -- ä¸ºæŒ‡å®šç”¨æˆ·è®¾ç½®å¯†ç -- åˆ é™¤ç”¨æˆ·DROP USER ç”¨æˆ·å-- åˆ†é…æƒé™/æ·»åŠ ç”¨æˆ·GRANT æƒé™åˆ—è¡¨ ON è¡¨å TO ç”¨æˆ·å [IDENTIFIED BY [PASSWORD] &apos;password&apos;] - all privileges è¡¨ç¤ºæ‰€æœ‰æƒé™ - *.* è¡¨ç¤ºæ‰€æœ‰åº“çš„æ‰€æœ‰è¡¨ - åº“å.è¡¨å è¡¨ç¤ºæŸåº“ä¸‹é¢çš„æŸè¡¨ GRANT ALL PRIVILEGES ON `pms`.* TO &apos;pms&apos;@&apos;%&apos; IDENTIFIED BY &apos;pms0817&apos;;-- æŸ¥çœ‹æƒé™SHOW GRANTS FOR ç”¨æˆ·å -- æŸ¥çœ‹å½“å‰ç”¨æˆ·æƒé™ SHOW GRANTS; æˆ– SHOW GRANTS FOR CURRENT_USER; æˆ– SHOW GRANTS FOR CURRENT_USER();-- æ’¤æ¶ˆæƒé™REVOKE æƒé™åˆ—è¡¨ ON è¡¨å FROM ç”¨æˆ·åREVOKE ALL PRIVILEGES, GRANT OPTION FROM ç”¨æˆ·å -- æ’¤é”€æ‰€æœ‰æƒé™-- æƒé™å±‚çº§-- è¦ä½¿ç”¨GRANTæˆ–REVOKEï¼Œæ‚¨å¿…é¡»æ‹¥æœ‰GRANT OPTIONæƒé™ï¼Œå¹¶ä¸”æ‚¨å¿…é¡»ç”¨äºæ‚¨æ­£åœ¨æˆäºˆæˆ–æ’¤é”€çš„æƒé™ã€‚å…¨å±€å±‚çº§ï¼šå…¨å±€æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šæœåŠ¡å™¨ä¸­çš„æ‰€æœ‰æ•°æ®åº“ï¼Œmysql.user GRANT ALL ON *.*å’Œ REVOKE ALL ON *.*åªæˆäºˆå’Œæ’¤é”€å…¨å±€æƒé™ã€‚æ•°æ®åº“å±‚çº§ï¼šæ•°æ®åº“æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰ç›®æ ‡ï¼Œmysql.db, mysql.host GRANT ALL ON db_name.*å’ŒREVOKE ALL ON db_name.*åªæˆäºˆå’Œæ’¤é”€æ•°æ®åº“æƒé™ã€‚è¡¨å±‚çº§ï¼šè¡¨æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šè¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼Œmysql.talbes_priv GRANT ALL ON db_name.tbl_nameå’ŒREVOKE ALL ON db_name.tbl_nameåªæˆäºˆå’Œæ’¤é”€è¡¨æƒé™ã€‚åˆ—å±‚çº§ï¼šåˆ—æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šè¡¨ä¸­çš„å•ä¸€åˆ—ï¼Œmysql.columns_priv å½“ä½¿ç”¨REVOKEæ—¶ï¼Œæ‚¨å¿…é¡»æŒ‡å®šä¸è¢«æˆæƒåˆ—ç›¸åŒçš„åˆ—ã€‚-- æƒé™åˆ—è¡¨ALL [PRIVILEGES] -- è®¾ç½®é™¤GRANT OPTIONä¹‹å¤–çš„æ‰€æœ‰ç®€å•æƒé™ALTER -- å…è®¸ä½¿ç”¨ALTER TABLEALTER ROUTINE -- æ›´æ”¹æˆ–å–æ¶ˆå·²å­˜å‚¨çš„å­ç¨‹åºCREATE -- å…è®¸ä½¿ç”¨CREATE TABLECREATE ROUTINE -- åˆ›å»ºå·²å­˜å‚¨çš„å­ç¨‹åºCREATE TEMPORARY TABLES -- å…è®¸ä½¿ç”¨CREATE TEMPORARY TABLECREATE USER -- å…è®¸ä½¿ç”¨CREATE USER, DROP USER, RENAME USERå’ŒREVOKE ALL PRIVILEGESã€‚CREATE VIEW -- å…è®¸ä½¿ç”¨CREATE VIEWDELETE -- å…è®¸ä½¿ç”¨DELETEDROP -- å…è®¸ä½¿ç”¨DROP TABLEEXECUTE -- å…è®¸ç”¨æˆ·è¿è¡Œå·²å­˜å‚¨çš„å­ç¨‹åºFILE -- å…è®¸ä½¿ç”¨SELECT...INTO OUTFILEå’ŒLOAD DATA INFILEINDEX -- å…è®¸ä½¿ç”¨CREATE INDEXå’ŒDROP INDEXINSERT -- å…è®¸ä½¿ç”¨INSERTLOCK TABLES -- å…è®¸å¯¹æ‚¨æ‹¥æœ‰SELECTæƒé™çš„è¡¨ä½¿ç”¨LOCK TABLESPROCESS -- å…è®¸ä½¿ç”¨SHOW FULL PROCESSLISTREFERENCES -- æœªè¢«å®æ–½RELOAD -- å…è®¸ä½¿ç”¨FLUSHREPLICATION CLIENT -- å…è®¸ç”¨æˆ·è¯¢é—®ä»å±æœåŠ¡å™¨æˆ–ä¸»æœåŠ¡å™¨çš„åœ°å€REPLICATION SLAVE -- ç”¨äºå¤åˆ¶å‹ä»å±æœåŠ¡å™¨ï¼ˆä»ä¸»æœåŠ¡å™¨ä¸­è¯»å–äºŒè¿›åˆ¶æ—¥å¿—äº‹ä»¶ï¼‰SELECT -- å…è®¸ä½¿ç”¨SELECTSHOW DATABASES -- æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“SHOW VIEW -- å…è®¸ä½¿ç”¨SHOW CREATE VIEWSHUTDOWN -- å…è®¸ä½¿ç”¨mysqladmin shutdownSUPER -- å…è®¸ä½¿ç”¨CHANGE MASTER, KILL, PURGE MASTER LOGSå’ŒSET GLOBALè¯­å¥ï¼Œmysqladmin debugå‘½ä»¤ï¼›å…è®¸æ‚¨è¿æ¥ï¼ˆä¸€æ¬¡ï¼‰ï¼Œå³ä½¿å·²è¾¾åˆ°max_connectionsã€‚UPDATE -- å…è®¸ä½¿ç”¨UPDATEUSAGE -- â€œæ— æƒé™â€çš„åŒä¹‰è¯GRANT OPTION -- å…è®¸æˆäºˆæƒé™ è¡¨ç»´æŠ¤12345678/* è¡¨ç»´æŠ¤ */-- åˆ†æå’Œå­˜å‚¨è¡¨çš„å…³é”®å­—åˆ†å¸ƒANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE è¡¨å ...-- æ£€æŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨æ˜¯å¦æœ‰é”™è¯¯CHECK TABLE tbl_name [, tbl_name] ... [option] ...option = &#123;QUICK | FAST | MEDIUM | EXTENDED | CHANGED&#125;-- æ•´ç†æ•°æ®æ–‡ä»¶çš„ç¢ç‰‡OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ... æ‚é¡¹1234567891011121314/* æ‚é¡¹ */ ------------------1. å¯ç”¨åå¼•å·ï¼ˆ`ï¼‰ä¸ºæ ‡è¯†ç¬¦ï¼ˆåº“åã€è¡¨åã€å­—æ®µåã€ç´¢å¼•ã€åˆ«åï¼‰åŒ…è£¹ï¼Œä»¥é¿å…ä¸å…³é”®å­—é‡åï¼ä¸­æ–‡ä¹Ÿå¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦ï¼2. æ¯ä¸ªåº“ç›®å½•å­˜åœ¨ä¸€ä¸ªä¿å­˜å½“å‰æ•°æ®åº“çš„é€‰é¡¹æ–‡ä»¶db.optã€‚3. æ³¨é‡Šï¼š å•è¡Œæ³¨é‡Š # æ³¨é‡Šå†…å®¹ å¤šè¡Œæ³¨é‡Š /* æ³¨é‡Šå†…å®¹ */ å•è¡Œæ³¨é‡Š -- æ³¨é‡Šå†…å®¹ (æ ‡å‡†SQLæ³¨é‡Šé£æ ¼ï¼Œè¦æ±‚åŒç ´æŠ˜å·ååŠ ä¸€ç©ºæ ¼ç¬¦ï¼ˆç©ºæ ¼ã€TABã€æ¢è¡Œç­‰ï¼‰)4. æ¨¡å¼é€šé…ç¬¦ï¼š _ ä»»æ„å•ä¸ªå­—ç¬¦ % ä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œç”šè‡³åŒ…æ‹¬é›¶å­—ç¬¦ å•å¼•å·éœ€è¦è¿›è¡Œè½¬ä¹‰ \\&apos;5. CMDå‘½ä»¤è¡Œå†…çš„è¯­å¥ç»“æŸç¬¦å¯ä»¥ä¸º &quot;;&quot;, &quot;\\G&quot;, &quot;\\g&quot;ï¼Œä»…å½±å“æ˜¾ç¤ºç»“æœã€‚å…¶ä»–åœ°æ–¹è¿˜æ˜¯ç”¨åˆ†å·ç»“æŸã€‚delimiter å¯ä¿®æ”¹å½“å‰å¯¹è¯çš„è¯­å¥ç»“æŸç¬¦ã€‚6. SQLå¯¹å¤§å°å†™ä¸æ•æ„Ÿ7. æ¸…é™¤å·²æœ‰è¯­å¥ï¼š\\c","categories":[],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://zhoumoon.github.io/tags/MySQL/"}]},{"title":"Mybatis-Plus çœŸå¥½ç”¨","slug":"Mybatis-Plus çœŸå¥½ç”¨","date":"2017-09-10T23:12:22.000Z","updated":"2021-02-08T08:14:20.150Z","comments":false,"path":"2017/09/11/Mybatis-Plus çœŸå¥½ç”¨/","link":"","permalink":"http://zhoumoon.github.io/2017/09/11/Mybatis-Plus çœŸå¥½ç”¨/","excerpt":"","text":"å†™åœ¨å‰é¢MyBatisçš„å¢å¼ºæ–¹æ¡ˆç¡®å®æœ‰ä¸å°‘ï¼Œç”šè‡³æœ‰ç§æ„Ÿè§‰æ˜¯ç°åœ¨å¦‚æœåªç”¨ â€œè£¸MyBatisâ€ï¼Œä¸æ¥ç‚¹å¢å¼ºæ’ä»¶éƒ½ä¸å¥½æ„æ€äº†ã€‚è¿™ä¸ï¼Œåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€ŠSpring Booté¡¹ç›®åˆ©ç”¨MyBatis Generatorè¿›è¡Œæ•°æ®å±‚ä»£ç è‡ªåŠ¨ç”Ÿæˆã€‹ ä¸­å°è¯•äº†ä¸€ä¸‹ MyBatis Generatorã€‚è¿™æ¬¡æ¥ç‚¹æ›´åŠ å…ˆè¿›çš„ Mybatis-Plusï¼ŒSQLè¯­å¥éƒ½ä¸ç”¨å†™äº†ï¼Œåˆ†é¡µä¹Ÿæ˜¯è‡ªåŠ¨å®Œæˆï¼Œå—¯ï¼ŒçœŸé¦™ï¼ æ•°æ®åº“å‡†å¤‡1CREATE TABLE tbl_user( user_id BIGINT(20) NOT NULL COMMENT 'ä¸»é”®ID', user_name VARCHAR(30) NULL DEFAULT NULL COMMENT 'å§“å', user_age INT(11) NULL DEFAULT NULL COMMENT 'å¹´é¾„', PRIMARY KEY (user_id)) charset = utf8; MyBatis-PlusåŠ æŒ å·¥ç¨‹æ­å»º ï¼ˆä¸èµ˜è¿°äº†ï¼‰ ä¾èµ–å¼•å…¥ 1234567891011121314151617181920212223&lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.9&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;version&gt;8.0.12&lt;/version&gt;&lt;/dependency&gt; ä¸»è¦æ˜¯ Mybatis Plusã€Lombokï¼ˆä¸çŸ¥é“Lombokå¹²å˜›çš„ï¼Ÿå¯ä»¥çœ‹è¿™é‡Œï¼‰ã€Druidè¿æ¥æ±  ç­‰ä¾èµ–ã€‚ MyBatis Plusé…ç½® é¡¹ç›®é…ç½® 12mybatis-plus: mapper-locations: classpath:/mapper/*Mapper.xml æ–°å¢ MyBatis Plusé…ç½®ç±» 1234@Configuration@MapperScan(\"cn.codesheep.springbtmybatisplus.mapper\")public class MyBatisConfig &#123;&#125; çœ‹åˆ°æ²¡ï¼Œå‡ ä¹é›¶é…ç½®å•Šï¼Œä¸‹é¢å°±å¯ä»¥å†™ä¸šåŠ¡é€»è¾‘äº† ä¸šåŠ¡ç¼–å†™ å®ä½“ç±» 12345678@Data@TableName(\"tbl_user\")public class User &#123; @TableId(value = \"user_id\") private Long userId; private String userName; private Integer userAge;&#125; Mapperç±» 1public interface UserMapper extends BaseMapper&lt;User&gt; &#123;&#125; è¿™é‡Œå•¥æ¥å£æ–¹æ³•ä¹Ÿä¸ç”¨å†™ï¼Œå°±å¯ä»¥å®ç°å¢åˆ æ”¹æŸ¥äº†ï¼ Serviceç±» Serviceæ¥å£ï¼š 1234567public interface UserService extends IService&lt;User&gt; &#123; int insertUser( User user ); int updateUser( User user ); int deleteUser( User user ); User findUserByName( String userName ); IPage getUserPage( Page page, User user );&#125; Serviceå®ç°ï¼š 12345678910111213141516171819202122232425262728@Service@AllArgsConstructorpublic class UserServiceImpl extends ServiceImpl&lt;UserMapper, User&gt; implements UserService &#123; // å¢ @Override public int insertUser(User user) &#123; return baseMapper.insert( user ); &#125; // æ”¹ @Override public int updateUser(User user) &#123; return baseMapper.updateById( user ); &#125; // åˆ  @Override public int deleteUser(User user) &#123; return baseMapper.deleteById( user.getUserId() ); &#125; // æŸ¥ @Override public User findUserByName( String userName ) &#123; return baseMapper.getUserByName( userName ); &#125;&#125; Controllerç±» 12345678910111213141516171819202122232425262728293031@RestController@RequestMapping(\"/user\")public class UserContorller &#123; @Autowired private UserService userService; // å¢ @PostMapping( value = \"/insert\") public Object insert( @RequestBody User user ) &#123; return userService.insertUser( user ); &#125; // æ”¹ @PostMapping( value = \"/update\") public Object update( @RequestBody User user ) &#123; return userService.updateUser( user ); &#125; // åˆ  @PostMapping( value = \"/delete\") public Object delete( @RequestBody User user ) &#123; return userService.deleteUser( user ); &#125; // æŸ¥ @GetMapping( value = \"/getUserByName\") public Object getUserByName( @RequestParam String userName ) &#123; return userService.findUserByName( userName ); &#125;&#125; é€šè¿‡ä»¥ä¸Šå‡ ä¸ªç®€å•çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å°±å®ç°äº† tbl_userè¡¨çš„å¢åˆ æ”¹æŸ¥ï¼Œä¼ ç»Ÿ MyBatisçš„ XMLæ–‡ä»¶ä¸€ä¸ªéƒ½ä¸éœ€è¦å†™ï¼ æœ€å…³å¿ƒçš„åˆ†é¡µé—®é¢˜ é¦–å…ˆè£…é…åˆ†é¡µæ’ä»¶ 1234@Beanpublic PaginationInterceptor paginationInterceptor() &#123; return new PaginationInterceptor();&#125; Mapperç±» 12345678public interface UserMapper extends BaseMapper&lt;User&gt; &#123; // æ™®é€šæŸ¥è¯¢ User getUserByName( String userName ); // åˆ†é¡µæŸ¥è¯¢ IPage&lt;List&lt;User&gt;&gt; getUsersPage( Page page, @Param(\"query\") User user );&#125; Serviceç±» 12345678910111213141516@Service@AllArgsConstructorpublic class UserServiceImpl extends ServiceImpl&lt;UserMapper, User&gt; implements UserService &#123; // æŸ¥ï¼šæ™®é€šæŸ¥ @Override public User findUserByName( String userName ) &#123; return baseMapper.getUserByName( userName ); &#125; // åˆ†é¡µæŸ¥ @Override public IPage getUserPage(Page page, User user) &#123; return baseMapper.getUsersPage( page, user ); &#125;&#125; Controllerç±» 1234@GetMapping( value = \"/page\")public Object getUserPage( Page page, User user ) &#123; return userService.getUserPage( page, user );&#125;","categories":[],"tags":[{"name":"Java","slug":"Java","permalink":"http://zhoumoon.github.io/tags/Java/"}]},{"title":"MySQLé«˜æ€§èƒ½ä¼˜åŒ–è§„èŒƒå»ºè®®","slug":"MySQLé«˜æ€§èƒ½ä¼˜åŒ–è§„èŒƒå»ºè®®","date":"2017-07-12T07:12:00.000Z","updated":"2021-02-08T08:14:20.138Z","comments":false,"path":"2017/07/12/MySQLé«˜æ€§èƒ½ä¼˜åŒ–è§„èŒƒå»ºè®®/","link":"","permalink":"http://zhoumoon.github.io/2017/07/12/MySQLé«˜æ€§èƒ½ä¼˜åŒ–è§„èŒƒå»ºè®®/","excerpt":"","text":"æ•°æ®åº“å‘½ä»¤è§„èŒƒ æ•°æ®åº“åŸºæœ¬è®¾è®¡è§„èŒƒ 1. æ‰€æœ‰è¡¨å¿…é¡»ä½¿ç”¨ Innodb å­˜å‚¨å¼•æ“ 2. æ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ç»Ÿä¸€ä½¿ç”¨ UTF8 3. æ‰€æœ‰è¡¨å’Œå­—æ®µéƒ½éœ€è¦æ·»åŠ æ³¨é‡Š 4. å°½é‡æ§åˆ¶å•è¡¨æ•°æ®é‡çš„å¤§å°,å»ºè®®æ§åˆ¶åœ¨ 500 ä¸‡ä»¥å†…ã€‚ 5. è°¨æ…ä½¿ç”¨ MySQL åˆ†åŒºè¡¨ 6.å°½é‡åšåˆ°å†·çƒ­æ•°æ®åˆ†ç¦»,å‡å°è¡¨çš„å®½åº¦ 7. ç¦æ­¢åœ¨è¡¨ä¸­å»ºç«‹é¢„ç•™å­—æ®µ 8. ç¦æ­¢åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å›¾ç‰‡,æ–‡ä»¶ç­‰å¤§çš„äºŒè¿›åˆ¶æ•°æ® 9. ç¦æ­¢åœ¨çº¿ä¸Šåšæ•°æ®åº“å‹åŠ›æµ‹è¯• 10. ç¦æ­¢ä»å¼€å‘ç¯å¢ƒ,æµ‹è¯•ç¯å¢ƒç›´æ¥è¿æ¥ç”Ÿæˆç¯å¢ƒæ•°æ®åº“ æ•°æ®åº“å­—æ®µè®¾è®¡è§„èŒƒ 1. ä¼˜å…ˆé€‰æ‹©ç¬¦åˆå­˜å‚¨éœ€è¦çš„æœ€å°çš„æ•°æ®ç±»å‹ 2. é¿å…ä½¿ç”¨ TEXT,BLOB æ•°æ®ç±»å‹ï¼Œæœ€å¸¸è§çš„ TEXT ç±»å‹å¯ä»¥å­˜å‚¨ 64k çš„æ•°æ® 3. é¿å…ä½¿ç”¨ ENUM ç±»å‹ 4. å°½å¯èƒ½æŠŠæ‰€æœ‰åˆ—å®šä¹‰ä¸º NOT NULL 5. ä½¿ç”¨ TIMESTAMP(4 ä¸ªå­—èŠ‚) æˆ– DATETIME ç±»å‹ (8 ä¸ªå­—èŠ‚) å­˜å‚¨æ—¶é—´ 6. åŒè´¢åŠ¡ç›¸å…³çš„é‡‘é¢ç±»æ•°æ®å¿…é¡»ä½¿ç”¨ decimal ç±»å‹ ç´¢å¼•è®¾è®¡è§„èŒƒ 1. é™åˆ¶æ¯å¼ è¡¨ä¸Šçš„ç´¢å¼•æ•°é‡,å»ºè®®å•å¼ è¡¨ç´¢å¼•ä¸è¶…è¿‡ 5 ä¸ª 2. ç¦æ­¢ç»™è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½å»ºç«‹å•ç‹¬çš„ç´¢å¼• 3. æ¯ä¸ª Innodb è¡¨å¿…é¡»æœ‰ä¸ªä¸»é”® 4. å¸¸è§ç´¢å¼•åˆ—å»ºè®® 5.å¦‚ä½•é€‰æ‹©ç´¢å¼•åˆ—çš„é¡ºåº 6. é¿å…å»ºç«‹å†—ä½™ç´¢å¼•å’Œé‡å¤ç´¢å¼•ï¼ˆå¢åŠ äº†æŸ¥è¯¢ä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’çš„æ—¶é—´ï¼‰ 7. å¯¹äºé¢‘ç¹çš„æŸ¥è¯¢ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è¦†ç›–ç´¢å¼• 8.ç´¢å¼• SET è§„èŒƒ æ•°æ®åº“ SQL å¼€å‘è§„èŒƒ 1. å»ºè®®ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥è¿›è¡Œæ•°æ®åº“æ“ä½œ 2. é¿å…æ•°æ®ç±»å‹çš„éšå¼è½¬æ¢ 3. å……åˆ†åˆ©ç”¨è¡¨ä¸Šå·²ç»å­˜åœ¨çš„ç´¢å¼• 4. æ•°æ®åº“è®¾è®¡æ—¶ï¼Œåº”è¯¥è¦å¯¹ä»¥åæ‰©å±•è¿›è¡Œè€ƒè™‘ 5. ç¨‹åºè¿æ¥ä¸åŒçš„æ•°æ®åº“ä½¿ç”¨ä¸åŒçš„è´¦å·ï¼Œè¿›åˆ¶è·¨åº“æŸ¥è¯¢ 6. ç¦æ­¢ä½¿ç”¨ SELECT * å¿…é¡»ä½¿ç”¨ SELECT &lt;å­—æ®µåˆ—è¡¨&gt; æŸ¥è¯¢ 7. ç¦æ­¢ä½¿ç”¨ä¸å«å­—æ®µåˆ—è¡¨çš„ INSERT è¯­å¥ 8. é¿å…ä½¿ç”¨å­æŸ¥è¯¢ï¼Œå¯ä»¥æŠŠå­æŸ¥è¯¢ä¼˜åŒ–ä¸º join æ“ä½œ 9. é¿å…ä½¿ç”¨ JOIN å…³è”å¤ªå¤šçš„è¡¨ 10. å‡å°‘åŒæ•°æ®åº“çš„äº¤äº’æ¬¡æ•° 11. å¯¹åº”åŒä¸€åˆ—è¿›è¡Œ or åˆ¤æ–­æ—¶ï¼Œä½¿ç”¨ in ä»£æ›¿ or 12. ç¦æ­¢ä½¿ç”¨ order by rand() è¿›è¡Œéšæœºæ’åº 13. WHERE ä»å¥ä¸­ç¦æ­¢å¯¹åˆ—è¿›è¡Œå‡½æ•°è½¬æ¢å’Œè®¡ç®— 14. åœ¨æ˜æ˜¾ä¸ä¼šæœ‰é‡å¤å€¼æ—¶ä½¿ç”¨ UNION ALL è€Œä¸æ˜¯ UNION 15. æ‹†åˆ†å¤æ‚çš„å¤§ SQL ä¸ºå¤šä¸ªå° SQL æ•°æ®åº“æ“ä½œè¡Œä¸ºè§„èŒƒ 1. è¶… 100 ä¸‡è¡Œçš„æ‰¹é‡å†™ (UPDATE,DELETE,INSERT) æ“ä½œ,è¦åˆ†æ‰¹å¤šæ¬¡è¿›è¡Œæ“ä½œ 2. å¯¹äºå¤§è¡¨ä½¿ç”¨ pt-online-schema-change ä¿®æ”¹è¡¨ç»“æ„ 3. ç¦æ­¢ä¸ºç¨‹åºä½¿ç”¨çš„è´¦å·èµ‹äºˆ super æƒé™ 4. å¯¹äºç¨‹åºè¿æ¥æ•°æ®åº“è´¦å·,éµå¾ªæƒé™æœ€å°åŸåˆ™ æ•°æ®åº“å‘½ä»¤è§„èŒƒ æ‰€æœ‰æ•°æ®åº“å¯¹è±¡åç§°å¿…é¡»ä½¿ç”¨å°å†™å­—æ¯å¹¶ç”¨ä¸‹åˆ’çº¿åˆ†å‰² æ‰€æœ‰æ•°æ®åº“å¯¹è±¡åç§°ç¦æ­¢ä½¿ç”¨ MySQL ä¿ç•™å…³é”®å­—ï¼ˆå¦‚æœè¡¨åä¸­åŒ…å«å…³é”®å­—æŸ¥è¯¢æ—¶ï¼Œéœ€è¦å°†å…¶ç”¨å•å¼•å·æ‹¬èµ·æ¥ï¼‰ æ•°æ®åº“å¯¹è±¡çš„å‘½åè¦èƒ½åšåˆ°è§åè¯†æ„ï¼Œå¹¶ä¸”æœ€åä¸è¦è¶…è¿‡ 32 ä¸ªå­—ç¬¦ ä¸´æ—¶åº“è¡¨å¿…é¡»ä»¥ tmp_ä¸ºå‰ç¼€å¹¶ä»¥æ—¥æœŸä¸ºåç¼€ï¼Œå¤‡ä»½è¡¨å¿…é¡»ä»¥ bak_ä¸ºå‰ç¼€å¹¶ä»¥æ—¥æœŸ (æ—¶é—´æˆ³) ä¸ºåç¼€ æ‰€æœ‰å­˜å‚¨ç›¸åŒæ•°æ®çš„åˆ—åå’Œåˆ—ç±»å‹å¿…é¡»ä¸€è‡´ï¼ˆä¸€èˆ¬ä½œä¸ºå…³è”åˆ—ï¼Œå¦‚æœæŸ¥è¯¢æ—¶å…³è”åˆ—ç±»å‹ä¸ä¸€è‡´ä¼šè‡ªåŠ¨è¿›è¡Œæ•°æ®ç±»å‹éšå¼è½¬æ¢ï¼Œä¼šé€ æˆåˆ—ä¸Šçš„ç´¢å¼•å¤±æ•ˆï¼Œå¯¼è‡´æŸ¥è¯¢æ•ˆç‡é™ä½ï¼‰ æ•°æ®åº“åŸºæœ¬è®¾è®¡è§„èŒƒ1. æ‰€æœ‰è¡¨å¿…é¡»ä½¿ç”¨ Innodb å­˜å‚¨å¼•æ“æ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼ˆå³ Innodb æ— æ³•æ»¡è¶³çš„åŠŸèƒ½å¦‚ï¼šåˆ—å­˜å‚¨ï¼Œå­˜å‚¨ç©ºé—´æ•°æ®ç­‰ï¼‰çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰è¡¨å¿…é¡»ä½¿ç”¨ Innodb å­˜å‚¨å¼•æ“ï¼ˆMySQL5.5 ä¹‹å‰é»˜è®¤ä½¿ç”¨ Myisamï¼Œ5.6 ä»¥åé»˜è®¤çš„ä¸º Innodbï¼‰ã€‚ Innodb æ”¯æŒäº‹åŠ¡ï¼Œæ”¯æŒè¡Œçº§é”ï¼Œæ›´å¥½çš„æ¢å¤æ€§ï¼Œé«˜å¹¶å‘ä¸‹æ€§èƒ½æ›´å¥½ã€‚ 2. æ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ç»Ÿä¸€ä½¿ç”¨ UTF8å…¼å®¹æ€§æ›´å¥½ï¼Œç»Ÿä¸€å­—ç¬¦é›†å¯ä»¥é¿å…ç”±äºå­—ç¬¦é›†è½¬æ¢äº§ç”Ÿçš„ä¹±ç ï¼Œä¸åŒçš„å­—ç¬¦é›†è¿›è¡Œæ¯”è¾ƒå‰éœ€è¦è¿›è¡Œè½¬æ¢ä¼šé€ æˆç´¢å¼•å¤±æ•ˆï¼Œå¦‚æœæ•°æ®åº“ä¸­æœ‰å­˜å‚¨ emoji è¡¨æƒ…çš„éœ€è¦ï¼Œå­—ç¬¦é›†éœ€è¦é‡‡ç”¨ utf8mb4 å­—ç¬¦é›†ã€‚ 3. æ‰€æœ‰è¡¨å’Œå­—æ®µéƒ½éœ€è¦æ·»åŠ æ³¨é‡Šä½¿ç”¨ comment ä»å¥æ·»åŠ è¡¨å’Œåˆ—çš„å¤‡æ³¨ï¼Œä»ä¸€å¼€å§‹å°±è¿›è¡Œæ•°æ®å­—å…¸çš„ç»´æŠ¤ 4. å°½é‡æ§åˆ¶å•è¡¨æ•°æ®é‡çš„å¤§å°,å»ºè®®æ§åˆ¶åœ¨ 500 ä¸‡ä»¥å†…ã€‚500 ä¸‡å¹¶ä¸æ˜¯ MySQL æ•°æ®åº“çš„é™åˆ¶ï¼Œè¿‡å¤§ä¼šé€ æˆä¿®æ”¹è¡¨ç»“æ„ï¼Œå¤‡ä»½ï¼Œæ¢å¤éƒ½ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ã€‚ å¯ä»¥ç”¨å†å²æ•°æ®å½’æ¡£ï¼ˆåº”ç”¨äºæ—¥å¿—æ•°æ®ï¼‰ï¼Œåˆ†åº“åˆ†è¡¨ï¼ˆåº”ç”¨äºä¸šåŠ¡æ•°æ®ï¼‰ç­‰æ‰‹æ®µæ¥æ§åˆ¶æ•°æ®é‡å¤§å° 5. è°¨æ…ä½¿ç”¨ MySQL åˆ†åŒºè¡¨åˆ†åŒºè¡¨åœ¨ç‰©ç†ä¸Šè¡¨ç°ä¸ºå¤šä¸ªæ–‡ä»¶ï¼Œåœ¨é€»è¾‘ä¸Šè¡¨ç°ä¸ºä¸€ä¸ªè¡¨ï¼› è°¨æ…é€‰æ‹©åˆ†åŒºé”®ï¼Œè·¨åˆ†åŒºæŸ¥è¯¢æ•ˆç‡å¯èƒ½æ›´ä½ï¼› å»ºè®®é‡‡ç”¨ç‰©ç†åˆ†è¡¨çš„æ–¹å¼ç®¡ç†å¤§æ•°æ®ã€‚ 6.å°½é‡åšåˆ°å†·çƒ­æ•°æ®åˆ†ç¦»,å‡å°è¡¨çš„å®½åº¦ MySQL é™åˆ¶æ¯ä¸ªè¡¨æœ€å¤šå­˜å‚¨ 4096 åˆ—ï¼Œå¹¶ä¸”æ¯ä¸€è¡Œæ•°æ®çš„å¤§å°ä¸èƒ½è¶…è¿‡ 65535 å­—èŠ‚ã€‚ å‡å°‘ç£ç›˜ IO,ä¿è¯çƒ­æ•°æ®çš„å†…å­˜ç¼“å­˜å‘½ä¸­ç‡ï¼ˆè¡¨è¶Šå®½ï¼ŒæŠŠè¡¨è£…è½½è¿›å†…å­˜ç¼“å†²æ± æ—¶æ‰€å ç”¨çš„å†…å­˜ä¹Ÿå°±è¶Šå¤§,ä¹Ÿä¼šæ¶ˆè€—æ›´å¤šçš„ IOï¼‰ï¼› æ›´æœ‰æ•ˆçš„åˆ©ç”¨ç¼“å­˜ï¼Œé¿å…è¯»å…¥æ— ç”¨çš„å†·æ•°æ®ï¼› ç»å¸¸ä¸€èµ·ä½¿ç”¨çš„åˆ—æ”¾åˆ°ä¸€ä¸ªè¡¨ä¸­ï¼ˆé¿å…æ›´å¤šçš„å…³è”æ“ä½œï¼‰ã€‚ 7. ç¦æ­¢åœ¨è¡¨ä¸­å»ºç«‹é¢„ç•™å­—æ®µé¢„ç•™å­—æ®µçš„å‘½åå¾ˆéš¾åšåˆ°è§åè¯†ä¹‰ã€‚ é¢„ç•™å­—æ®µæ— æ³•ç¡®è®¤å­˜å‚¨çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥æ— æ³•é€‰æ‹©åˆé€‚çš„ç±»å‹ã€‚ å¯¹é¢„ç•™å­—æ®µç±»å‹çš„ä¿®æ”¹ï¼Œä¼šå¯¹è¡¨è¿›è¡Œé”å®šã€‚ 8. ç¦æ­¢åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å›¾ç‰‡,æ–‡ä»¶ç­‰å¤§çš„äºŒè¿›åˆ¶æ•°æ®é€šå¸¸æ–‡ä»¶å¾ˆå¤§ï¼Œä¼šçŸ­æ—¶é—´å†…é€ æˆæ•°æ®é‡å¿«é€Ÿå¢é•¿ï¼Œæ•°æ®åº“è¿›è¡Œæ•°æ®åº“è¯»å–æ—¶ï¼Œé€šå¸¸ä¼šè¿›è¡Œå¤§é‡çš„éšæœº IO æ“ä½œï¼Œæ–‡ä»¶å¾ˆå¤§æ—¶ï¼ŒIO æ“ä½œå¾ˆè€—æ—¶ã€‚ é€šå¸¸å­˜å‚¨äºæ–‡ä»¶æœåŠ¡å™¨ï¼Œæ•°æ®åº“åªå­˜å‚¨æ–‡ä»¶åœ°å€ä¿¡æ¯ 9. ç¦æ­¢åœ¨çº¿ä¸Šåšæ•°æ®åº“å‹åŠ›æµ‹è¯•10. ç¦æ­¢ä»å¼€å‘ç¯å¢ƒ,æµ‹è¯•ç¯å¢ƒç›´æ¥è¿æ¥ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“ æ•°æ®åº“å­—æ®µè®¾è®¡è§„èŒƒ1. ä¼˜å…ˆé€‰æ‹©ç¬¦åˆå­˜å‚¨éœ€è¦çš„æœ€å°çš„æ•°æ®ç±»å‹åŸå› ï¼š åˆ—çš„å­—æ®µè¶Šå¤§ï¼Œå»ºç«‹ç´¢å¼•æ—¶æ‰€éœ€è¦çš„ç©ºé—´ä¹Ÿå°±è¶Šå¤§ï¼Œè¿™æ ·ä¸€é¡µä¸­æ‰€èƒ½å­˜å‚¨çš„ç´¢å¼•èŠ‚ç‚¹çš„æ•°é‡ä¹Ÿå°±è¶Šå°‘ä¹Ÿè¶Šå°‘ï¼Œåœ¨éå†æ—¶æ‰€éœ€è¦çš„ IO æ¬¡æ•°ä¹Ÿå°±è¶Šå¤šï¼Œç´¢å¼•çš„æ€§èƒ½ä¹Ÿå°±è¶Šå·®ã€‚ æ–¹æ³•ï¼š a.å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—ç±»å‹å­˜å‚¨,å¦‚:å°† IP åœ°å€è½¬æ¢æˆæ•´å½¢æ•°æ® MySQL æä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥å¤„ç† ip åœ°å€ inet_aton æŠŠ ip è½¬ä¸ºæ— ç¬¦å·æ•´å‹ (4-8 ä½) inet_ntoa æŠŠæ•´å‹çš„ ip è½¬ä¸ºåœ°å€ æ’å…¥æ•°æ®å‰ï¼Œå…ˆç”¨ inet_aton æŠŠ ip åœ°å€è½¬ä¸ºæ•´å‹ï¼Œå¯ä»¥èŠ‚çœç©ºé—´ï¼Œæ˜¾ç¤ºæ•°æ®æ—¶ï¼Œä½¿ç”¨ inet_ntoa æŠŠæ•´å‹çš„ ip åœ°å€è½¬ä¸ºåœ°å€æ˜¾ç¤ºå³å¯ã€‚ b.å¯¹äºéè´Ÿå‹çš„æ•°æ® (å¦‚è‡ªå¢ ID,æ•´å‹ IP) æ¥è¯´,è¦ä¼˜å…ˆä½¿ç”¨æ— ç¬¦å·æ•´å‹æ¥å­˜å‚¨ åŸå› ï¼š æ— ç¬¦å·ç›¸å¯¹äºæœ‰ç¬¦å·å¯ä»¥å¤šå‡ºä¸€å€çš„å­˜å‚¨ç©ºé—´ 12SIGNED INT -2147483648~2147483647UNSIGNED INT 0~4294967295 VARCHAR(N) ä¸­çš„ N ä»£è¡¨çš„æ˜¯å­—ç¬¦æ•°ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°ï¼Œä½¿ç”¨ UTF8 å­˜å‚¨ 255 ä¸ªæ±‰å­— Varchar(255)=765 ä¸ªå­—èŠ‚ã€‚è¿‡å¤§çš„é•¿åº¦ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜ã€‚ 2. é¿å…ä½¿ç”¨ TEXT,BLOB æ•°æ®ç±»å‹ï¼Œæœ€å¸¸è§çš„ TEXT ç±»å‹å¯ä»¥å­˜å‚¨ 64k çš„æ•°æ®a. å»ºè®®æŠŠ BLOB æˆ–æ˜¯ TEXT åˆ—åˆ†ç¦»åˆ°å•ç‹¬çš„æ‰©å±•è¡¨ä¸­ MySQL å†…å­˜ä¸´æ—¶è¡¨ä¸æ”¯æŒ TEXTã€BLOB è¿™æ ·çš„å¤§æ•°æ®ç±»å‹ï¼Œå¦‚æœæŸ¥è¯¢ä¸­åŒ…å«è¿™æ ·çš„æ•°æ®ï¼Œåœ¨æ’åºç­‰æ“ä½œæ—¶ï¼Œå°±ä¸èƒ½ä½¿ç”¨å†…å­˜ä¸´æ—¶è¡¨ï¼Œå¿…é¡»ä½¿ç”¨ç£ç›˜ä¸´æ—¶è¡¨è¿›è¡Œã€‚è€Œä¸”å¯¹äºè¿™ç§æ•°æ®ï¼ŒMySQL è¿˜æ˜¯è¦è¿›è¡ŒäºŒæ¬¡æŸ¥è¯¢ï¼Œä¼šä½¿ sql æ€§èƒ½å˜å¾—å¾ˆå·®ï¼Œä½†æ˜¯ä¸æ˜¯è¯´ä¸€å®šä¸èƒ½ä½¿ç”¨è¿™æ ·çš„æ•°æ®ç±»å‹ã€‚ å¦‚æœä¸€å®šè¦ä½¿ç”¨ï¼Œå»ºè®®æŠŠ BLOB æˆ–æ˜¯ TEXT åˆ—åˆ†ç¦»åˆ°å•ç‹¬çš„æ‰©å±•è¡¨ä¸­ï¼ŒæŸ¥è¯¢æ—¶ä¸€å®šä¸è¦ä½¿ç”¨ select * è€Œåªéœ€è¦å–å‡ºå¿…è¦çš„åˆ—ï¼Œä¸éœ€è¦ TEXT åˆ—çš„æ•°æ®æ—¶ä¸è¦å¯¹è¯¥åˆ—è¿›è¡ŒæŸ¥è¯¢ã€‚ 2ã€TEXT æˆ– BLOB ç±»å‹åªèƒ½ä½¿ç”¨å‰ç¼€ç´¢å¼• å› ä¸ºMySQL å¯¹ç´¢å¼•å­—æ®µé•¿åº¦æ˜¯æœ‰é™åˆ¶çš„ï¼Œæ‰€ä»¥ TEXT ç±»å‹åªèƒ½ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼Œå¹¶ä¸” TEXT åˆ—ä¸Šæ˜¯ä¸èƒ½æœ‰é»˜è®¤å€¼çš„ 3. é¿å…ä½¿ç”¨ ENUM ç±»å‹ä¿®æ”¹ ENUM å€¼éœ€è¦ä½¿ç”¨ ALTER è¯­å¥ ENUM ç±»å‹çš„ ORDER BY æ“ä½œæ•ˆç‡ä½ï¼Œéœ€è¦é¢å¤–æ“ä½œ ç¦æ­¢ä½¿ç”¨æ•°å€¼ä½œä¸º ENUM çš„æšä¸¾å€¼ 4. å°½å¯èƒ½æŠŠæ‰€æœ‰åˆ—å®šä¹‰ä¸º NOT NULLåŸå› ï¼š ç´¢å¼• NULL åˆ—éœ€è¦é¢å¤–çš„ç©ºé—´æ¥ä¿å­˜ï¼Œæ‰€ä»¥è¦å ç”¨æ›´å¤šçš„ç©ºé—´ è¿›è¡Œæ¯”è¾ƒå’Œè®¡ç®—æ—¶è¦å¯¹ NULL å€¼åšç‰¹åˆ«çš„å¤„ç† 5. ä½¿ç”¨ TIMESTAMP(4 ä¸ªå­—èŠ‚) æˆ– DATETIME ç±»å‹ (8 ä¸ªå­—èŠ‚) å­˜å‚¨æ—¶é—´TIMESTAMP å­˜å‚¨çš„æ—¶é—´èŒƒå›´ 1970-01-01 00:00:01 ~ 2038-01-19-03:14:07 TIMESTAMP å ç”¨ 4 å­—èŠ‚å’Œ INT ç›¸åŒï¼Œä½†æ¯” INT å¯è¯»æ€§é«˜ è¶…å‡º TIMESTAMP å–å€¼èŒƒå›´çš„ä½¿ç”¨ DATETIME ç±»å‹å­˜å‚¨ ç»å¸¸ä¼šæœ‰äººç”¨å­—ç¬¦ä¸²å­˜å‚¨æ—¥æœŸå‹çš„æ•°æ®ï¼ˆä¸æ­£ç¡®çš„åšæ³•ï¼‰ ç¼ºç‚¹ 1ï¼šæ— æ³•ç”¨æ—¥æœŸå‡½æ•°è¿›è¡Œè®¡ç®—å’Œæ¯”è¾ƒ ç¼ºç‚¹ 2ï¼šç”¨å­—ç¬¦ä¸²å­˜å‚¨æ—¥æœŸè¦å ç”¨æ›´å¤šçš„ç©ºé—´ 6. åŒè´¢åŠ¡ç›¸å…³çš„é‡‘é¢ç±»æ•°æ®å¿…é¡»ä½¿ç”¨ decimal ç±»å‹ éç²¾å‡†æµ®ç‚¹ï¼šfloat,double ç²¾å‡†æµ®ç‚¹ï¼šdecimal Decimal ç±»å‹ä¸ºç²¾å‡†æµ®ç‚¹æ•°ï¼Œåœ¨è®¡ç®—æ—¶ä¸ä¼šä¸¢å¤±ç²¾åº¦ å ç”¨ç©ºé—´ç”±å®šä¹‰çš„å®½åº¦å†³å®šï¼Œæ¯ 4 ä¸ªå­—èŠ‚å¯ä»¥å­˜å‚¨ 9 ä½æ•°å­—ï¼Œå¹¶ä¸”å°æ•°ç‚¹è¦å ç”¨ä¸€ä¸ªå­—èŠ‚ å¯ç”¨äºå­˜å‚¨æ¯” bigint æ›´å¤§çš„æ•´å‹æ•°æ® ç´¢å¼•è®¾è®¡è§„èŒƒ1. é™åˆ¶æ¯å¼ è¡¨ä¸Šçš„ç´¢å¼•æ•°é‡,å»ºè®®å•å¼ è¡¨ç´¢å¼•ä¸è¶…è¿‡ 5 ä¸ªç´¢å¼•å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼ç´¢å¼•å¯ä»¥æé«˜æ•ˆç‡åŒæ ·å¯ä»¥é™ä½æ•ˆç‡ã€‚ ç´¢å¼•å¯ä»¥å¢åŠ æŸ¥è¯¢æ•ˆç‡ï¼Œä½†åŒæ ·ä¹Ÿä¼šé™ä½æ’å…¥å’Œæ›´æ–°çš„æ•ˆç‡ï¼Œç”šè‡³æœ‰äº›æƒ…å†µä¸‹ä¼šé™ä½æŸ¥è¯¢æ•ˆç‡ã€‚ å› ä¸º MySQL ä¼˜åŒ–å™¨åœ¨é€‰æ‹©å¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢æ—¶ï¼Œä¼šæ ¹æ®ç»Ÿä¸€ä¿¡æ¯ï¼Œå¯¹æ¯ä¸€ä¸ªå¯ä»¥ç”¨åˆ°çš„ç´¢å¼•æ¥è¿›è¡Œè¯„ä¼°ï¼Œä»¥ç”Ÿæˆå‡ºä¸€ä¸ªæœ€å¥½çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¦‚æœåŒæ—¶æœ‰å¾ˆå¤šä¸ªç´¢å¼•éƒ½å¯ä»¥ç”¨äºæŸ¥è¯¢ï¼Œå°±ä¼šå¢åŠ  MySQL ä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’çš„æ—¶é—´ï¼ŒåŒæ ·ä¼šé™ä½æŸ¥è¯¢æ€§èƒ½ã€‚ 2. ç¦æ­¢ç»™è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½å»ºç«‹å•ç‹¬çš„ç´¢å¼•5.6 ç‰ˆæœ¬ä¹‹å‰ï¼Œä¸€ä¸ª sql åªèƒ½ä½¿ç”¨åˆ°ä¸€ä¸ªè¡¨ä¸­çš„ä¸€ä¸ªç´¢å¼•ï¼Œ5.6 ä»¥åï¼Œè™½ç„¶æœ‰äº†åˆå¹¶ç´¢å¼•çš„ä¼˜åŒ–æ–¹å¼ï¼Œä½†æ˜¯è¿˜æ˜¯è¿œè¿œæ²¡æœ‰ä½¿ç”¨ä¸€ä¸ªè”åˆç´¢å¼•çš„æŸ¥è¯¢æ–¹å¼å¥½ã€‚ 3. æ¯ä¸ª Innodb è¡¨å¿…é¡»æœ‰ä¸ªä¸»é”®Innodb æ˜¯ä¸€ç§ç´¢å¼•ç»„ç»‡è¡¨ï¼šæ•°æ®çš„å­˜å‚¨çš„é€»è¾‘é¡ºåºå’Œç´¢å¼•çš„é¡ºåºæ˜¯ç›¸åŒçš„ã€‚æ¯ä¸ªè¡¨éƒ½å¯ä»¥æœ‰å¤šä¸ªç´¢å¼•ï¼Œä½†æ˜¯è¡¨çš„å­˜å‚¨é¡ºåºåªèƒ½æœ‰ä¸€ç§ã€‚ Innodb æ˜¯æŒ‰ç…§ä¸»é”®ç´¢å¼•çš„é¡ºåºæ¥ç»„ç»‡è¡¨çš„ ä¸è¦ä½¿ç”¨æ›´æ–°é¢‘ç¹çš„åˆ—ä½œä¸ºä¸»é”®ï¼Œä¸é€‚ç”¨å¤šåˆ—ä¸»é”®ï¼ˆç›¸å½“äºè”åˆç´¢å¼•ï¼‰ ä¸è¦ä½¿ç”¨ UUID,MD5,HASH,å­—ç¬¦ä¸²åˆ—ä½œä¸ºä¸»é”®ï¼ˆæ— æ³•ä¿è¯æ•°æ®çš„é¡ºåºå¢é•¿ï¼‰ ä¸»é”®å»ºè®®ä½¿ç”¨è‡ªå¢ ID å€¼ 4. å¸¸è§ç´¢å¼•åˆ—å»ºè®® å‡ºç°åœ¨ SELECTã€UPDATEã€DELETE è¯­å¥çš„ WHERE ä»å¥ä¸­çš„åˆ— åŒ…å«åœ¨ ORDER BYã€GROUP BYã€DISTINCT ä¸­çš„å­—æ®µ å¹¶ä¸è¦å°†ç¬¦åˆ 1 å’Œ 2 ä¸­çš„å­—æ®µçš„åˆ—éƒ½å»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼Œ é€šå¸¸å°† 1ã€2 ä¸­çš„å­—æ®µå»ºç«‹è”åˆç´¢å¼•æ•ˆæœæ›´å¥½ å¤šè¡¨ join çš„å…³è”åˆ— 5.å¦‚ä½•é€‰æ‹©ç´¢å¼•åˆ—çš„é¡ºåºå»ºç«‹ç´¢å¼•çš„ç›®çš„æ˜¯ï¼šå¸Œæœ›é€šè¿‡ç´¢å¼•è¿›è¡Œæ•°æ®æŸ¥æ‰¾ï¼Œå‡å°‘éšæœº IOï¼Œå¢åŠ æŸ¥è¯¢æ€§èƒ½ ï¼Œç´¢å¼•èƒ½è¿‡æ»¤å‡ºè¶Šå°‘çš„æ•°æ®ï¼Œåˆ™ä»ç£ç›˜ä¸­è¯»å…¥çš„æ•°æ®ä¹Ÿå°±è¶Šå°‘ã€‚ åŒºåˆ†åº¦æœ€é«˜çš„æ”¾åœ¨è”åˆç´¢å¼•çš„æœ€å·¦ä¾§ï¼ˆåŒºåˆ†åº¦=åˆ—ä¸­ä¸åŒå€¼çš„æ•°é‡/åˆ—çš„æ€»è¡Œæ•°ï¼‰ å°½é‡æŠŠå­—æ®µé•¿åº¦å°çš„åˆ—æ”¾åœ¨è”åˆç´¢å¼•çš„æœ€å·¦ä¾§ï¼ˆå› ä¸ºå­—æ®µé•¿åº¦è¶Šå°ï¼Œä¸€é¡µèƒ½å­˜å‚¨çš„æ•°æ®é‡è¶Šå¤§ï¼ŒIO æ€§èƒ½ä¹Ÿå°±è¶Šå¥½ï¼‰ ä½¿ç”¨æœ€é¢‘ç¹çš„åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å·¦ä¾§ï¼ˆè¿™æ ·å¯ä»¥æ¯”è¾ƒå°‘çš„å»ºç«‹ä¸€äº›ç´¢å¼•ï¼‰ 6. é¿å…å»ºç«‹å†—ä½™ç´¢å¼•å’Œé‡å¤ç´¢å¼•ï¼ˆå¢åŠ äº†æŸ¥è¯¢ä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’çš„æ—¶é—´ï¼‰ é‡å¤ç´¢å¼•ç¤ºä¾‹ï¼šprimary key(id)ã€index(id)ã€unique index(id) å†—ä½™ç´¢å¼•ç¤ºä¾‹ï¼šindex(a,b,c)ã€index(a,b)ã€index(a) 7. å¯¹äºé¢‘ç¹çš„æŸ¥è¯¢ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è¦†ç›–ç´¢å¼• è¦†ç›–ç´¢å¼•ï¼šå°±æ˜¯åŒ…å«äº†æ‰€æœ‰æŸ¥è¯¢å­—æ®µ (where,select,ordery by,group by åŒ…å«çš„å­—æ®µ) çš„ç´¢å¼• è¦†ç›–ç´¢å¼•çš„å¥½å¤„ï¼š é¿å… Innodb è¡¨è¿›è¡Œç´¢å¼•çš„äºŒæ¬¡æŸ¥è¯¢: Innodb æ˜¯ä»¥èšé›†ç´¢å¼•çš„é¡ºåºæ¥å­˜å‚¨çš„ï¼Œå¯¹äº Innodb æ¥è¯´ï¼ŒäºŒçº§ç´¢å¼•åœ¨å¶å­èŠ‚ç‚¹ä¸­æ‰€ä¿å­˜çš„æ˜¯è¡Œçš„ä¸»é”®ä¿¡æ¯ï¼Œå¦‚æœæ˜¯ç”¨äºŒçº§ç´¢å¼•æŸ¥è¯¢æ•°æ®çš„è¯ï¼Œåœ¨æŸ¥æ‰¾åˆ°ç›¸åº”çš„é”®å€¼åï¼Œè¿˜è¦é€šè¿‡ä¸»é”®è¿›è¡ŒäºŒæ¬¡æŸ¥è¯¢æ‰èƒ½è·å–æˆ‘ä»¬çœŸå®æ‰€éœ€è¦çš„æ•°æ®ã€‚è€Œåœ¨è¦†ç›–ç´¢å¼•ä¸­ï¼ŒäºŒçº§ç´¢å¼•çš„é”®å€¼ä¸­å¯ä»¥è·å–æ‰€æœ‰çš„æ•°æ®ï¼Œé¿å…äº†å¯¹ä¸»é”®çš„äºŒæ¬¡æŸ¥è¯¢ ï¼Œå‡å°‘äº† IO æ“ä½œï¼Œæå‡äº†æŸ¥è¯¢æ•ˆç‡ã€‚ å¯ä»¥æŠŠéšæœº IO å˜æˆé¡ºåº IO åŠ å¿«æŸ¥è¯¢æ•ˆç‡: ç”±äºè¦†ç›–ç´¢å¼•æ˜¯æŒ‰é”®å€¼çš„é¡ºåºå­˜å‚¨çš„ï¼Œå¯¹äº IO å¯†é›†å‹çš„èŒƒå›´æŸ¥æ‰¾æ¥è¯´ï¼Œå¯¹æ¯”éšæœºä»ç£ç›˜è¯»å–æ¯ä¸€è¡Œçš„æ•°æ® IO è¦å°‘çš„å¤šï¼Œå› æ­¤åˆ©ç”¨è¦†ç›–ç´¢å¼•åœ¨è®¿é—®æ—¶ä¹Ÿå¯ä»¥æŠŠç£ç›˜çš„éšæœºè¯»å–çš„ IO è½¬å˜æˆç´¢å¼•æŸ¥æ‰¾çš„é¡ºåº IOã€‚ 8.ç´¢å¼• SET è§„èŒƒå°½é‡é¿å…ä½¿ç”¨å¤–é”®çº¦æŸ ä¸å»ºè®®ä½¿ç”¨å¤–é”®çº¦æŸï¼ˆforeign keyï¼‰ï¼Œä½†ä¸€å®šè¦åœ¨è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”é”®ä¸Šå»ºç«‹ç´¢å¼• å¤–é”®å¯ç”¨äºä¿è¯æ•°æ®çš„å‚ç…§å®Œæ•´æ€§ï¼Œä½†å»ºè®®åœ¨ä¸šåŠ¡ç«¯å®ç° å¤–é”®ä¼šå½±å“çˆ¶è¡¨å’Œå­è¡¨çš„å†™æ“ä½œä»è€Œé™ä½æ€§èƒ½ æ•°æ®åº“ SQL å¼€å‘è§„èŒƒ1. å»ºè®®ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥è¿›è¡Œæ•°æ®åº“æ“ä½œé¢„ç¼–è¯‘è¯­å¥å¯ä»¥é‡å¤ä½¿ç”¨è¿™äº›è®¡åˆ’ï¼Œå‡å°‘ SQL ç¼–è¯‘æ‰€éœ€è¦çš„æ—¶é—´ï¼Œè¿˜å¯ä»¥è§£å†³åŠ¨æ€ SQL æ‰€å¸¦æ¥çš„ SQL æ³¨å…¥çš„é—®é¢˜ã€‚ åªä¼ å‚æ•°ï¼Œæ¯”ä¼ é€’ SQL è¯­å¥æ›´é«˜æ•ˆã€‚ ç›¸åŒè¯­å¥å¯ä»¥ä¸€æ¬¡è§£æï¼Œå¤šæ¬¡ä½¿ç”¨ï¼Œæé«˜å¤„ç†æ•ˆç‡ã€‚ 2. é¿å…æ•°æ®ç±»å‹çš„éšå¼è½¬æ¢éšå¼è½¬æ¢ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆå¦‚: 1select name,phone from customer where id = &apos;111&apos;; 3. å……åˆ†åˆ©ç”¨è¡¨ä¸Šå·²ç»å­˜åœ¨çš„ç´¢å¼•é¿å…ä½¿ç”¨åŒ%å·çš„æŸ¥è¯¢æ¡ä»¶ã€‚å¦‚ï¼ša like &#39;%123%&#39;ï¼Œï¼ˆå¦‚æœæ— å‰ç½®%,åªæœ‰åç½®%ï¼Œæ˜¯å¯ä»¥ç”¨åˆ°åˆ—ä¸Šçš„ç´¢å¼•çš„ï¼‰ ä¸€ä¸ª SQL åªèƒ½åˆ©ç”¨åˆ°å¤åˆç´¢å¼•ä¸­çš„ä¸€åˆ—è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ã€‚å¦‚ï¼šæœ‰ a,b,c åˆ—çš„è”åˆç´¢å¼•ï¼Œåœ¨æŸ¥è¯¢æ¡ä»¶ä¸­æœ‰ a åˆ—çš„èŒƒå›´æŸ¥è¯¢ï¼Œåˆ™åœ¨ b,c åˆ—ä¸Šçš„ç´¢å¼•å°†ä¸ä¼šè¢«ç”¨åˆ°ã€‚ åœ¨å®šä¹‰è”åˆç´¢å¼•æ—¶ï¼Œå¦‚æœ a åˆ—è¦ç”¨åˆ°èŒƒå›´æŸ¥æ‰¾çš„è¯ï¼Œå°±è¦æŠŠ a åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å³ä¾§ï¼Œä½¿ç”¨ left join æˆ– not exists æ¥ä¼˜åŒ– not in æ“ä½œï¼Œå› ä¸º not in ä¹Ÿé€šå¸¸ä¼šä½¿ç”¨ç´¢å¼•å¤±æ•ˆã€‚ 4. æ•°æ®åº“è®¾è®¡æ—¶ï¼Œåº”è¯¥è¦å¯¹ä»¥åæ‰©å±•è¿›è¡Œè€ƒè™‘5. ç¨‹åºè¿æ¥ä¸åŒçš„æ•°æ®åº“ä½¿ç”¨ä¸åŒçš„è´¦å·ï¼Œç¦æ­¢è·¨åº“æŸ¥è¯¢ ä¸ºæ•°æ®åº“è¿ç§»å’Œåˆ†åº“åˆ†è¡¨ç•™å‡ºä½™åœ° é™ä½ä¸šåŠ¡è€¦åˆåº¦ é¿å…æƒé™è¿‡å¤§è€Œäº§ç”Ÿçš„å®‰å…¨é£é™© 6. ç¦æ­¢ä½¿ç”¨ SELECT * å¿…é¡»ä½¿ç”¨ SELECT &lt;å­—æ®µåˆ—è¡¨&gt; æŸ¥è¯¢åŸå› ï¼š æ¶ˆè€—æ›´å¤šçš„ CPU å’Œ IO ä»¥ç½‘ç»œå¸¦å®½èµ„æº æ— æ³•ä½¿ç”¨è¦†ç›–ç´¢å¼• å¯å‡å°‘è¡¨ç»“æ„å˜æ›´å¸¦æ¥çš„å½±å“ 7. ç¦æ­¢ä½¿ç”¨ä¸å«å­—æ®µåˆ—è¡¨çš„ INSERT è¯­å¥å¦‚ï¼š 1insert into values (&apos;a&apos;,&apos;b&apos;,&apos;c&apos;); åº”ä½¿ç”¨ï¼š 1insert into t(c1,c2,c3) values (&apos;a&apos;,&apos;b&apos;,&apos;c&apos;); 8. é¿å…ä½¿ç”¨å­æŸ¥è¯¢ï¼Œå¯ä»¥æŠŠå­æŸ¥è¯¢ä¼˜åŒ–ä¸º join æ“ä½œé€šå¸¸å­æŸ¥è¯¢åœ¨ in å­å¥ä¸­ï¼Œä¸”å­æŸ¥è¯¢ä¸­ä¸ºç®€å• SQL(ä¸åŒ…å« unionã€group byã€order byã€limit ä»å¥) æ—¶,æ‰å¯ä»¥æŠŠå­æŸ¥è¯¢è½¬åŒ–ä¸ºå…³è”æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ã€‚ å­æŸ¥è¯¢æ€§èƒ½å·®çš„åŸå› ï¼š å­æŸ¥è¯¢çš„ç»“æœé›†æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼Œé€šå¸¸å­æŸ¥è¯¢çš„ç»“æœé›†ä¼šè¢«å­˜å‚¨åˆ°ä¸´æ—¶è¡¨ä¸­ï¼Œä¸è®ºæ˜¯å†…å­˜ä¸´æ—¶è¡¨è¿˜æ˜¯ç£ç›˜ä¸´æ—¶è¡¨éƒ½ä¸ä¼šå­˜åœ¨ç´¢å¼•ï¼Œæ‰€ä»¥æŸ¥è¯¢æ€§èƒ½ä¼šå—åˆ°ä¸€å®šçš„å½±å“ã€‚ç‰¹åˆ«æ˜¯å¯¹äºè¿”å›ç»“æœé›†æ¯”è¾ƒå¤§çš„å­æŸ¥è¯¢ï¼Œå…¶å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“ä¹Ÿå°±è¶Šå¤§ã€‚ ç”±äºå­æŸ¥è¯¢ä¼šäº§ç”Ÿå¤§é‡çš„ä¸´æ—¶è¡¨ä¹Ÿæ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ä¼šæ¶ˆè€—è¿‡å¤šçš„ CPU å’Œ IO èµ„æºï¼Œäº§ç”Ÿå¤§é‡çš„æ…¢æŸ¥è¯¢ã€‚ 9. é¿å…ä½¿ç”¨ JOIN å…³è”å¤ªå¤šçš„è¡¨å¯¹äº MySQL æ¥è¯´ï¼Œæ˜¯å­˜åœ¨å…³è”ç¼“å­˜çš„ï¼Œç¼“å­˜çš„å¤§å°å¯ä»¥ç”± join_buffer_size å‚æ•°è¿›è¡Œè®¾ç½®ã€‚ åœ¨ MySQL ä¸­ï¼Œå¯¹äºåŒä¸€ä¸ª SQL å¤šå…³è”ï¼ˆjoinï¼‰ä¸€ä¸ªè¡¨ï¼Œå°±ä¼šå¤šåˆ†é…ä¸€ä¸ªå…³è”ç¼“å­˜ï¼Œå¦‚æœåœ¨ä¸€ä¸ª SQL ä¸­å…³è”çš„è¡¨è¶Šå¤šï¼Œæ‰€å ç”¨çš„å†…å­˜ä¹Ÿå°±è¶Šå¤§ã€‚ å¦‚æœç¨‹åºä¸­å¤§é‡çš„ä½¿ç”¨äº†å¤šè¡¨å…³è”çš„æ“ä½œï¼ŒåŒæ—¶ join_buffer_size è®¾ç½®çš„ä¹Ÿä¸åˆç†çš„æƒ…å†µä¸‹ï¼Œå°±å®¹æ˜“é€ æˆæœåŠ¡å™¨å†…å­˜æº¢å‡ºçš„æƒ…å†µï¼Œå°±ä¼šå½±å“åˆ°æœåŠ¡å™¨æ•°æ®åº“æ€§èƒ½çš„ç¨³å®šæ€§ã€‚ åŒæ—¶å¯¹äºå…³è”æ“ä½œæ¥è¯´ï¼Œä¼šäº§ç”Ÿä¸´æ—¶è¡¨æ“ä½œï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ï¼ŒMySQL æœ€å¤šå…è®¸å…³è” 61 ä¸ªè¡¨ï¼Œå»ºè®®ä¸è¶…è¿‡ 5 ä¸ªã€‚ 10. å‡å°‘åŒæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°æ•°æ®åº“æ›´é€‚åˆå¤„ç†æ‰¹é‡æ“ä½œï¼Œåˆå¹¶å¤šä¸ªç›¸åŒçš„æ“ä½œåˆ°ä¸€èµ·ï¼Œå¯ä»¥æé«˜å¤„ç†æ•ˆç‡ã€‚ 11. å¯¹åº”åŒä¸€åˆ—è¿›è¡Œ or åˆ¤æ–­æ—¶ï¼Œä½¿ç”¨ in ä»£æ›¿ orin çš„å€¼ä¸è¦è¶…è¿‡ 500 ä¸ªï¼Œin æ“ä½œå¯ä»¥æ›´æœ‰æ•ˆçš„åˆ©ç”¨ç´¢å¼•ï¼Œor å¤§å¤šæ•°æƒ…å†µä¸‹å¾ˆå°‘èƒ½åˆ©ç”¨åˆ°ç´¢å¼•ã€‚ 12. ç¦æ­¢ä½¿ç”¨ order by rand() è¿›è¡Œéšæœºæ’åºorder by rand() ä¼šæŠŠè¡¨ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®è£…è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶ååœ¨å†…å­˜ä¸­å¯¹æ‰€æœ‰æ•°æ®æ ¹æ®éšæœºç”Ÿæˆçš„å€¼è¿›è¡Œæ’åºï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¯¹æ¯ä¸€è¡Œéƒ½ç”Ÿæˆä¸€ä¸ªéšæœºå€¼ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶çš„æ•°æ®é›†éå¸¸å¤§ï¼Œå°±ä¼šæ¶ˆè€—å¤§é‡çš„ CPU å’Œ IO åŠå†…å­˜èµ„æºã€‚ æ¨èåœ¨ç¨‹åºä¸­è·å–ä¸€ä¸ªéšæœºå€¼ï¼Œç„¶åä»æ•°æ®åº“ä¸­è·å–æ•°æ®çš„æ–¹å¼ã€‚ 13. WHERE ä»å¥ä¸­ç¦æ­¢å¯¹åˆ—è¿›è¡Œå‡½æ•°è½¬æ¢å’Œè®¡ç®—å¯¹åˆ—è¿›è¡Œå‡½æ•°è½¬æ¢æˆ–è®¡ç®—æ—¶ä¼šå¯¼è‡´æ— æ³•ä½¿ç”¨ç´¢å¼• ä¸æ¨èï¼š 1where date(create_time)=&apos;20190101&apos; æ¨èï¼š 1where create_time &gt;= &apos;20190101&apos; and create_time &lt; &apos;20190102&apos; 14. åœ¨æ˜æ˜¾ä¸ä¼šæœ‰é‡å¤å€¼æ—¶ä½¿ç”¨ UNION ALL è€Œä¸æ˜¯ UNION UNION ä¼šæŠŠä¸¤ä¸ªç»“æœé›†çš„æ‰€æœ‰æ•°æ®æ”¾åˆ°ä¸´æ—¶è¡¨ä¸­åå†è¿›è¡Œå»é‡æ“ä½œ UNION ALL ä¸ä¼šå†å¯¹ç»“æœé›†è¿›è¡Œå»é‡æ“ä½œ 15. æ‹†åˆ†å¤æ‚çš„å¤§ SQL ä¸ºå¤šä¸ªå° SQL å¤§ SQL é€»è¾‘ä¸Šæ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å ç”¨å¤§é‡ CPU è¿›è¡Œè®¡ç®—çš„ SQL MySQL ä¸­ï¼Œä¸€ä¸ª SQL åªèƒ½ä½¿ç”¨ä¸€ä¸ª CPU è¿›è¡Œè®¡ç®— SQL æ‹†åˆ†åå¯ä»¥é€šè¿‡å¹¶è¡Œæ‰§è¡Œæ¥æé«˜å¤„ç†æ•ˆç‡ æ•°æ®åº“æ“ä½œè¡Œä¸ºè§„èŒƒ1. è¶… 100 ä¸‡è¡Œçš„æ‰¹é‡å†™ (UPDATE,DELETE,INSERT) æ“ä½œ,è¦åˆ†æ‰¹å¤šæ¬¡è¿›è¡Œæ“ä½œå¤§æ‰¹é‡æ“ä½œå¯èƒ½ä¼šé€ æˆä¸¥é‡çš„ä¸»ä»å»¶è¿Ÿ ä¸»ä»ç¯å¢ƒä¸­,å¤§æ‰¹é‡æ“ä½œå¯èƒ½ä¼šé€ æˆä¸¥é‡çš„ä¸»ä»å»¶è¿Ÿï¼Œå¤§æ‰¹é‡çš„å†™æ“ä½œä¸€èˆ¬éƒ½éœ€è¦æ‰§è¡Œä¸€å®šé•¿çš„æ—¶é—´ï¼Œè€Œåªæœ‰å½“ä¸»åº“ä¸Šæ‰§è¡Œå®Œæˆåï¼Œæ‰ä¼šåœ¨å…¶ä»–ä»åº“ä¸Šæ‰§è¡Œï¼Œæ‰€ä»¥ä¼šé€ æˆä¸»åº“ä¸ä»åº“é•¿æ—¶é—´çš„å»¶è¿Ÿæƒ…å†µ binlog æ—¥å¿—ä¸º row æ ¼å¼æ—¶ä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿— å¤§æ‰¹é‡å†™æ“ä½œä¼šäº§ç”Ÿå¤§é‡æ—¥å¿—ï¼Œç‰¹åˆ«æ˜¯å¯¹äº row æ ¼å¼äºŒè¿›åˆ¶æ•°æ®è€Œè¨€ï¼Œç”±äºåœ¨ row æ ¼å¼ä¸­ä¼šè®°å½•æ¯ä¸€è¡Œæ•°æ®çš„ä¿®æ”¹ï¼Œæˆ‘ä»¬ä¸€æ¬¡ä¿®æ”¹çš„æ•°æ®è¶Šå¤šï¼Œäº§ç”Ÿçš„æ—¥å¿—é‡ä¹Ÿå°±ä¼šè¶Šå¤šï¼Œæ—¥å¿—çš„ä¼ è¾“å’Œæ¢å¤æ‰€éœ€è¦çš„æ—¶é—´ä¹Ÿå°±è¶Šé•¿ï¼Œè¿™ä¹Ÿæ˜¯é€ æˆä¸»ä»å»¶è¿Ÿçš„ä¸€ä¸ªåŸå›  é¿å…äº§ç”Ÿå¤§äº‹åŠ¡æ“ä½œ å¤§æ‰¹é‡ä¿®æ”¹æ•°æ®ï¼Œä¸€å®šæ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¿›è¡Œçš„ï¼Œè¿™å°±ä¼šé€ æˆè¡¨ä¸­å¤§æ‰¹é‡æ•°æ®è¿›è¡Œé”å®šï¼Œä»è€Œå¯¼è‡´å¤§é‡çš„é˜»å¡ï¼Œé˜»å¡ä¼šå¯¹ MySQL çš„æ€§èƒ½äº§ç”Ÿéå¸¸å¤§çš„å½±å“ã€‚ ç‰¹åˆ«æ˜¯é•¿æ—¶é—´çš„é˜»å¡ä¼šå æ»¡æ‰€æœ‰æ•°æ®åº“çš„å¯ç”¨è¿æ¥ï¼Œè¿™ä¼šä½¿ç”Ÿäº§ç¯å¢ƒä¸­çš„å…¶ä»–åº”ç”¨æ— æ³•è¿æ¥åˆ°æ•°æ®åº“ï¼Œå› æ­¤ä¸€å®šè¦æ³¨æ„å¤§æ‰¹é‡å†™æ“ä½œè¦è¿›è¡Œåˆ†æ‰¹ 2. å¯¹äºå¤§è¡¨ä½¿ç”¨ pt-online-schema-change ä¿®æ”¹è¡¨ç»“æ„ é¿å…å¤§è¡¨ä¿®æ”¹äº§ç”Ÿçš„ä¸»ä»å»¶è¿Ÿ é¿å…åœ¨å¯¹è¡¨å­—æ®µè¿›è¡Œä¿®æ”¹æ—¶è¿›è¡Œé”è¡¨ å¯¹å¤§è¡¨æ•°æ®ç»“æ„çš„ä¿®æ”¹ä¸€å®šè¦è°¨æ…ï¼Œä¼šé€ æˆä¸¥é‡çš„é”è¡¨æ“ä½œï¼Œå°¤å…¶æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œæ˜¯ä¸èƒ½å®¹å¿çš„ã€‚ pt-online-schema-change å®ƒä¼šé¦–å…ˆå»ºç«‹ä¸€ä¸ªä¸åŸè¡¨ç»“æ„ç›¸åŒçš„æ–°è¡¨ï¼Œå¹¶ä¸”åœ¨æ–°è¡¨ä¸Šè¿›è¡Œè¡¨ç»“æ„çš„ä¿®æ”¹ï¼Œç„¶åå†æŠŠåŸè¡¨ä¸­çš„æ•°æ®å¤åˆ¶åˆ°æ–°è¡¨ä¸­ï¼Œå¹¶åœ¨åŸè¡¨ä¸­å¢åŠ ä¸€äº›è§¦å‘å™¨ã€‚æŠŠåŸè¡¨ä¸­æ–°å¢çš„æ•°æ®ä¹Ÿå¤åˆ¶åˆ°æ–°è¡¨ä¸­ï¼Œåœ¨è¡Œæ‰€æœ‰æ•°æ®å¤åˆ¶å®Œæˆä¹‹åï¼ŒæŠŠæ–°è¡¨å‘½åæˆåŸè¡¨ï¼Œå¹¶æŠŠåŸæ¥çš„è¡¨åˆ é™¤æ‰ã€‚æŠŠåŸæ¥ä¸€ä¸ª DDL æ“ä½œï¼Œåˆ†è§£æˆå¤šä¸ªå°çš„æ‰¹æ¬¡è¿›è¡Œã€‚ 3. ç¦æ­¢ä¸ºç¨‹åºä½¿ç”¨çš„è´¦å·èµ‹äºˆ super æƒé™ å½“è¾¾åˆ°æœ€å¤§è¿æ¥æ•°é™åˆ¶æ—¶ï¼Œè¿˜è¿è¡Œ 1 ä¸ªæœ‰ super æƒé™çš„ç”¨æˆ·è¿æ¥ super æƒé™åªèƒ½ç•™ç»™ DBA å¤„ç†é—®é¢˜çš„è´¦å·ä½¿ç”¨ 4. å¯¹äºç¨‹åºè¿æ¥æ•°æ®åº“è´¦å·,éµå¾ªæƒé™æœ€å°åŸåˆ™ ç¨‹åºä½¿ç”¨æ•°æ®åº“è´¦å·åªèƒ½åœ¨ä¸€ä¸ª DB ä¸‹ä½¿ç”¨ï¼Œä¸å‡†è·¨åº“ ç¨‹åºä½¿ç”¨çš„è´¦å·åŸåˆ™ä¸Šä¸å‡†æœ‰ drop æƒé™","categories":[],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://zhoumoon.github.io/tags/MySQL/"}]}],"categories":[],"tags":[{"name":"Java","slug":"Java","permalink":"http://zhoumoon.github.io/tags/Java/"},{"name":"Http","slug":"Http","permalink":"http://zhoumoon.github.io/tags/Http/"},{"name":"MySQL","slug":"MySQL","permalink":"http://zhoumoon.github.io/tags/MySQL/"}]}